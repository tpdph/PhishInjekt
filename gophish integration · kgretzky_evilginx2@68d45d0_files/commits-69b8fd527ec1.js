"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["commits","ui_packages_file-renderer-blob_FileRendererBlob_tsx"],{91160:(e,t,n)=>{n.d(t,{M:()=>i});function i(e){if(null==e)throw Error("Failed to load page data.")}},66965:(e,t,n)=>{n.d(t,{x:()=>f});var i=n(85074),r=n(1093),a=n(73627),s=n(6664),l=n(31329),o=n(96540),d=n(53935);let c={focusCommentComposer:"r"};var u=n(82667),m=n(79828);function f({commentBoxRef:e,markdownComposerRef:t,onChange:n,onCancel:f,referenceId:h,hasSingleKeyShortcutEnabled:p,insidePortal:g}){let[x,y]=(0,l.F)(u.t.localStorageKeys.issueNewComment("viewer",h),""),[b,j]=(0,o.useState)(x),C=(0,o.useMemo)(()=>(0,i.KG)(b),[b]),v=(0,a.X)(),N=void 0!==p?p:v?.current_user_settings?.use_single_key_shortcut||!1,{anyItemPickerOpen:w}=(0,r.t)(),S=(0,o.useCallback)(e=>{j(e),y(e)},[y]),L=(0,o.useCallback)(e=>{S(e),n(),""===e&&f()},[S,f,n]);(0,o.useImperativeHandle)(t,()=>({appendText:e=>{L(`${b}

${e}`)},setText:e=>{L(e)},focus:()=>{e.current?.focus()}}),[L,b,e]),(0,o.useEffect)(()=>j(b),[b,j]);let k=(0,o.useCallback)(t=>{if(!(!N||w())&&e&&e.current){t.preventDefault();let n=window.getSelection();if(n&&n.anchorNode){let e={anchorNode:n.anchorNode,range:n.getRangeAt(0)},t=n.anchorNode.parentElement,i=t?.closest(d.Sp(d.mU.issueComment))??t?.closest(d.Sp(d.mU.issueBody));if(i&&i instanceof HTMLDivElement){let t=(0,m.E)(i,e);S(`${t}`)}}e.current.scrollIntoView(),e.current.focus()}},[w,S,e,N]),D=(0,o.useCallback)(()=>{e.current?e.current.reset():j(""),y(void 0)},[e,y]);return(0,s._N)([c.focusCommentComposer],k,{triggerWhenInputElementHasFocus:!1,triggerWhenPortalIsActive:g}),{handleMarkdownBodyChanged:L,markdownValidationResult:C,markdownBody:b,resetMarkdownBody:D}}},14642:(e,t,n)=>{n.d(t,{i:()=>r});var i=n(69730);function r(e,t,n=null){return e?i.k.repoArchived:t?i.k.issueLockedToCollaborators:n||i.k.canNotCommentOnIssue}},76880:(e,t,n)=>{var i=n(86233),r=n(84203),a=n(74848),s=n(89504),l=n(86584),o=n(82897),d=n(96540);function c(e){let t=(0,o.B)(),[n]=(0,d.useState)(t?.repo),[i]=(0,d.useState)(t?.currentUser);return(0,a.jsx)(l.Q,{user:i,children:(0,a.jsx)(s.d,{repository:n,children:e.children})})}try{c.displayName||(c.displayName="App")}catch{}var u=n(74408),m=n(43579),f=n(76515),h=n(83901),p=n(99893),g=n(83056),x=n(51884),y=n(97156),b=n(26750),j=n(95140),C=n(69144),v=n(93653),N=n(18312),w=n(38621),S=n(65481),L=n(30729);function k(){return(0,a.jsxs)(S.A,{variant:"warning",className:"mb-4",children:[(0,a.jsx)(L.A,{icon:w.AlertIcon,className:"mr-2"}),(0,a.jsx)("span",{className:"overflow-hidden",children:"This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository."})]})}try{k.displayName||(k.displayName="SpoofedCommitWarningBanner")}catch{}var D=n(75177),I=n(1719);function E({oid:e,repo:t}){return(0,I.N)(e,t.id)?(0,a.jsxs)(S.A,{className:"mb-4",children:[(0,a.jsx)(D.A,{as:"img",src:"/images/modules/commit/flowers@2x.png",alt:"flower image",className:"mr-4 mt-1 float-left",sx:{width:"88px",height:"49px"}}),(0,a.jsx)("h2",{children:"Thanks for everything, Jim."}),(0,a.jsx)("p",{children:"We will miss you."})]}):null}try{E.displayName||(E.displayName="WeirichCommitBanner")}catch{}function A({oid:e,repo:t,commitBranchState:n}){return(0,a.jsxs)(a.Fragment,{children:[n.loading||0!==n.branches.length?null:(0,a.jsx)(k,{}),(0,a.jsx)(E,{oid:e,repo:t})]})}try{A.displayName||(A.displayName="CommitBanners")}catch{}var _=n(2003),T=n(91467),R=n(24664),F=n(15820),O=n(22084),P=n(13894),$=n(92979),M=n(56389),B=n(87330),U=n(34614),H=n(55847),V=n(47139),z=n(94977),G=n(20053),K=n(83808),W=n(87213),q=n(47373),X=n(94034),Q=n(11732),Y=n(29367),J=n(15941),Z=n(7512),ee=n(2676);function et({data:e,repo:t,className:n}){return e.loading||0!==e.branches.length?(0,a.jsxs)("div",{className:(0,G.$)(n,"d-flex flex-items-center flex-wrap fgColor-muted gap-1"),children:[(0,a.jsx)(L.A,{className:"mr-1",icon:w.GitBranchIcon}),e.loading?(0,a.jsx)($.O,{width:"60px",variant:"rounded",height:"22px"}):e.branches.map((n,i)=>(0,a.jsxs)("div",{children:[(0,a.jsx)(en,{branch:n,repo:t}),i!==e.branches.length-1?(0,a.jsx)("span",{className:"ml-1 user-select-none",children:"+"}):null]},n.branch))]}):null}function en({branch:e,repo:t}){let n=e.branch;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ee.A,{className:"mx-1",href:(0,g.bSP)({repo:t,head:n}),children:e.branch}),e.prs.length>0?(0,a.jsxs)(a.Fragment,{children:["(",e.prs.map((t,n)=>(0,a.jsxs)(d.Fragment,{children:[(0,a.jsx)(ei,{pullRequest:t}),n!==e.prs.length-1?(0,a.jsx)(a.Fragment,{children:",\xa0"}):null]},`pr-${t.repo.ownerLogin}-${t.repo.name}-${t.number}`)),")"]}):null]})}function ei({pullRequest:e}){let{repo:t,number:n,showPrefix:i}=e,r=i?`${t.ownerLogin}/${t.name}`:"";return(0,a.jsxs)(U.A,{href:(0,g.oDn)({repo:t,number:n}),className:"fgColor-muted","data-hovercard-url":(0,g.i9S)({owner:t.ownerLogin,repo:t.name,pullRequestNumber:n}),children:[r,"#",n]})}try{et.displayName||(et.displayName="CommitBranchInfo")}catch{}try{en.displayName||(en.displayName="BranchFragment")}catch{}try{ei.displayName||(ei.displayName="PullRequestLink")}catch{}let er={"commit-message-container":"CommitHeader-module__commit-message-container--nl1pf","commit-header-actions":"CommitHeader-module__commit-header-actions--kHXV1"};var ea=n(56226);function es({commit:e,repo:t}){return(0,a.jsxs)(a.Fragment,{children:[`${e.parents.length} parent${e.parents.length>1||0===e.parents.length?"s":""} `,e.parents.map((e,n)=>(0,a.jsxs)(d.Fragment,{children:[0!==n?" + ":"",(0,a.jsx)(U.A,{to:(0,g.$Qz)({owner:t.ownerLogin,repo:t.name,commitish:e})+new URL(y.fV.origin+y.fV.pathname+y.fV.search,y.fV.origin).search,as:ea.N,className:"color-fg-default Link--inTextBlock","data-hovercard-url":(0,g.fQd)({owner:t.ownerLogin,repo:t.name,commitish:e}),children:(0,q.F)(e)})]},e))]})}try{es.displayName||(es.displayName="CommitParents")}catch{}var el=n(80497),eo=n(91246);function ed({data:e,repo:t,className:n}){if(0===e.tags.length)return null;let i=e.tags.length>2&&e.tags.length<25,r=e.tags.length>=25;return(0,a.jsxs)("div",{className:(0,G.$)(n,"d-flex flex-items-center flex-wrap gap-1"),children:[(0,a.jsx)(L.A,{className:"mr-2 fgColor-muted",icon:w.TagIcon}),(0,a.jsx)(U.A,{href:(0,g.cpj)({owner:t.ownerLogin,repo:t.name,tag:e.tags[0]}),className:"fgColor-default",children:e.tags[0]}),i?(0,a.jsx)(ec,{tags:e.tags,repo:t}):null,r?(0,a.jsx)(eu,{tags:e.tags,repo:t}):null,e.tags.length>1?(0,a.jsx)(U.A,{href:(0,g.cpj)({owner:t.ownerLogin,repo:t.name,tag:e.tags[e.tags.length-1]}),className:"fgColor-muted",children:e.tags[e.tags.length-1]}):null]})}function ec({tags:e,repo:t}){let[n,i]=(0,d.useState)(!1),r=(0,d.useRef)(null),s=(0,d.useCallback)(()=>{i(!0),requestAnimationFrame(()=>r.current?.focus())},[]);return n?(0,a.jsx)(a.Fragment,{children:e.slice(1,e.length-1).map((e,n)=>(0,a.jsx)(U.A,{ref:0===n?r:null,href:(0,g.cpj)({owner:t.ownerLogin,repo:t.name,tag:e}),className:"fgColor-muted mx-1",children:e},e))}):(0,a.jsx)(B.K,{"aria-label":"Show more tags",unsafeDisableTooltip:!0,icon:w.KebabHorizontalIcon,size:"small",variant:"invisible",onClick:s})}function eu({tags:e,repo:t}){let[n,i]=(0,d.useState)(!1),r=(0,d.useRef)(null);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(B.K,{"aria-label":"Show all tags",unsafeDisableTooltip:!0,icon:w.KebabHorizontalIcon,size:"small",variant:"invisible",onClick:()=>i(!0),ref:r}),n&&(0,a.jsx)(eo.l,{title:`${e.length} tags`,onClose:()=>i(!1),returnFocusRef:r,width:"medium",height:e.length>=12?"small":"auto",renderBody:()=>(0,a.jsx)(el.l,{className:"overflow-y-auto py-2","data-testid":"tag-dialog-list",children:e.map(e=>(0,a.jsx)(el.l.LinkItem,{href:(0,g.cpj)({owner:t.ownerLogin,repo:t.name,tag:e}),children:e},e))})})]})}try{ed.displayName||(ed.displayName="CommitTagInfo")}catch{}try{ec.displayName||(ec.displayName="ExpandedTags")}catch{}try{eu.displayName||(eu.displayName="CommitTagsDialog")}catch{}let em=(0,d.memo)(ef);function ef({commit:e,commitInfo:t,repo:n}){let i=(0,d.useRef)(null),r=(0,W.I)(`${(0,g.$Qz)({owner:n.ownerLogin,repo:n.name,commitish:e.oid})}/deferred_commit_data`);return(0,a.jsxs)(M.z,{children:[(0,a.jsx)(M.z.TitleArea,{variant:"large",sx:{minWidth:0,alignItems:"center"},children:(0,a.jsxs)(M.z.Title,{as:"h1",sx:{minWidth:0},className:"f2",children:["Commit ",(0,a.jsx)("span",{className:"text-mono bgColor-muted rounded p-1",children:(0,q.F)(e.oid)})]})}),(0,a.jsxs)(M.z.ContextArea,{children:[(0,a.jsx)(M.z.ContextBar,{children:(0,a.jsx)(ep,{})}),(0,a.jsx)(M.z.ContextAreaActions,{children:(0,a.jsx)(B.K,{as:U.A,href:(0,g.IO9)({repo:n,action:"tree",commitish:e.oid}),icon:w.FileCodeIcon,"aria-label":"Browse files"})})]}),(0,a.jsx)(M.z.Actions,{className:(0,G.$)(er["commit-header-actions"]),children:(0,a.jsxs)("div",{className:"d-none d-md-flex gap-2 flex-items-center flex-justify-between flex-md-justify-end",children:[(0,a.jsx)(ep,{}),(0,a.jsx)(z.A,{text:"Browse the repository at this point in the history",direction:"sw",sx:{display:"flex"},children:(0,a.jsx)(H.Q,{as:U.A,sx:{color:"fg.default"},href:(0,g.IO9)({repo:n,action:"tree",commitish:e.oid}),leadingVisual:w.FileCodeIcon,children:"Browse files"})})]})}),(0,a.jsx)(M.z.Description,{children:(0,a.jsxs)("div",{className:"d-flex flex-column gap-2 width-full",children:[(0,a.jsx)(Q.j,{commit:e,repo:n,settings:{fontColor:"fg.default",avatarSize:20,fontWeight:"bold"},textVariant:"muted",children:(0,a.jsx)(eh,{deferredData:r,oid:e.oid,repo:n})}),(0,a.jsxs)(Z.Z,{className:"pt-0",children:[(e.shortMessageMarkdown||e.bodyMessageHtml)&&(0,a.jsxs)("div",{className:(0,G.$)(er["commit-message-container"]),children:[e.shortMessageMarkdown&&(0,a.jsx)(O.yx,{ref:i,html:e.shortMessageMarkdown,className:"ws-pre-wrap f5 wb-break-word text-mono"}),e.bodyMessageHtml&&(0,a.jsx)(O.yx,{html:e.bodyMessageHtml,className:"ws-pre-wrap extended-commit-description-container f6 wb-break-word text-mono mt-2"})]}),(0,a.jsxs)("div",{className:"p-2 d-flex gap-2 flex-column flex-md-row flex-justify-between",children:[(0,a.jsxs)("div",{className:"d-flex flex-row flex-items-center",children:[(0,a.jsx)(et,{data:t,repo:n}),t.tags.length>0&&(0,a.jsx)("span",{className:"px-2",children:"\xb7"}),(0,a.jsx)(ed,{data:t,repo:n})]}),(0,a.jsxs)("pre",{className:"color-fg-muted d-flex flex-items-center",children:[(0,a.jsx)(es,{commit:e,repo:n})," commit ",(0,a.jsx)("span",{className:"fgColor-default",children:(0,q.F)(e.oid)}),(0,a.jsx)(J.w,{sha:e.oid,direction:"sw"})]})]})]})]})})]})}function eh({deferredData:e,oid:t,repo:n}){let{helpUrl:i}=(0,K.D)(),r=void 0===e,s="";try{s=e?.statusCheckStatus?.short_text?.split("checks")[0]?.trim()||""}catch{}return(0,a.jsxs)(a.Fragment,{children:[r&&(0,a.jsx)($.O,{className:"ml-2",variant:"rounded",width:Y._e}),e?.statusCheckStatus&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"d-flex ml-2 mr-1",children:"\xb7"}),(0,a.jsx)(X.d,{oid:t,status:e?.statusCheckStatus?.state,descriptionString:s,repo:n}),e?.signatureInformation&&e?.verifiedStatus!=="unsigned"&&(0,a.jsx)("span",{className:"d-flex ml-2",children:"\xb7"})]}),e?.signatureInformation&&(0,a.jsx)("div",{className:"ml-2",children:(0,a.jsx)(P.h,{commitOid:t,hasSignature:!0,verificationStatus:e.verifiedStatus,signature:{helpUrl:i,...e.signatureInformation}})})]})}function ep(){let e=(0,F.u)("diff_ux_refresh_beta");return(0,a.jsxs)("div",{className:"d-flex flex-items-center gap-2",children:[(0,a.jsx)(V.A,{variant:"success",children:e?"Preview":"Alpha"}),(0,a.jsx)(U.A,{href:"https://gh.io/new-commit-details-feedback",target:"_blank",rel:"noopener noreferrer",className:"no-wrap f5 text-normal",children:"Give feedback"})]})}try{em.displayName||(em.displayName="CommitHeader")}catch{}try{ef.displayName||(ef.displayName="CommitHeaderUnmemoized")}catch{}try{eh.displayName||(eh.displayName="DeferredCommitHeaderData")}catch{}try{ep.displayName||(ep.displayName="Feedback")}catch{}function eg({unavailableReason:e,commit:t,commitInfo:n}){let i=(0,s.t)(),r=ex[e];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(T.B,{"data-hpc":!0,padding:{narrow:"normal",regular:"spacious"},children:(0,a.jsx)(em,{commit:t,commitInfo:n,repo:i})}),(0,a.jsxs)(R.A,{children:[(0,a.jsx)(R.A.Visual,{children:r.visual}),(0,a.jsx)(R.A.Heading,{children:r.heading}),(0,a.jsx)(R.A.Description,{children:r.description}),r.secondaryAction]})]})}let ex={corrupt:{visual:(0,a.jsx)(w.AlertIcon,{}),heading:"Sorry, this diff is unavailable.",description:"The repository may be missing relevant data.",secondaryAction:(0,a.jsx)(R.A.SecondaryAction,{href:(0,g.y2B)(),children:"Please contact support for more information"})},"missing commits":{visual:(0,a.jsx)(w.AlertIcon,{}),heading:"Sorry, this diff is unavailable.",description:"The repository may be missing relevant data.",secondaryAction:(0,a.jsx)(R.A.SecondaryAction,{href:(0,g.y2B)(),children:"Please contact support for more information"})},timeout:{visual:(0,a.jsx)(w.HourglassIcon,{}),heading:"Sorry, this diff is taking too long to generate.",description:"It may be too large to display on GitHub."},"too busy":{visual:(0,a.jsx)(w.HourglassIcon,{}),heading:"Sorry, this diff is temporarily unavailable due to heavy server load.",description:"Please try again later."}};try{eg.displayName||(eg.displayName="CommitUnavailable")}catch{}var ey=n(24980),eb=n(67726),ej=n(73627),eC=n(31816),ev=n(61645),eN=n(35822);let ew="commit-details-marker-portal";var eS=n(28784);let eL={extraDiffEntries:[],loading:!0,error:!1};var ek=n(37827);function eD(){let[e,t]=(0,d.useState)(!1);return(0,a.jsx)("div",{className:e?"":"pt-4",children:!e&&(0,a.jsx)(ek.l,{title:"Some content is hidden",description:(0,a.jsx)("div",{className:"d-flex flex-items-center",style:{justifyContent:"center"},children:"Large Commits have some content hidden by default. Use the searchbox below for content that may be hidden."}),variant:"warning",onDismiss:()=>t(!0)})})}try{eD.displayName||(eD.displayName="VirtualizedBanner")}catch{}var eI=n(54941),eE=n(63808),eA=n(65568),e_=n(6256),eT=n(71878),eR=n(20594);async function eF(e,t,n){let i=await (0,eS.Sr)(`${t}?pathDigest=${n}${function(e){let t="";for(let n=0;n<e.length;n++)t+=`&lineRanges[]=${JSON.stringify(e[n])}`;return t}(e)}`);if(i.ok)return await i.json()??void 0}async function eO({repo:e,sha1:t,sha2:n,entry:i}){let r=await (0,eS.Sr)((0,eR.RD)((0,g.uxJ)({owner:e.ownerLogin,repo:e.name,entry:i,sha1:t,sha2:n})));if(r.ok){let e=await r.json();return(0,eR.Av)(e),e.diffLines}}function eP(e,t){let n=new Map;for(let t of e){let e=`${t.left}-${t.right}`;n.set(e,t)}return t.map(e=>{let t=`${e.left}-${e.right}`,i=n.get(t);return i?{...e,position:i.position}:{...e,position:null,threadsData:void 0}})}var e$=n(81602),eM=n(89323);function eB({oid:e,path:t,repo:n,isViewable:i=!0,copilotDiffChatProps:r}){return(0,a.jsxs)(eM.W,{children:[(0,a.jsx)(eM.W.Anchor,{children:(0,a.jsx)("button",{className:"Button Button--iconOnly Button--invisible","aria-label":"More options",children:(0,a.jsx)(w.KebabHorizontalIcon,{})})}),(0,a.jsx)(eM.W.Overlay,{children:(0,a.jsxs)(el.l,{children:[(0,a.jsxs)(el.l.LinkItem,{href:(0,g.nD_)({repo:n.name,owner:n.ownerLogin,filePath:t,commitish:e}),inactiveText:i?void 0:"Action unavailable",children:[(0,a.jsx)(el.l.LeadingVisual,{children:(0,a.jsx)(w.EyeIcon,{})}),"View file"]}),r&&(0,a.jsx)(e$.$,{...r})]})})]})}try{eB.displayName||(eB.displayName="BlobActionsMenu")}catch{}let eU=(0,d.memo)(function({commitOid:e,path:t,proseDiffHtml:n,fileRendererInfo:i,dependencyDiffPath:r}){let{loaded:l,richDiffData:o}=function(e,t,n,i){let r=!!t.proseDiffHtml||!!t.fileRendererInfo||!!i,a=(0,s.t)(),[l,o]=(0,d.useState)(r),[c,u]=(0,d.useState)(t),m=(0,d.useCallback)(async()=>{let t=await (0,eS.lS)(`${(0,g.$Qz)({owner:a.ownerLogin,repo:a.name,commitish:e})}/rich_diff/${encodeURIComponent(n)}`);t.ok&&u(await t.json()),o(!0)},[e,n,a]);return(0,d.useEffect)(()=>{r||m()},[r,m]),{loaded:l,richDiffData:c}}(e,{proseDiffHtml:n,fileRendererInfo:i},t,r);return(0,a.jsx)(m.Uz,{dependencyDiffPath:r,fileRendererInfo:o.fileRendererInfo,loading:!l,proseDiffHtml:o.proseDiffHtml})});try{eU.displayName||(eU.displayName="CommitRichDiff")}catch{}let eH={diffHeaderWrapper:"Diff-module__diffHeaderWrapper--rsdD4"},eV={isInMergeQueue:!1,state:"OPEN"},ez=d.memo(eG);function eG({prId:e,diffMatches:t,focusedSearchResult:n,diffEntryData:i,splitPreference:r,lineSpacing:s,contextLinePathURL:c,recalcTotalHeightOfVirtualWindow:u,onOptionCollapseToggle:f,helpUrl:h,headerStickyOffset:p=0,repo:g,oid:x,index:y,ignoreWhitespace:b,virtualizerScrollTo:j}){let C=(0,l.i)(),v=function(e){let t=(0,o.B)(),{commit:n,commentInfo:i}=t,r=(0,eT.I)({commit:n,repo:t.repo,viewerCanReply:i.canComment}),{addComment:a,deleteComment:s,editComment:l,hideComment:c,unhideComment:u}=(0,e_.X)(),{findInlineComment:m}=(0,eA.B)(),f=(0,d.useCallback)(({filePath:e,onCompleted:t,onError:n,text:i,thread:r})=>{let[s,l]=r.id.split("::");if(!s||!l){n(Error("Invalid threadId"));return}a(i,e,l).then(e=>{e.comment?t?.(e.comment.id):n(Error("Failed to add comment"))})},[a]),h=(0,d.useCallback)(({text:e,diffLine:t,filePath:n,onCompleted:i,onError:r})=>{t&&t.position&&a(e,n,t.position.toString()).then(e=>{if(e.comment){let r=e.comment.id,a=`${n}::${t.position}`;i?.(a,r)}else r?.(Error("Failed to add comment"))})},[a]),p=(0,d.useCallback)(({comment:e,text:t,onCompleted:n,onError:i})=>{let r=m(e.id);if(!r){i(Error("Comment not found"));return}l(t,{id:r.id,bodyVersion:r.bodyVersion}).then(e=>{e.updatedFields?n?.():i(Error("Failed to edit comment"))})},[l,m]),g=(0,d.useCallback)(({commentId:e,onCompleted:t,onError:n})=>{let i=m(e);if(!i){n?.(Error("Comment not found"));return}s(i.id.toString()).then(e=>{"success"===e?t?.():"error"===e&&n?.(Error("Failed to delete comment"))})},[s,m]),x=(0,d.useCallback)(({commentId:e,reason:t,onCompleted:n,onError:i})=>{let r=m(e);if(!r){i?.(Error("Comment not found"));return}c(r.id.toString(),t).then(e=>{"success"===e?n?.():"error"===e&&i(Error("Failed to hide comment"))})},[m,c]),y=(0,d.useCallback)(({commentId:e,onCompleted:t,onError:n})=>{let i=m(e);if(!i){n?.(Error("Comment not found"));return}u(i.id.toString()).then(e=>{"success"===e?t?.():"error"===e&&n(Error("Failed to unhide comment"))})},[m,u]);return(0,d.useMemo)(()=>({batchingEnabled:!1,commentSubjectType:"commit",multilineEnabled:!1,resolvingEnabled:!1,suggestedChangesEnabled:!1,lazyFetchReactionGroups:!0,lazyFetchEditHistory:!0,addThread:h,addThreadReply:f,deleteComment:g,editComment:p,pendingSuggestedChangesBatch:[],submitSuggestedChanges:eb.l,addSuggestedChangeToPendingBatch:eb.l,removeSuggestedChangeFromPendingBatch:eb.l,addFileLevelThread:eb.l,resolveThread:eb.l,unresolveThread:eb.l,hideComment:x,unhideComment:y,fetchThread:r,commentBoxConfig:{pasteUrlsAsPlainText:e.pasteUrlsAsPlainText,useMonospaceFont:e.useMonospaceFont}}),[h,f,g,p,r,x,y,e])}((0,e_.X)().commentBoxConfig),N=(0,d.useMemo)(()=>({filteredMarkers:[],activeGlobalMarkerID:"",decrementActiveMarker:eb.l,incrementActiveMarker:eb.l,onActivateGlobalMarkerNavigation:eb.l,overlayPortalContainerName:ew}),[]),w=(0,o.B)().commentInfo,{getThreadDataByPathAndPosition:S,initialExpandedThreadId:L}=(0,eA.B)(),[k,D]=(0,d.useState)(eK(i.current[y],S)),I=(0,d.useCallback)(e=>{D(eK(e,S))},[S]),[E,A]=(0,d.useState)(k.collapsed),[_,T]=(0,d.useState)(k.defaultToRichDiff),[R,F]=(0,d.useState)(k.diffManuallyExpanded),O=(0,d.useRef)(!1);(0,d.useEffect)(()=>{A(k.collapsed)},[k.collapsed]);let P=(0,d.useRef)([]),$=(0,d.useCallback)(async e=>{P.current.push(e);let t=await eF(P.current,c,k.pathDigest);if(void 0!==t){let e={...k};e.diffLines=eP(e.diffLines,t.diffEntryWithContext),I(e),i.current[y]=e,u()}},[c,i,k,y]),M=async()=>{P.current=[],O.current||((k.newTreeEntry?.lineCount??0)<5e3?P.current.push({start:1,end:Math.max(k.oldTreeEntry?.lineCount??0,k.newTreeEntry?.lineCount??0)}):P.current=function(e,t){let n=[];for(let t=0;t<e.length;t++)if("HUNK"===e[t].type){let i=e[t-1>=0?t-1:0],r=e[t+1<e.length?t+1:e.length-1],a=i?.blobLineNumber,s=r?.blobLineNumber;a&&s&&(n.push({start:a,end:a+40}),n.push({start:Math.max(s-40,1),end:s}))}let i=e[e.length-1].blobLineNumber;return i<t&&n.push({start:i,end:i+40}),n}(k.diffLines,k.newTreeEntry?.lineCount??0)),O.current=!O.current;let e=await eF(P.current,c,k.pathDigest);if(void 0!==e){let t={...k};t.diffLines=eP(t.diffLines,e.diffEntryWithContext),I(t),i.current[y]=t,u()}},B=(0,d.useCallback)(async()=>{if(0===k.diffLines.length){let e=await eO({repo:g,sha1:k.oldOid,sha2:k.newOid,entry:k.diffNumber.toString()});if(!e)return;let t={...k};t.diffLines=e,I(t),i.current[y]=t}k.diffManuallyExpanded=!0,i.current[y].diffManuallyExpanded=!0,F(!0),u(),requestAnimationFrame(()=>{j?.(y,{align:"center"})})},[i,k,y,u]);(0,d.useEffect)(()=>{I(i.current[y]),P.current=[]},[b,y,i,x,g.name,g.ownerLogin,k.path,I]);let U=(0,d.useMemo)(()=>{if(k.isBinary||(0,eE.dK)(k))return!1;if(O.current||(i.current[y]?.diffLines?.[1]?.blobLineNumber||0)>1)return!0;let e=i.current[y]?.diffLines?.length||0,t=i.current[y]?.diffLines?.[e-1]?.blobLineNumber||0,n=i.current[y]?.newTreeEntry?.lineCount||0;return t<n||e-1<n},[i.current[y]?.diffLines,i.current[y]?.newTreeEntry?.lineCount,y,i,k]),H=(0,d.useMemo)(()=>({avatarUrl:C?.avatarURL??"",diffViewPreference:r,isSiteAdmin:!1,login:C?.login??"",lineSpacingPreference:s,tabSizePreference:C?.tabSize??8,viewerCanComment:w.canComment,viewerCanApplySuggestion:!1}),[r,C?.avatarURL,C,C?.login,C?.tabSize,s]),V=(0,d.useMemo)(()=>{if(e&&k.copilotChatReferenceData)return{referenceData:k.copilotChatReferenceData,queryVariables:{pullRequestId:e,startOid:k.oldOid,endOid:k.newOid}}},[k,e]);return(0,a.jsxs)("div",{className:"position-relative",style:{contain:"layout"},children:[(0,a.jsx)("div",{className:eH.diffHeaderWrapper,style:{"--header-sticky-offset":`${p}px`},children:(0,a.jsx)(eI.B,{areLinesExpanded:O.current,canExpandOrCollapseLines:U,defaultToRichDiff:k.defaultToRichDiff,fileLinkHref:`#diff-${k.pathDigest}`,isCollapsed:E,isBinary:k.isBinary,size:k.diffSize,canToggleRichDiff:k.canToggleRichDiff,linesAdded:k.linesAdded,linesChanged:k.linesChanged,linesDeleted:k.linesDeleted,newMode:k.newTreeEntry?.mode,newPath:k.newTreeEntry?.path,oldMode:k.oldTreeEntry?.mode,oldPath:k.oldTreeEntry?.path,patchStatus:k.status,path:k.path,onToggleExpandAllLines:M,onToggleFileCollapsed:e=>{e.altKey?f(!E):(k.collapsed=!E,i.current[y].collapsed=!E,A(!E))},onToggleDiffDisplay:e=>T(e),rightSideContent:(0,a.jsx)(eB,{oid:"REMOVED"===k.status&&k.deletedSha?k.deletedSha:x,path:k.path,repo:g,isViewable:!k.isSubmodule,copilotDiffChatProps:V})})}),E?null:(0,a.jsx)("div",{className:"border position-relative rounded-bottom-2",children:_?(0,a.jsx)(eU,{commitOid:x,path:k.path,proseDiffHtml:k.proseDifffHtml,fileRendererInfo:k.renderInfo,dependencyDiffPath:k.dependencyDiffPath}):(0,a.jsx)(m.T5,{diffContext:"commit",copilotChatReferenceData:e?k.copilotChatReferenceData:void 0,searchResults:t,focusedSearchResult:n,diffEntryData:k,baseHelpUrl:h,commentingEnabled:!0,commentBatchPending:!1,repositoryId:g.id.toString(),subject:eV,subjectId:e?.toString()??"",viewerData:H,newCommitOid:k.newOid,oldCommitOid:k.oldOid,addInjectedContextLines:$,commentingImplementation:v,markerNavigationImplementation:N,diffLinesManuallyUnhidden:R,onHandleLoadDiff:B,initialExpandedThreadId:L})})]},`${k.pathDigest}_${k.diffLines.length}`)}function eK(e,t){for(let n of e.diffLines??[]){let i=t(e.path,n.position);i?n.threadsData={totalCommentsCount:i.count,totalCount:i.count,threads:(i.threads??[]).map(e=>({id:e.id,diffSide:e.diffSide,commentsData:e.commentsData,line:n.blobLineNumber,isOutdated:!1}))}:n.threadsData=void 0}return e}try{ez.displayName||(ez.displayName="Diff")}catch{}try{eG.displayName||(eG.displayName="DiffUnmemoized")}catch{}var eW=n(32871),eq=n(84217);let eX=(0,d.memo)(eQ);function eQ({treeToggleElement:e,headerInfo:t,searchBox:n}){let i=(0,d.useRef)(null),r=function(e){let[t,n]=(0,d.useState)(!1),i=(0,d.useCallback)(e=>{let i=e[e.length-1].intersectionRatio<1;i!==t&&n(i)},[t,n]);return(0,d.useEffect)(()=>{let t=e.current,n=new IntersectionObserver(i,{root:t?.ownerDocument,threshold:[1],rootMargin:"-1px 0px 0px 0px"});return e.current&&n.observe(e.current),()=>{t&&n.unobserve(t)}},[e,i]),t}(i),s=r?"d-none d-sm-flex":"";return(0,a.jsxs)("div",{className:"d-flex flex-items-center flex-justify-between gap-2 pt-3 pt-lg-4 pb-2 position-sticky top-0 color-bg-default",style:{zIndex:2},ref:i,children:[(0,a.jsxs)("div",{className:"d-flex flex-items-center",children:[e,(0,a.jsxs)(eq.A,{as:"h2",className:"mx-2 f4",children:[t.filesChangedString," file",t.filesChanged>1?"s":""," changed"]}),(0,a.jsxs)(eI.C,{className:s,isAddition:!0,children:["+",t.additions]}),(0,a.jsxs)(eI.C,{className:s,isAddition:!1,children:["-",t.deletions]}),(0,a.jsx)("span",{className:`${s} ml-2 fgColor-muted text-small`,style:{whiteSpace:"nowrap"},children:"lines changed"})]}),(0,a.jsxs)("div",{className:"d-flex gap-2 flex-items-center",children:[r&&(0,a.jsx)(eY,{}),void 0!==n&&n,(0,a.jsx)(eW.G,{})]})]})}let eY=()=>(0,a.jsx)(H.Q,{leadingVisual:w.ArrowUpIcon,variant:"invisible",className:"fgColor-default px-2 f6 gap-1",onClick:e=>{e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})},children:"Top"});try{eX.displayName||(eX.displayName="DiffsHeader")}catch{}try{eQ.displayName||(eQ.displayName="DiffsHeaderUnmemoized")}catch{}try{eY.displayName||(eY.displayName="GoToTopButton")}catch{}let eJ=d.memo(eZ);function eZ(){return(0,a.jsx)("div",{className:"pt-3",children:(0,a.jsxs)("div",{className:"border borderColor-muted rounded-top-2",children:[(0,a.jsx)("div",{className:"gap-2 p-3 border-bottom borderColor-muted bgColor-muted rounded-top-2",children:(0,a.jsx)($.O,{height:"sm",variant:"rounded",width:"140px"})}),(0,a.jsxs)("div",{className:"d-flex flex-column gap-2 p-3",children:[(0,a.jsx)($.O,{height:"sm",variant:"rounded",width:"random"}),(0,a.jsx)($.O,{height:"sm",variant:"rounded",width:"random"}),(0,a.jsx)($.O,{height:"sm",variant:"rounded",width:"random"}),(0,a.jsx)($.O,{height:"sm",variant:"rounded",width:"random"})]})]})})}try{eJ.displayName||(eJ.displayName="LoadingContentBlock")}catch{}try{eZ.displayName||(eZ.displayName="LoadingContentBlockUnmemoized")}catch{}function e0({diffEntryData:e,contextLinePathURL:t,repo:n,oid:i,treeToggleElement:r,headerInfo:s,totalFileCount:l}){let c=(0,h.n)(),u=(0,d.useRef)(e),m=(0,ej.X)(),f=(0,o.B)();return(0,a.jsxs)("div",{"data-hpc":!0,children:[l>40&&(0,a.jsx)(eD,{}),(0,a.jsx)(eX,{treeToggleElement:r,headerInfo:s}),e.map((e,r)=>(0,a.jsx)("div",{className:0===r?"pt-0":"pt-3",children:(0,a.jsx)(ez,{onOptionCollapseToggle:eb.l,prId:void 0,diffEntryData:u,index:r,helpUrl:m.helpUrl,lineSpacing:c.lineSpacing,splitPreference:c.splitPreference,contextLinePathURL:t,recalcTotalHeightOfVirtualWindow:eb.l,repo:n,ignoreWhitespace:f.ignoreWhitespace,oid:i})},e.pathDigest))]})}try{e0.displayName||(e0.displayName="SSRDiffs")}catch{}let e1=(0,d.memo)(e2);function e2({totalFileCount:e,diffEntryData:t,contextLinePathURL:n,selectedPathDigest:i,unselectedFileExtensions:r,repo:s,oid:l,ignoreWhitespace:c,commitInfo:p,filterTerm:x,searchTerm:b,setSearchTerm:j,isTreeExpanded:C,treeToggleElement:v,headerInfo:N}){let w=(0,h.n)(),L=w.lineSpacing,k=(0,o.B)(),D=(0,d.useCallback)(()=>E({}),[]),[I,E]=(0,d.useState)({}),A=(0,d.useRef)(t),{findInDiffWorkerPath:_}=(0,K.D)(),T=(0,d.useRef)(t),R=(0,d.useRef)(e>40),O=(0,d.useRef)(null),[P,$]=(0,d.useState)(c),M=(0,d.useRef)(0),[B,U]=(0,d.useState)(l),{focusedSearchResult:H,setFocusedSearchResult:V,searchResults:z,currentIndex:G,setCurrentIndex:W}=(0,m.xB)(A.current,b,_,I);function q(e){for(let t of A.current)t.collapsed=e;D()}(0,d.useEffect)(()=>{r&&r.size>0?A.current=T.current.filter(e=>!r.has((0,ey.QC)(e.path))):A.current=T.current,x&&(A.current=A.current.filter(e=>e.path.toLowerCase().includes(x.toLowerCase()))),R.current=A.current.length>40,D()},[r?.size,x]),(0,d.useEffect)(()=>{A.current=t,T.current=t,R.current=e>40,D(),$(c),U(l)},[k.path]);let X=(0,ej.X)(),Q=(0,F.u)("commit_details_extra_diff_fetching"),Y=Q?(0,g.VWf)({owner:k.repo.ownerLogin,repo:k.repo.name,sha1:k.commit.sha1,sha2:k.commit.sha2,oid:k.commit.oid}):(0,g.gqR)({owner:k.repo.ownerLogin,repo:k.repo.name,commitish:k.commit.oid}),J=function(e,t,n,i,r,a,s){let[l,o]=(0,d.useState)(eL),c=(0,d.useRef)([]),u=(0,d.useRef)(n);return(0,d.useEffect)(()=>{if(!i||!r)return;let a=!1,l=async(e,t,n)=>{o(eL);let r=await (0,eS.lS)(`${i}${s}start_entry=${e}&bytes=${t}&lines=${n}`);if(!a)try{if(r.ok){let e=await r.json();e&&(e.loading=e.loadMore,c.current=c.current.concat(e.extraDiffEntries),e.extraDiffEntries=c.current,e.loadMore&&u.current!==e.asyncDiffLoadInfo.startIndex?(u.current=e.asyncDiffLoadInfo.startIndex,o(e),setTimeout(()=>l(e.asyncDiffLoadInfo.startIndex,e.asyncDiffLoadInfo.byteCount,e.asyncDiffLoadInfo.lineShownCount),0)):(u.current===e.asyncDiffLoadInfo.startIndex?e.error=!0:e.error=!1,e.loading=!1,o(e)))}else o(e=>({...e,loading:!1,error:!0,extraDiffEntries:c.current}))}catch{o(e=>({...e,loading:!1,error:!0,extraDiffEntries:c.current}))}};return l(n,e,t),function(){a=!0}},[e,t,r,n,i,a,s]),(0,d.useEffect)(()=>{c.current=[],u.current=n},[i,n,a]),l}(k.asyncDiffLoadInfo.byteCount,k.asyncDiffLoadInfo.lineShownCount,k.asyncDiffLoadInfo.startIndex,Y,k.moreDiffsToLoad,c,Q?"&":"?");(0,d.useEffect)(()=>{let e=A.current.concat(J.extraDiffEntries);r&&r.size>0?A.current=e.filter(e=>!r.has((0,ey.QC)(e.path))):A.current=e,x&&(A.current=A.current.filter(e=>e.path.toLowerCase().includes(x.toLowerCase()))),T.current=e,D()},[J.extraDiffEntries.length]);let Z=(0,d.useRef)(null),ee=(0,ev.h)({parentRef:Z,shouldUseScrollRef:R.current,size:C?0:A.current.length,estimateSize:(0,d.useCallback)(e=>{var t;let n;return R.current?(t=A.current[e],n=67,t?.collapsed?n:t?.newTreeEntry?.isGenerated&&!t?.diffManuallyExpanded?199:t?.isTooBig?104:(t?.diffLines&&("compact"===L?n+=20*t.diffLines.length:n+=25*t.diffLines.length),t?.newTreeEntry?.lineCount&&t.newTreeEntry.lineCount>(t?.diffLines[t?.diffLines.length-1]?.right??0)&&(n+=32),n)):0},[A.current.length,I]),useVirtualImpl:eC.Y,rangeExtractor(e){if(!R.current)return(0,eN.v)(e);let t=y.fV.hash.substring(1),n=(0,f.pd)(t),i=document.querySelector("[data-path-digest]:focus-within")?.getAttribute("data-path-digest"),r=A.current.findIndex(e=>e.pathDigest===i),a=A.current.findIndex(e=>n?.endsWith(e.pathDigest));return r<0&&a<0?(0,eN.v)(e):Array.from(new Set([...(0,eN.v)(e),...[r,a].filter(e=>e>-1)])).sort((e,t)=>e-t)}});(0,d.useEffect)(()=>{let e=i.includes("R"),t=i.includes("L"),n=t||e,r=n?t?i.split("L")[0]:i.split("R")[0]:i,a=e4(r??i,A.current);if(-1===a){if(J.error&&null!==O){let e=O.current?.childNodes[0];e?.focus(),e?.scrollIntoView({block:"center"})}return}if(R.current)ee.scrollToIndex(a,{align:"center"}),requestAnimationFrame(()=>{if(n&&e8(Z,i));else{let e=Z.current?.querySelectorAll(`[aria-label="collapse file: ${A.current[a]?.path}"]`);e&&1===e.length&&e[0].focus()}});else if(n&&e8(Z,i));else{let e=Z.current?.querySelectorAll(`[data-diff-anchor=diff-${r}]`);if(e&&1===e.length){let t=e[0].getBoundingClientRect().top+(y.cg?.scrollY??0)-67-60;y.cg?.scrollTo(0,t);let n=Z.current?.querySelectorAll(`[aria-label="collapse file: ${A.current[a]?.path}"]`);n&&1===n.length&&n[0].focus()}}},[i,J]);let et=!R.current&&0===A.current.length,en=(0,a.jsx)(m.n$,{currentPathDigestIndex:M,searchTerm:b,focusedSearchResult:H,currentIndex:G,setCurrentIndex:W,setFocusedSearchResult:V,setSearchTerm:j,searchResults:z,scrollDiffCellIntoView:e=>{let t=e4(e?.pathDigest??"",A.current);-1!==t&&(ee.scrollToIndex(t,{align:"center"}),requestAnimationFrame(()=>{(function(e,t){let n=y.XC?.getElementById(`match-${t}-${e}`);n&&n.scrollIntoView({block:"center"})})(e?.indexWithinDigest??0,e?.pathDigest??"")}))}});return(0,a.jsxs)("div",{"data-hpc":!0,ref:Z,children:[R.current&&(0,a.jsx)(eD,{}),(0,a.jsx)(eX,{treeToggleElement:v,headerInfo:N,searchBox:en}),(0,a.jsx)(u.dE,{id:ew}),!R.current&&A.current.map((e,t)=>{let i,r;return z.has(e?.pathDigest??"")&&(i=z.get(e?.pathDigest??"")??[]),H&&e?.pathDigest===H?.pathDigest&&(r=H?.indexWithinDigest??-1),(0,a.jsx)("div",{style:{paddingTop:0===t?0:16,left:3,right:3},children:(0,a.jsx)(ez,{prId:p?.branches[0]?.prs[0]?.globalRelayId,diffEntryData:A,diffMatches:i,focusedSearchResult:r,onOptionCollapseToggle:q,index:t,splitPreference:w.splitPreference,contextLinePathURL:n,recalcTotalHeightOfVirtualWindow:eb.l,repo:s,helpUrl:X.helpUrl,oid:B,ignoreWhitespace:P,lineSpacing:w.lineSpacing})},e.pathDigest)}),(0,a.jsx)("div",{role:"alert",className:"sr-only",children:et&&(0,a.jsx)("h3",{className:"d-flex flex-justify-center",children:"There are no files selected for viewing"})}),R.current&&(0,a.jsx)("div",{style:{height:ee.totalSize,width:"100%",position:"relative"},children:ee.virtualItems.map(e=>{let t,i;let r=A.current[e.index];return(z.has(r?.pathDigest??"")&&(t=z.get(r?.pathDigest??"")??[]),H&&r?.pathDigest===H?.pathDigest&&(i=H?.indexWithinDigest??-1),r)?(0,a.jsx)("div",{ref:e.measureRef,"data-key":e.key,style:{position:"absolute",paddingTop:0===e.index?0:16,left:3,right:3,transform:`translateY(${e.start}px)`},children:(0,a.jsx)(ez,{prId:p?.branches[0]?.prs[0]?.globalRelayId,diffMatches:t,focusedSearchResult:i,diffEntryData:A,index:e.index,splitPreference:w.splitPreference,contextLinePathURL:n,onOptionCollapseToggle:q,recalcTotalHeightOfVirtualWindow:D,headerStickyOffset:-e.start,helpUrl:X.helpUrl,repo:s,oid:B,ignoreWhitespace:P,lineSpacing:L,virtualizerScrollTo:ee.scrollToIndex})},r.pathDigest):null})}),k.moreDiffsToLoad&&(0,a.jsxs)(a.Fragment,{children:[J.loading&&(0,a.jsx)(eJ,{}),J.error&&(0,a.jsx)("div",{style:{justifyContent:"center",paddingTop:"16px"},ref:O,children:(0,a.jsx)(S.A,{variant:"danger",tabIndex:0,children:(0,a.jsx)("div",{className:"d-flex flex-items-center",style:{justifyContent:"center"},children:"There was a problem loading the remainder of the diff."})})})]})]})}function e4(e,t){for(let n=0;n<t.length;n++)if(e===t[n]?.pathDigest)return n;return -1}function e8(e,t){let n=e.current?.querySelectorAll(`[data-line-anchor=diff-${t}]`);return!!n&&1===n.length&&(n[0].focus(),!0)}try{e1.displayName||(e1.displayName="Diffs")}catch{}try{e2.displayName||(e2.displayName="DiffsUnmemoized")}catch{}var e6=n(70170),e7=n(14097),e3=n(13439),e9=n(42024);let e5="diff_file_tree",te=(0,d.memo)(tt);function tt({contentId:e,diffs:t,onFileSelected:n,diffsHeader:i,unselectedFileExtensions:r,onFilterTextChange:s,onFileExtensionsChange:l}){let[o,c]=(0,d.useState)(""),{getCommentCountByPath:u}=(0,eA.B)(),m=(0,d.useRef)(null),f=(0,d.useRef)(null),h=(0,d.useRef)(null),p=(0,d.useMemo)(()=>(0,ey.hr)(t),[t]),g=t;r&&r.size>0&&(g=g.filter(e=>!r.has((0,ey.QC)(e.path))));let x=(o?g.filter(e=>e.path.toLowerCase().includes(o.toLowerCase())):g).map(e=>{let t=u(e.path);return{...e,totalCommentsCount:t??0}});return(0,a.jsxs)("div",{className:"d-flex flex-column gap-2",id:e5,tabIndex:-1,children:[(0,a.jsx)(b.ak,{commands:{"pull-requests-diff-file-tree:focus-file-tree":function(){let t=document.getElementById(e),n=document.getElementById(e5),i=!1;if(t?.contains(document.activeElement)&&(i=!0),i){let e=h.current||n;f.current=t?.contains(document.activeElement)?document.activeElement:null,e?.focus()}else{let e=f.current||t;h.current=n?.contains(document.activeElement)?document.activeElement:null,e?.focus()}}}}),(0,a.jsx)("h2",{className:"sr-only",children:"File tree"}),(0,a.jsx)("div",{className:"d-md-none",ref:m,children:i}),(0,a.jsx)(tn,{filterText:o,onFilterTextChange:e=>{c(e),s(e)},fileExtensions:p,unselectedFileExtensions:r,onFileExtensionsChange:l}),(0,a.jsx)(e3.o,{diffs:x,renderPattern:"traditional",onSelect:e=>{n(e,(0,e9.nn)(window.innerWidth)<=e9.Gy.medium?"close_tree":void 0)}})]})}function tn({filterText:e,onFilterTextChange:t,fileExtensions:n,unselectedFileExtensions:i,onFileExtensionsChange:r}){let s=(0,d.useRef)((0,e6.s)(e=>t(e),250));return(0,a.jsx)(e7.kF,{filterText:e,fileExtensions:n,unselectedFileExtensions:i,onFilterTextChange:e=>s.current(e),onFilterChange:(e,t)=>{r(e,t.extension)}})}try{te.displayName||(te.displayName="FileTree")}catch{}try{tt.displayName||(tt.displayName="FileTreeUnmemoized")}catch{}try{tn.displayName||(tn.displayName="FileFilter")}catch{}var ti=n(15617);async function tr({repo:e,commitOid:t,untilCommentId:n}){let i=await (0,eS.Sr)((0,eR.RD)((0,g.clg)({owner:e.ownerLogin,repo:e.name,commitOid:t,untilCommentId:n})));if(i.ok){let e=await i.json();return(0,eR.Av)(e),e}throw Error("Failed to fetch comment data")}var ta=n(35558);async function ts(e,t){if(!t)return;let n=new FormData;n.set("file_tree_visible",e?"true":"false"),(0,eS.DI)((0,g.h6D)(t),{method:"PUT",body:n,headers:{Accept:"application/json"}})}let tl=(0,x.E7)(),to="diff-content-parent";function td(){(0,C.L)(!0);let e=(0,o.B)(),{splitPagePaneHiddenSx:t,splitPageContentHidden:n,treeToggleElement:i,collapseTree:r,isMobileTreeExpanded:c}=function(e,t){let[n]=(0,j.I)(()=>!1,!0,[]),i=(0,l.i)(),r=(0,d.useRef)(null),s=(0,d.useRef)(null),[o,c]=(0,d.useState)(t),[u,m]=(0,d.useState)(!1),f=(0,d.useCallback)(()=>{(0,e9.nn)(window.innerWidth)<=e9.Gy.medium?(m(!0),requestAnimationFrame(()=>s.current?.focus())):(c(!0),ts(!0,i),requestAnimationFrame(()=>r.current?.focus()))},[i]),h=(0,d.useCallback)(()=>{(0,e9.nn)(window.innerWidth)<=e9.Gy.medium?(m(!1),requestAnimationFrame(()=>s.current?.focus())):(c(!1),ts(!1,i),requestAnimationFrame(()=>r.current?.focus()))},[i]),p=(0,d.useMemo)(()=>(0,a.jsx)(ta.L,{expanded:o,alignment:"left",ariaLabel:o?"Collapse file tree":"Expand file tree",tooltipDirection:"se",testid:"file-tree-button",ariaControls:e,ref:r,onToggleExpanded:()=>{o?h():f()},className:"d-none d-md-flex position-relative"}),[o,e,h,f]),g=(0,d.useMemo)(()=>(0,a.jsx)(ta.L,{expanded:u,alignment:"left",ariaLabel:u?"Collapse file tree":"Expand file tree",tooltipDirection:"se",testid:"file-tree-button",ariaControls:e,ref:s,onToggleExpanded:()=>{u?h():f()},className:"d-md-none position-relative"}),[u,e,h,f]),x=(0,d.useMemo)(()=>(0,a.jsxs)(a.Fragment,{children:[g,p]}),[g,p]);return{splitPagePaneHiddenSx:n&&!t?{display:"none",contain:"content"}:{contain:"content",flexDirection:["column","column","inherit"],"@media screen and (max-width: 768px)":u?{mt:-3}:{display:"none"},"@media screen and (min-width: 769px)":o?{height:"100vh",maxHeight:"100vh !important"}:{display:"none"}},splitPageContentHidden:{narrow:u,regular:!1},isMobileTreeExpanded:u,expandTree:f,collapseTree:h,treeToggleElement:x,treeToggleRef:r}}(e5,e.fileTreeExpanded),[x,w]=(0,d.useState)(()=>new Set),[S]=(0,j.I)(()=>!1,!0,[]),[L,k]=(0,d.useState)(""),[D,I]=(0,d.useState)(""),[E,T]=(0,d.useState)(""),[R,F]=(0,d.useState)(!1),O=(0,d.useCallback)((e,t)=>{(0,f.pk)(`diff-${e.pathDigest}`),k(e.pathDigest),"close_tree"===t&&r()},[r]),P=function(e){let t=(0,s.t)(),[n,i]=(0,d.useState)({branches:[],tags:[],loading:!0});return(0,d.useEffect)(()=>{let n=!1;return(async()=>{i({branches:[],tags:[],loading:!0});let r=await (0,eS.lS)((0,g.jnS)({owner:t.ownerLogin,repo:t.name,commitish:e}));if(!n)try{if(r.ok){let e=await r.json();e.loading=!1,e&&i({...e,loading:!1})}else i({branches:[],tags:[],loading:!1})}catch{i({branches:[],tags:[],loading:!1})}})(),function(){n=!0}},[t.ownerLogin,t.name,e]),n}(e.commit.oid),$=(0,g.t0c)({owner:e.repo.ownerLogin,repo:e.repo.name,commitish:e.commit.oid}),M=(0,d.useCallback)((e,t)=>{let n=new Set(x);"selectFileExtension"===e?n.delete(t):"unselectFileExtension"===e&&n.add(t),w(n)},[x]);(0,d.useEffect)(()=>{w(new Set)},[e.commit]),(0,d.useEffect)(()=>{let e=y.cg?.location.hash;if(e?.indexOf("diff-")!==-1){let t=e?.split("diff-");t&&2===t.length&&k(t[1]??"")}},[]);let B=(0,d.useMemo)(()=>({hideWhitespace:e.ignoreWhitespace,splitPreference:e.splitViewPreference,lineSpacing:e.diffLineSpacingPreference}),[e.diffLineSpacingPreference,e.ignoreWhitespace,e.splitViewPreference]),U=e.repo,H=(0,d.useMemo)(()=>({repository:{databaseId:U.id,nwo:`${U.ownerLogin}/${U.name}`,slashCommandsEnabled:!1},type:"commit",id:{id:e.commit.oid}}),[U.id,U.name,U.ownerLogin,e.commit.oid]);(0,d.useEffect)(()=>{(y.cg?.scrollY??0)>0&&y.cg?.scrollTo(0,0)},[e.path]);let{deferredCommentData:V,state:z}=function(e,t){let[n,i]=(0,d.useState)(void 0),[r,a]=(0,d.useState)("initial");return(0,d.useEffect)(()=>{let n;i(void 0),a("loading");let r=y.cg?.location.hash;r&&/^#commitcomment-\d+$/.test(r)&&(n=r.replace("#commitcomment-","")),(async()=>{i(await tr({repo:e,commitOid:t,untilCommentId:n})),a("loaded")})()},[t,e]),{deferredCommentData:n,state:r}}(e.repo,e.commit.oid),G=V?.threadMarkers,[K,W]=(0,d.useState)(void 0);if((0,d.useEffect)(()=>{if("loaded"===z){let e=y.cg?.location.hash.slice(1);if(e&&V){if(/^commitcomment-\d+$/.test(e))V?.discussionComments.comments.find(t=>t.urlFragment===e)&&y.cg?.requestAnimationFrame(()=>{let t=document.getElementById(e??"");t&&(t.scrollIntoView({block:"center"}),t.focus())});else if(/^r\d+$/.test(e)){let t=e.replace("r","");for(let e of V.threadMarkers)if(e.threads){for(let n of e.threads)if(n.commentsData.comments){for(let e of n.commentsData.comments)if(e&&e.id&&e.id.toString()===t){W(n.id);return}}}}}}},[V,z]),e.unavailableReason)return(0,a.jsx)(eg,{commit:e.commit,commitInfo:P,unavailableReason:e.unavailableReason});let[q,X]=function(e){let t=e.findIndex(e=>void 0===e.oldOid)-1;return[-2===t?e:e.slice(0,t+1),e.map(e=>({path:e.path,changeType:e.status,pathDigest:e.pathDigest}))]}(e.diffEntryData);return(0,a.jsx)(N.RelayEnvironmentProvider,{environment:tl,children:(0,a.jsx)(u.uo,{value:H,children:(0,a.jsxs)(eA.r,{initialFiles:G,initialExpandedThreadId:K,children:[(0,a.jsx)(b.ak,{commands:{"commit-diff-view:create-permalink":()=>{let t=(0,g.$Qz)({owner:e.repo.ownerLogin,repo:e.repo.name,commitish:e.commit.oid});window.history.pushState(null,document.title,t)}}}),(0,a.jsxs)(v.O7,{children:[(0,a.jsxs)(v.O7.Header,{children:[(0,a.jsx)(A,{commitBranchState:P,oid:e.commit.oid,repo:e.repo}),(0,a.jsx)(em,{commit:e.commit,commitInfo:P,repo:e.repo})]}),(0,a.jsx)(v.O7.Pane,{position:"start",sticky:!0,sx:t,divider:{regular:"line",narrow:"none"},widthStorageKey:"diff-tree-pane-width",resizable:!0,children:(0,a.jsx)(te,{contentId:to,diffs:X,onFileSelected:O,unselectedFileExtensions:x,diffsHeader:(0,a.jsx)(eX,{treeToggleElement:i,headerInfo:e.headerInfo}),onFileExtensionsChange:M,onFilterTextChange:I})}),(0,a.jsx)(v.O7.Content,{as:"div",width:"full",hidden:n,padding:"none",sx:{p:[3,3,3,4],pt:[0,0,0,0]},children:(0,a.jsx)(h.B,{viewSettings:B,children:(0,a.jsxs)("div",{id:to,tabIndex:-1,children:[S?(0,a.jsx)(e0,{diffEntryData:q,contextLinePathURL:$,repo:e.repo,oid:e.commit.oid,treeToggleElement:i,headerInfo:e.headerInfo,totalFileCount:e.diffEntryData?.length??0}):(0,a.jsx)(m.cP,{searchTerm:E,setSearchTerm:T,children:(0,a.jsx)(e1,{totalFileCount:e.diffEntryData?.length??0,treeToggleElement:i,headerInfo:e.headerInfo,isTreeExpanded:c,commitInfo:P,searchTerm:E,setSearchTerm:T,ignoreWhitespace:e.ignoreWhitespace,diffEntryData:q,contextLinePathURL:$,filterTerm:D,unselectedFileExtensions:x,selectedPathDigest:L,repo:e.repo,oid:e.commit.oid})}),(0,a.jsx)(ti.c,{comments:V?.discussionComments?.comments,commentCount:V?.discussionComments?.count,canLoadMore:V?.discussionComments?.canLoadMore,subscribed:V?.subscribed,providerState:z,repo:e.repo,commitOid:e.commit.oid,children:(0,a.jsx)(_.$,{commit:e.commit,commentInfo:e.commentInfo})}),(0,a.jsx)(p.nq,{})]})})})]})]})})})}try{td.displayName||(td.displayName="Commit")}catch{}function tc({url:e}){return(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("p",{className:"color-fg-muted f6 mt-4",children:["Seeing something unexpected? Take a look at the",(0,a.jsxs)(U.A,{inline:!0,href:e,children:[" ","GitHub commits guide"]}),"."]})})}try{tc.displayName||(tc.displayName="CommitHelpMessage")}catch{}let tu=(0,d.createContext)({since:null,until:null,author:null,currentBlobPath:"",pagination:{hasNextPage:!1,hasPreviousPage:!1,endCursor:"",startCursor:""},newPath:null,originalBranch:null});function tm({filters:e,children:t}){return(0,a.jsx)(tu.Provider,{value:e,children:t})}function tf(){return(0,d.useContext)(tu)}try{tu.displayName||(tu.displayName="FilterContext")}catch{}try{tm.displayName||(tm.displayName="FilterProvider")}catch{}var th=n(54400),tp=n(30595),tg=n(23925),tx=n(20290);function ty(){let e=tf();return e.newPath&&e.originalBranch}function tb(){let e=(0,s.t)(),t=tf();return ty()?(0,a.jsx)(tx.s,{sx:{pt:1,pb:0},children:(0,a.jsxs)("div",{className:"d-flex flex-items-baseline",children:[(0,a.jsx)(tx.s.Heading,{as:"h3",title:`Renamed to ${t.newPath}`,"data-testid":"commit-note-title"}),(0,a.jsx)(ea.N,{to:(0,g.GpY)({owner:e.ownerLogin,repo:e.name,ref:t.originalBranch,path:t.newPath}),children:"(Browse History)"})]})}):null}function tj(){let e=(0,tg.ej)();return e?.hasRenameCommits?(0,a.jsx)(tx.s,{children:(0,a.jsxs)("div",{className:"d-flex flex-items-baseline",children:[(0,a.jsx)(tx.s.Heading,{as:"h3",title:`Renamed from ${e?.oldName}`,"data-testid":"commit-note-title"}),(0,a.jsx)(ea.N,{to:e?.historyUrl,children:"(Browse History)"})]})}):null}function tC(){let e=(0,tg.ej)();return e?.hasRenameCommits?null:(0,a.jsx)(tx.s,{clipTimeline:"bottom",children:(0,a.jsx)(tx.s.Heading,{as:"h3",title:"End of commit history for this file","data-testid":"commit-note-title"})})}function tv(){let e=tf(),t=(0,tg.xs)();return!e.currentBlobPath||e.currentBlobPath&&e.pagination.hasNextPage?null:(0,a.jsxs)(a.Fragment,{children:[t&&(0,a.jsx)(tx.s,{leadingVisual:(0,a.jsx)(tp.A,{size:"small"})}),!t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tj,{}),(0,a.jsx)(tC,{})]})]})}try{tb.displayName||(tb.displayName="RenamedToHistory")}catch{}try{tj.displayName||(tj.displayName="RenamedFromHistory")}catch{}try{tC.displayName||(tC.displayName="EndOfFileHistory")}catch{}try{tv.displayName||(tv.displayName="EndOfFile")}catch{}function tN({commitGroups:e,deferredDataUrl:t,softNavToCommit:n}){let i=tf(),r=(0,s.t)(),l=(0,W.wu)(t);return(0,a.jsxs)("div",{className:"mb-3","data-hpc":!0,children:[(0,a.jsx)(eq.A,{as:"h2",className:"sr-only",children:"Commit History"}),(0,a.jsx)(th.f,{leadingContent:(0,a.jsx)(tb,{}),commitGroups:e,trailingContent:(0,a.jsx)(tv,{}),repository:r,deferredCommitData:l,shouldClipTimeline:function(){let e=ty(),t=tf();return!e&&!t.pagination.hasPreviousPage}(),currentBlobPath:i.currentBlobPath,softNavToCommit:n})]})}try{tN.displayName||(tN.displayName="CommitList")}catch{}var tw=n(58143),tS=n(27788),tL=n(52876),tk=n(53904),tD=n(84929),tI=n(96912),tE=n(5225);async function tA(e){let t=await (0,eS.lS)(e);return t.ok?await t.json():void 0}let t_=new Map,tT=(0,tE.A)(tA,{cache:t_});function tR(e,t){let n=new URL(y.fV.origin+y.fV.pathname+y.fV.search,y.fV.origin),i=n.searchParams;for(let e of t)i.has(e)&&i.delete(e);for(let[t,n]of Object.entries(e))i.set(t,n.toString());return n.pathname+n.search}var tF=n(6907);let tO=(0,d.lazy)(()=>Promise.resolve().then(n.bind(n,97836)).then(e=>({default:e.DatePicker}))),tP=()=>(0,a.jsx)(L.A,{icon:w.CalendarIcon,className:"fgColor-muted",sx:{my:"2px"}});function t$({repo:e,refInfo:t,path:n,author:i,contributorsUrl:r,since:l,until:o,sx:c}){let u=t.name;u===t.currentOid&&(u=(0,q.F)(t.currentOid));let m=(0,tS.Z)(),f=function(e){let t=(0,s.t)(),[n,i]=(0,d.useState)({users:[],error:!1,loading:!0});return(0,d.useEffect)(()=>{let t=!1;return(async()=>{i({users:[],error:!1,loading:!0});let n=await tT(e);if(t)return;let r=[],a=!1;try{n?r=n.authors:a=!0}catch{a=!0}i({users:r,error:a,loading:!1})})(),function(){t=!0}},[t,"",e,"all"]),n}(r),h=d.useMemo(()=>{let e=(0,tD.H)(l??""),t=(0,tD.H)(o??"");return(0,tI.f)(e)&&(0,tI.f)(t)?{from:e,to:t}:null},[l,o]),p=n?.split("/");return(0,a.jsxs)(D.A,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",gap:2,...c},children:[n&&(0,a.jsx)("div",{className:"d-flex flex-items-center",children:(0,a.jsxs)("div",{className:"d-flex flex-items-baseline flex-column flex-sm-row",children:[(0,a.jsx)(eq.A,{as:"h2",className:"sr-only",children:"Breadcrumbs"}),(0,a.jsx)("span",{className:"fgColor-default no-wrap",children:"History for"}),(0,a.jsxs)(tk.A,{className:"ml-1",children:[(0,a.jsx)(tk.A.Item,{href:(0,g.GpY)({owner:e.ownerLogin,repo:e.name}),children:e.name}),p.map((n,i,r)=>{let s=(0,g.GpY)({owner:e.ownerLogin,repo:e.name,ref:t.name,path:r.slice(0,i+1).join("/")}),l=i===r.length-1;return(0,a.jsx)(tk.A.Item,{sx:{whiteSpace:"normal",...l?{fontWeight:"bold"}:{}},href:s,selected:l,children:n},s)})]}),(0,a.jsxs)("div",{className:"no-wrap",children:[(0,a.jsx)("span",{className:"mr-2 ml-0 ml-sm-2 fgColor-default",children:"on"}),(0,a.jsx)(ee.A,{href:(0,g.IO9)({repo:e,commitish:t.name,action:"tree"}),children:u})]})]})}),!n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eq.A,{as:"h2",className:"sr-only",children:"Branch selector"}),(0,a.jsx)(tw.PI,{cacheKey:t.listCacheKey,canCreate:!1,hotKey:"w",currentCommitish:t.name,getHref:t=>(0,g.GpY)({owner:e.ownerLogin,repo:e.name,ref:t}),selectedRefType:t.refType,defaultBranch:e.defaultBranch,owner:e.ownerLogin,repo:e.name,idEnding:"commits"})]}),(0,a.jsxs)("div",{className:"d-flex flex-column flex-sm-row gap-2",children:[(0,a.jsx)(eq.A,{as:"h2",className:"sr-only",children:"User selector"}),(0,a.jsx)(tL.T,{defaultText:"All users",width:"medium",usersState:f,showTypedInUser:!0,currentUser:i??void 0,onOpenChange:e=>e,onSelect:e=>{e.login!==i?.login&&m(tR({author:e.login},["author","before","after"]))},renderCustomFooter:()=>(0,a.jsx)(el.l.LinkItem,{href:tR({},["author"]),"aria-checked":null===i,children:"View commits for all users"})}),(0,a.jsxs)(d.Suspense,{fallback:(0,a.jsx)(H.Q,{leadingVisual:tP,trailingVisual:w.TriangleDownIcon,children:"All time"}),children:[(0,a.jsx)(eq.A,{as:"h2",className:"sr-only",children:"Datepicker"}),(0,a.jsx)(tO,{variant:"range",value:h,maxDate:new Date,showTodayButton:!0,showClearButton:!0,compressedHeader:!0,onChange:e=>{if(!e){m(tR({},["since","until"]));return}let t=function(e){if(e)return{startDate:(0,tF.x)(e.from,{representation:"date"}),endDate:(0,tF.x)(e.to,{representation:"date"})}}(e);if(!t)return;let{startDate:n,endDate:i}=t;m(tR({since:n,until:i},["before","after"]))},placeholder:"All time",anchor:({children:e,...t})=>(0,a.jsx)(H.Q,{...t,"data-testid":"date-picker-commits",leadingVisual:tP,trailingVisual:w.TriangleDownIcon,children:e})})]})]})]})}try{tO.displayName||(tO.displayName="DatePicker")}catch{}try{tP.displayName||(tP.displayName="StyledCalendarIcon")}catch{}try{t$.displayName||(t$.displayName="ListHeader")}catch{}var tM=n(12094);function tB({paginationInfo:e}){let t=e.hasPreviousPage,n=e.hasNextPage,i=e=>e?{"aria-disabled":!0,sx:{backgroundColor:"transparent",border:"none",cursor:"default",color:"primer.fg.disabled",fontWeight:"normal"},onClick:e=>e.preventDefault()}:{};return t||n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eq.A,{as:"h2",className:"sr-only",children:"Pagination"}),(0,a.jsx)("div",{className:"d-flex flex-justify-center mt-2",children:(0,a.jsxs)(tM.A,{children:[(0,a.jsx)(H.Q,{as:ea.N,to:tU(e,!1),className:"fgColor-accent text-normal",...i(!t),tabIndex:0,variant:"invisible","data-testid":"pagination-prev-button",leadingVisual:t?()=>(0,a.jsx)(L.A,{icon:w.ChevronLeftIcon,className:"fgColor-accent"}):null,children:"Previous"}),(0,a.jsx)(H.Q,{as:ea.N,to:tU(e,!0),className:"fgColor-accent text-normal",...i(!n),tabIndex:0,variant:"invisible","data-testid":"pagination-next-button",trailingVisual:n?()=>(0,a.jsx)(L.A,{icon:w.ChevronRightIcon,className:"fgColor-accent"}):null,children:"Next"})]})})]}):null}function tU(e,t){return tR(t?{after:e.endCursor}:{before:e.startCursor},[t?"before":"after"])}try{tB.displayName||(tB.displayName="Pagination")}catch{}var tH=n(6968);function tV({children:e,title:t}){return(0,a.jsxs)(tH.M,{rowGap:"none",children:[(0,a.jsx)(tH.M.Header,{divider:"line",sx:{mb:3},children:(0,a.jsx)("div",{className:"d-flex flex-items-center flex-justify-between",children:(0,a.jsx)(eq.A,{as:"h1",className:"f2 text-normal pb-2",id:"commits-pagehead",children:t})})}),(0,a.jsx)(tH.M.Content,{as:"div",children:(0,a.jsx)("div",{children:e})})]})}try{tV.displayName||(tV.displayName="Layout")}catch{}var tz=n(71078);function tG(){let e=(0,s.t)(),t=(0,K.D)(),n=(0,o.B)(),i=n.filters,r=n.commitGroups,l=n.metadata.softNavToCommit,c=`There isn't any commit history to show here${null!==i.since||null!==i.until?" for the selected date range":""}`;return(0,d.useEffect)(()=>{if(!y.fV.hash&&window.scrollY>0){let e=document.querySelector("#commits-pagehead");e?.scrollIntoView()}},[n.filters.pagination,n.filters.since,n.filters.until]),(0,a.jsx)(tm,{filters:n.filters,children:(0,a.jsxs)(tV,{title:"Commits",children:[(0,a.jsx)(t$,{repo:e,contributorsUrl:n.metadata.deferredContributorUrl,since:i.since,until:i.until,author:i.author,refInfo:n.refInfo,path:i.currentBlobPath,sx:{mb:3}}),0===r.length&&(0,a.jsx)(tz.M,{timeoutMessage:n.timedOutMessage,unavailableMessage:c}),r.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tN,{commitGroups:r,deferredDataUrl:n.metadata.deferredDataUrl,softNavToCommit:l}),(0,a.jsx)(tB,{paginationInfo:i.pagination})]}),n.metadata.showProfileHelp&&(0,a.jsx)(tc,{url:`${t.helpUrl}/articles/troubleshooting-commits-on-your-timeline`})]})})}try{tG.displayName||(tG.displayName="Commits")}catch{}(0,r.o)("commits",()=>({App:c,routes:[(0,i.a)({path:"/:owner/:repo/commits",Component:tG}),(0,i.a)({path:"/:owner/:repo/commits/:ref",Component:tG}),(0,i.a)({path:"/:owner/:repo/commits/:ref/:path/*",Component:tG}),(0,i.a)({path:"/:owner/:repo/commit/:oid",Component:td}),(0,i.a)({path:"/:owner/:repo/commit/:oid/:path/*",Component:td}),(0,i.a)({path:"/_view_fragments/Voltron::CommitFragmentsController/show/:owner/:repo/:name/repo_layout",Component:td})]}))},6256:(e,t,n)=>{n.d(t,{X:()=>d});var i=n(89504),r=n(83056),a=n(82897),s=n(28784),l=n(53526),o=n(96540);function d(){let e=(0,i.t)(),t=(0,l.S)(),n=(0,a.B)(),{commit:d}=n,c=`/${(0,r.QU3)(e.ownerLogin)}/${(0,r.QU3)(e.name)}/commit_comment`,u=`${c}/create`,m=(0,o.useCallback)(async(e,t,n)=>{let i=new FormData;i.append("commit_id",d.oid),i.append("comment[body]",e),t&&n&&(i.append("path",t),i.append("position",n.toString()));let r=await (0,s.DI)(u,{method:"POST",body:i});return r.ok?{error:null,comment:(await r.json()).comment}:{error:Error("Failed to add comment"),comment:null}},[d.oid,u]),f=(0,o.useCallback)(async(e,t)=>{let n=new FormData;n.append("_method","put"),n.append("commit_comment[id]",t.id.toString()),n.append("commit_comment[body]",e),n.append("commit_comment[bodyVersion]",t.bodyVersion);let i=await (0,s.DI)(c,{method:"POST",body:n});if(!i.ok)return{error:Error("Failed to edit comment"),updatedFields:null};{let e=await i.json();return{error:null,updatedFields:{body:e.source,bodyVersion:e.bodyVersion,htmlBody:e.body}}}},[c]),h=(0,o.useCallback)(async e=>{if(!await t({content:"Are you sure you want to delete this comment?",title:"Delete comment",confirmButtonContent:"Delete",confirmButtonType:"danger"}))return"canceled";let n=new FormData;return(n.append("_method","delete"),n.append("commit_comment[id]",e),(await (0,s.DI)(c,{method:"POST",body:n})).ok)?"success":"error"},[c,t]),p=(0,o.useCallback)(async(e,t)=>{let n=new FormData;return(n.append("_method","put"),n.append("classifier",t),(await (0,s.DI)(`${c}/${e}/minimize`,{method:"POST",body:n,headers:{Accept:"application/json"}})).ok)?"success":"error"},[c]),g=(0,o.useCallback)(async e=>{let t=new FormData;return(t.append("_method","put"),(await (0,s.DI)(`${c}/${e}/unminimize`,{method:"POST",body:t,headers:{Accept:"application/json"}})).ok)?"success":"error"},[c]);return(0,o.useMemo)(()=>({addComment:m,commentBoxConfig:{pasteUrlsAsPlainText:n.pasteUrlLinkAsPlainText,useMonospaceFont:n.useMonospaceFont},editComment:f,deleteComment:h,hideComment:p,unhideComment:g}),[m,n.pasteUrlLinkAsPlainText,n.useMonospaceFont,h,f,p,g])}},83808:(e,t,n)=>{n.d(t,{D:()=>r});var i=n(73627);function r(){return(0,i.X)()}},71878:(e,t,n)=>{n.d(t,{I:()=>d,p:()=>c});var i=n(83056),r=n(97156),a=n(28784),s=n(96540),l=n(65568),o=n(47373);function d({repo:e,commit:t,viewerCanReply:n}){let{addComments:r}=(0,l.B)();return(0,s.useCallback)(s=>new Promise(async(l,o)=>{let[d,u]=s.split("::");if(!d||!u){o(Error("Invalid threadId"));return}let m=await (0,a.lS)((0,i.MLt)({owner:e.ownerLogin,repo:e.name,commitOid:t.oid,path:d,position:u}));if(m.ok){let i=await m.json();r(i.comments,d,u),l(i.comments?{commentsData:{comments:i.comments.map(n=>c(n,t,e))},id:s,viewerCanReply:n}:void 0)}else o(Error("Failed to fetch thread"))}),[r,t,e,n])}function c(e,t,n){return{publishedAt:void 0,state:"",viewerRelationship:"",id:e.relayId,databaseId:e.id,body:e.body,bodyHTML:e.htmlBody,createdAt:e.createdAt,url:`${r.cg?.location.origin}${(0,i.$Qz)({owner:n.ownerLogin,repo:n.name,commitish:t.oid})}#${e.urlFragment}`,currentDiffResourcePath:`#${e.urlFragment}`,authorAssociation:e.authorAssociation?.toUpperCase(),author:{id:e.author.id,login:e.author.login,avatarUrl:e.author.avatarUrl,url:""},isHidden:e.isHidden,lastUserContentEdit:e.lastUserContentEdit,minimizedReason:e.minimizedReason,subjectType:"commit",viewerCanMinimize:e.viewerCanMinimize,viewerCanSeeMinimizeButton:e.viewerCanMinimize,viewerCanSeeUnminimizeButton:e.viewerCanMinimize,viewerCanDelete:e.viewerCanDelete,viewerCanUpdate:e.viewerCanUpdate,viewerCanReport:e.viewerCanReport,viewerCanReportToMaintainer:e.viewerCanReportToMaintainer,viewerCanBlockFromOrg:e.viewerCanBlockFromOrg,viewerCanUnblockFromOrg:e.viewerCanUnblockFromOrg,viewerDidAuthor:e.viewerDidAuthor,reference:{number:void 0,text:(0,o.F)(t.oid),author:{login:t.authors.length>0?t.authors[0]?.login??"":""}},repository:{id:n.id.toString(),isPrivate:n.private,name:n.name,owner:{id:n.ownerLogin,login:n.ownerLogin,url:""}}}}},87213:(e,t,n)=>{n.d(t,{I:()=>o,d_:()=>d,wu:()=>l});var i=n(20594),r=n(28784),a=n(96540),s=n(23925);function l(e,t){let[n,l]=(0,a.useState)(s.UI);return(0,a.useEffect)(()=>{if(!e)return;let t=!1;return(async()=>{l(s.UI);let n=await (0,r.Sr)((0,i.RD)(e));if(!t)try{if(n.ok){let e=await n.json();e.loading=!1,e&&((0,i.Av)(e),l(e))}else l(s.Xx)}catch{l(s.Xx)}})(),function(){t=!0}},[e,t]),n}function o(e){let[t,n]=(0,a.useState)(void 0);return(0,a.useEffect)(()=>{e&&(async()=>{let t=await (0,r.Sr)((0,i.RD)(e));try{if(t.ok){let e=await t.json();e&&((0,i.Av)(e),n(e.data))}}catch{}})()},[e]),t}function d(e,t,n,i){let[l,o]=(0,a.useState)(s.UI),d=(0,a.useRef)([...Array(n)]),c=(0,a.useRef)(t);return(0,a.useEffect)(()=>{if(!e)return;let n=!1;async function i(t){let a=await (0,r.Sr)(`${e}?start_entry=${t}`);if(!n)try{if(a.ok){let e=await a.json();if(e){let t=0;for(let n=c.current;n<e.nextIndex;n++)d.current[n]=e.deferredCommits[t],t++;e.deferredCommits=d.current,e.loadMore&&c.current!==e.nextIndex?(c.current=e.nextIndex,e.error=!1,o(e),setTimeout(()=>i(e.nextIndex),0)):(c.current===e.nextIndex?e.error=!0:e.error=!1,o(e))}}else o(e=>({...e,loading:!1,error:!0,extraDiffEntries:d.current}))}catch{o(e=>({...e,loading:!1,deferredCommits:d.current}))}}return i(t),function(){n=!0}},[e,i,t]),(0,a.useEffect)(()=>{d.current=[],c.current=t},[e,i,t]),l}},47373:(e,t,n)=>{n.d(t,{F:()=>i});function i(e){return e.slice(0,7)}},1719:(e,t,n)=>{n.d(t,{N:()=>i});function i(e,t){return"d28fac7f18aeacb00d8ad3460a0a5a901617c2d4"===e&&0xf122a7===t}},74408:(e,t,n)=>{n.d(t,{$S:()=>T,Su:()=>b,uo:()=>y,dE:()=>eT,c7:()=>eA,H1:()=>eS,UA:()=>eC,cT:()=>eO,i4:()=>ew,nN:()=>x,L4:()=>m});var i=n(74848),r=n(69404),a=n(97156),s=n(75177),l=n(96540);let{getItem:o,removeItem:d,setItem:c}=(0,n(74572).D)("localStorage"),u=(e,t)=>{let{diffSide:n,filePath:i,line:r,subjectId:a}=e;if(t)return`PullRequest:${a}-File:${i}`;if(void 0!==r&&void 0!==n)return`PullRequest:${a}-File:${i}-Line:${r}-DiffSide:${n}`;throw Error("Cannot build diff line comment cache key for a comment without a line number or diff side")};function m({diffSide:e,filePath:t,handlePersistedCommentExists:n,line:i,subjectId:r,threadId:a,fileLevelComment:s}){let m,f;let h=(0,l.useMemo)(()=>a||(a??u({diffSide:e,filePath:t,line:i,subjectId:r},s)),[e,t,i,r,a,s]),{hasPersistedComment:p,removePersistedCommentFromStorage:g}=(m=o(h),f=!!m?.text?.trim(),(0,l.useEffect)(()=>{f&&n?.(m)},[f]),{hasPersistedComment:f,removePersistedCommentFromStorage:()=>{d(h),f=!1,m=null}});return{hasPersistedComment:p,persistCommentToStorage:e=>{let t={text:e.text};e.startLine&&e.startSide&&(t={...t,startLine:e.startLine,startSide:e.startSide}),c(h,t)},removePersistedCommentFromStorage:g}}function f(e,t){for(let n of function e(t,n=[]){if(""===t)return n;let i=t.match(h());if(!i)return n;let r=i.groups.fence;if(!r)return n;let a=r.includes("~")?"~":"`",s=t.match(function(e,t){let n=h([e],t);return RegExp(`${n.source}(?:\r?
)(?<suggestion>.*?)(?:\r?
)^ {0,3}${e}{${t},}[ 	]*$`,"ms")}(a,r.length));if(!s)return n;let l=0,o=i.groups.indent;""!==o&&(l=o.length);let d=s.groups.suggestion;if(l>0){let e=RegExp(`^ {0,${l}}`,"m");d=d.replace(e,"")}return n.push(d),e(t.slice(s.index+s[0].length),n)}(e))if(n===t)return{isValid:!1,errorMessage:"Suggested change cannot be the same as the original line"};return{isValid:!0,errorMessage:""}}function h(e=["`","~"],t){let n=t?`{${t}}`:"{3,}",i=e.map(e=>`${e}${n}`);return RegExp(`^(?<indent> {0,3})(?<fence>${i.join("|")})suggestion[ 	]*$`,"m")}var p=n(41907);let g=(0,l.createContext)(null),x=()=>(0,l.useContext)(g),y=g.Provider;try{g.displayName||(g.displayName="ConversationMarkdownSubjectContext")}catch{}let b=(0,l.forwardRef)(({children:e,...t},n)=>{let r=x();return(0,i.jsx)(p.h,{...t,ref:n,placeholder:"Leave a comment",actions:e,subject:r??void 0,showLabel:!1})});function j({batchPending:e,batchingEnabled:t,commentBoxConfig:n,condensed:o,fileLevelComment:d,filePath:c,focusOnMount:u,isReplying:h,lineNumber:p,onAddComment:g,onCancelComment:x,onPersistedCommentExists:y,quotedText:j="",side:C,subjectId:v,threadId:N,suggestedChangesConfig:w}){let[S,L]=(0,l.useState)(j),[k,D]=(0,l.useState)(!1),[I,E]=(0,l.useState)(),A=(0,l.useRef)(null),_=(0,l.useRef)(null),{persistCommentToStorage:T,removePersistedCommentFromStorage:R}=m({diffSide:C,filePath:c,line:p,subjectId:v,threadId:N,handlePersistedCommentExists:({text:e})=>{e&&(L(e),y?.())},fileLevelComment:!!d});(0,l.useEffect)(()=>{if(u){let e=setTimeout(()=>{if(_.current&&(a.XC||a.cg)){let e=_.current,t=e.getBoundingClientRect(),n=a.XC?.documentElement.clientHeight||0;if(!(t.top>=0&&t.bottom<=(a.cg?.innerHeight||n))){let i=t.top,r=a.XC?.documentElement.getBoundingClientRect().top||0,s=e.clientHeight*(2/3);a.cg?.scrollTo({top:i-r-2/3*n+s,behavior:"smooth"})}}A.current?.focus()},100);return()=>{window.clearTimeout(e)}}},[u]);let F=({submitBatch:e})=>{D(!0),E(void 0);let t=f(S,w?.sourceContentFromDiffLines??"");if(!t.isValid){E(t.errorMessage),D(!1);return}g?.({commentText:S,onCompleted(){D(!1),$()},onError(e){D(!1);let t="Failed to save comment";e.message&&(t=`${t}: ${e.message}`),E(t)},submitBatch:e})},O=()=>F({submitBatch:!1}),P=()=>F({submitBatch:!0}),$=()=>{R(),L(""),x?.()},M={footer:{justifyContent:h?"end":"space-between","> div:first-child":{display:o||h?"none":"flex"},...o&&{"> div:last-child":{display:"flex",flexDirection:"column",width:"100%"}}}};return(0,i.jsx)(s.A,{sx:{display:"flex",flexDirection:"column",fieldset:{minWidth:0,width:["100%"]}},children:(0,i.jsxs)(b,{ref:A,label:"Add diff comment",sx:M,value:S,onChange:e=>{E(void 0),T({text:e}),L(e)},onPrimaryAction:t?O:P,userSettings:n,suggestedChangesConfig:w,markdownErrorMessage:I,children:[x&&(0,i.jsx)(r.x,{disabled:k,sx:{py:1,px:2},variant:"default",onClick:$,children:"Cancel"}),!e&&(0,i.jsx)(r.x,{disabled:k||!S.length,sx:{py:1,px:2},variant:t?"default":"primary",onClick:P,ref:_,children:h?"Reply":"Comment"}),t&&(0,i.jsx)(r.x,{disabled:k||!S.length,sx:{py:1,px:2},variant:"primary",onClick:O,children:e?"Add review comment":"Start a review"})]})})}b.displayName="ConversationCommentBox";try{j.displayName||(j.displayName="AddCommentEditor")}catch{}var C=n(71312),v=n(73272),N=n(69676),w=n(82678),S=n(30595),L=n(2391),k=n(67138),D=n(51856),I=n(91246);function E({children:e,footerButtons:t}){let{containerRef:n}=(0,w.G)({bindKeys:N.z0.ArrowHorizontal|N.z0.Tab,focusInStrategy:"closest"});return t?(0,i.jsx)(I.l.Footer,{ref:n,children:(0,i.jsxs)(s.A,{sx:{display:"flex",flexDirection:"column"},children:[(0,i.jsx)(s.A,{sx:{display:"flex",flexDirection:"row",gap:2,justifyContent:"flex-end"},children:(0,i.jsx)(I.l.Buttons,{buttons:t})}),e]})}):null}let A={CHANGE_COMMIT_MESSAGE:"CHANGE_COMMIT_MESSAGE",CHANGE_EXTENDED_DESCRIPTION:"CHANGE_EXTENDED_DESCRIPTION"};function _(e,t){switch(t.type){case A.CHANGE_COMMIT_MESSAGE:return{...e,commitMessage:t.payload};case A.CHANGE_EXTENDED_DESCRIPTION:return{...e,extendedDescription:t.payload};default:return console.error("Unknown suggested change action."),e}}function T({authorLogins:e,batchSize:t,onClose:n,onCommit:r}){let a=(0,v.A)(),{sendAnalyticsEvent:o}=(0,C.s)(),[d,c]=(0,l.useState)(!1),[u,m]=(0,l.useState)(),[f,h]=(0,l.useReducer)(_,{commitMessage:1===e.length?`Apply suggestion from @${e[0]}`:1===new Set(e).size?`Apply suggestions from @${e[0]}`:"Apply suggestions from code review",extendedDescription:""}),p=(0,l.useCallback)((e,t,n)=>{if(!a())return;let i="There was an error trying to commit changes";n?i+=`: ${n}`:i+=".",c(!1),m(i)},[a]),g=(0,l.useCallback)(()=>{a()&&(c(!1),u&&m(void 0))},[u,a]),x=(0,l.useCallback)(()=>{d||(c(!0),o("comments.commit_suggestion","COMMIT_SUGGESTION_DIALOG_BUTTON",{batchSize:t}),r(`${f.commitMessage}

${f.extendedDescription}`,p,g))},[t,f.commitMessage,f.extendedDescription,g,p,d,r,o]);return(0,i.jsxs)(I.l,{title:"Apply suggestion",renderFooter:()=>(0,i.jsx)(E,{footerButtons:[{content:"Cancel",onClick:n},{content:(0,i.jsxs)(s.A,{as:"span",sx:{display:"flex",flexDirection:"row",alignItems:"center"},children:["Commit changes",d&&(0,i.jsx)(S.A,{size:"small",sx:{ml:1}})]}),onClick:x,buttonType:"primary"}],children:u&&(0,i.jsx)(L.A.Validation,{sx:{mt:2,pt:1,justifyContent:"flex-end"},variant:"error",children:u})}),onClose:n,children:[(0,i.jsxs)(L.A,{sx:{mb:2},children:[(0,i.jsx)(L.A.Label,{children:"Commit message"}),(0,i.jsx)(k.A,{block:!0,name:"commit_message",onChange:e=>h({type:A.CHANGE_COMMIT_MESSAGE,payload:e.target.value}),value:f.commitMessage})]}),(0,i.jsxs)(L.A,{children:[(0,i.jsx)(L.A.Label,{children:"Extended description (optional)"}),(0,i.jsx)(D.Ay,{block:!0,rows:3,placeholder:"Add an optional description...",onChange:e=>h({type:A.CHANGE_EXTENDED_DESCRIPTION,payload:e.target.value}),value:f.extendedDescription})]})]})}try{E.displayName||(E.displayName="DialogFooter")}catch{}try{T.displayName||(T.displayName="ApplySuggestionDialog")}catch{}var R=n(67726),F=n(85349),O=n(16255);let P=(0,l.createContext)({});function $({children:e}){let[t,n]=(0,l.useState)(!1),r=(0,l.useMemo)(()=>({isDialogOpen:t,setIsDialogOpen:n}),[t,n]);return(0,i.jsx)(P.Provider,{value:r,children:e})}let M=()=>(0,l.useContext)(P);try{P.displayName||(P.displayName="DialogStateContext")}catch{}try{$.displayName||($.displayName="DialogStateProvider")}catch{}var B=n(38621),U=n(87330),H=n(76889),V=n(52464);function z({markerId:e,markers:t}){let n=t.findIndex(t=>t.id===e);return(0,i.jsxs)(V.A,{sx:{color:"fg.muted"},children:[(0,i.jsx)(V.A,{sx:{fontWeight:500,color:"fg.default"},children:n+1})," of"," ",(0,i.jsx)(V.A,{sx:{fontWeight:500,color:"fg.default"},children:t.length})]})}function G({markerId:e,markerNavigationImplementation:t,onNavigate:n}){let{incrementActiveMarker:r,decrementActiveMarker:a,filteredMarkers:l}=t;return l.find(t=>t.id===e)&&l.length>1?(0,i.jsxs)(s.A,{sx:{pr:1,display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,i.jsx)(U.K,{unsafeDisableTooltip:!0,"aria-label":"Load previous marker",icon:B.ChevronLeftIcon,variant:"invisible",onClick:()=>{a(e),n()}}),(0,i.jsx)(U.K,{unsafeDisableTooltip:!0,"aria-label":"Load next marker",icon:B.ChevronRightIcon,variant:"invisible",onClick:()=>{r(e),n()}}),(0,i.jsx)(s.A,{sx:{ml:1},children:(0,i.jsx)(z,{markerId:e,markers:l})})]}):null}try{z.displayName||(z.displayName="MarkerPosition")}catch{}try{G.displayName||(G.displayName="GlobalMarkerNavigation")}catch{}function K({annotation:e,markerNavigationImplementation:t,onClose:n}){return(0,i.jsxs)(s.A,{sx:{width:"clamp(240px, 100vw, 540px)"},children:[(0,i.jsx)(s.A,{sx:{borderBottom:"1px solid",borderBottomColor:"border.default",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",p:1,background:"canvas.default"},children:(0,i.jsxs)(s.A,{sx:{display:"flex",flexDirection:"row",width:"100%",alignItems:"center"},children:[(0,i.jsx)(G,{markerId:e.id,markerNavigationImplementation:t,onNavigate:n}),(0,i.jsx)(s.A,{sx:{display:"flex",flexDirection:"row",gap:1,alignItems:"center",justifyContent:"right",flexGrow:1},children:(0,i.jsx)(U.K,{unsafeDisableTooltip:!0,"aria-label":"Close annotation",icon:B.XIcon,variant:"invisible",onClick:n})})]})}),(0,i.jsx)(H.Y,{annotation:e})]})}try{K.displayName||(K.displayName="AnnotationDialog")}catch{}var W=n(82667),q=n(22868),X=n(89323),Q=n(80497),Y=n(30729),J=n(83994);function Z({anchorRef:e,annotations:t,handleOpenChange:n,threads:r,onShowAnnotation:a,onShowCommentThread:l,ghostUser:o=W.t.ghostUser}){function d(e){return{display:"-webkit-box",overflow:"hidden","-webkit-box-orient":"vertical","-webkit-line-clamp":e.toString(),maxWidth:"unset"}}return(0,i.jsx)(X.W,{anchorRef:e,open:!0,onOpenChange:n,children:(0,i.jsx)(X.W.Overlay,{width:"small",children:(0,i.jsx)("div",{children:(0,i.jsxs)(Q.l,{children:[t.map(e=>(0,i.jsxs)(Q.l.Item,{onSelect:()=>a(e.id),children:[(0,i.jsx)(Q.l.LeadingVisual,{sx:{mr:2},children:(0,i.jsx)(J.Xh,{annotationLevel:e.annotationLevel},e.id)}),(0,i.jsxs)(s.A,{sx:{...d(2)},children:[e.checkSuiteName," /"," ",(0,i.jsx)(V.A,{sx:{fontWeight:400,color:"fg.muted"},children:e.checkRun.name})]}),(0,i.jsx)(Q.l.Description,{variant:"block",children:(0,i.jsx)(s.A,{sx:{...d(1)},children:e.title})}),(0,i.jsx)(Q.l.TrailingVisual,{children:(0,i.jsx)(Y.A,{icon:B.ArrowRightIcon})})]},e.id)),r.map(e=>(0,i.jsxs)(Q.l.Item,{onSelect:()=>l(e.id),children:[(0,i.jsx)(Q.l.LeadingVisual,{sx:{mr:2},children:(0,i.jsx)(q.r,{alt:e.author.login,size:20,src:e.author.avatarUrl??o.avatarUrl})}),"Thread by ",e.author.login,(0,i.jsxs)(Q.l.Description,{variant:"block",children:[e.commentCount," comment",e.commentCount>1?"s":""]}),(0,i.jsx)(Q.l.TrailingVisual,{children:(0,i.jsx)(Y.A,{icon:B.ArrowRightIcon})})]},e.id))]})})})})}try{Z.displayName||(Z.displayName="MarkersListActionMenu")}catch{}var ee=n(54156),et=n(47139),en=n(14616),ei=n(96711);function er(e,t="r"){history.replaceState(null,"",`#${t}${e}`)}var ea=n(76919),es=n(93461),el=n(34306),eo=n(29852),ed=n(22084),ec=n(51012),eu=n(40961),em=n(55847);function ef({commentingImplementation:e,suggestedChange:t}){let{sendAnalyticsEvent:n}=(0,C.s)();return(0,i.jsx)(s.A,{sx:{display:"flex",flexDirection:"row-reverse"},children:(0,i.jsx)(em.Q,{variant:"primary",onClick:()=>{n("comments.add_suggested_change_to_batch","ADD_SUGGESTED_CHANGE_TO_BATCH_BUTTON"),e.addSuggestedChangeToPendingBatch(t)},children:"Add suggestion to batch"})})}try{ef.displayName||(ef.displayName="AddToExistingBatch")}catch{}var eh=n(12094);let ep={addSuggestionToBatch:{text:"Add suggestion to batch"},applySuggestion:{text:"Apply suggestion"}};function eg({commentingImplementation:e,onOpenDialog:t,suggestedChange:n}){let{sendAnalyticsEvent:r}=(0,C.s)(),[a,o]=(0,l.useState)(ep.addSuggestionToBatch),[d,c]=(0,l.useState)(!1),u=(0,l.useRef)(null),m=(0,l.useRef)(null),f=()=>c(!d),{addSuggestedChangeToPendingBatch:h}=e,p=(0,l.useCallback)(()=>{a===ep.addSuggestionToBatch&&(h(n),r("comments.add_suggested_change_to_batch","ADD_SUGGESTED_CHANGE_TO_BATCH_BUTTON")),a===ep.applySuggestion&&t(m)},[h,t,a,r,n]);return(0,i.jsx)(s.A,{sx:{display:"flex",flexDirection:"row-reverse"},children:(0,i.jsxs)(eh.A,{children:[(0,i.jsx)(em.Q,{variant:"primary",onClick:p,ref:m,children:a.text}),(0,i.jsx)(U.K,{unsafeDisableTooltip:!0,ref:u,"aria-haspopup":"true","aria-label":"More suggestion batching options",icon:B.TriangleDownIcon,size:"medium",variant:"primary",onClick:f}),(0,i.jsx)(X.W,{anchorRef:u,open:d,onOpenChange:f,children:(0,i.jsx)(X.W.Overlay,{width:"medium",children:(0,i.jsx)(Q.l,{selectionVariant:"single",children:Object.keys(ep).map(e=>{let t=ep[e];return(0,i.jsx)(Q.l.Item,{selected:a===t,onSelect:()=>o(t),children:t.text},e)})})})})]})})}try{eg.displayName||(eg.displayName="ApplyOrAddToBatch")}catch{}function ex({reason:e,sx:t}){return(0,i.jsx)(s.A,{sx:{m:2,...t},children:(0,i.jsx)(V.A,{as:"small",sx:{color:"fg.muted"},children:e})})}try{ex.displayName||(ex.displayName="CodeSuggestionUnavailable")}catch{}function ey({commentingImplementation:e,onOpenDialog:t,suggestedChange:n}){let r=(0,l.useRef)(null),a=(0,l.useCallback)(()=>{t(r)},[t]),o=e.pendingSuggestedChangesBatch.length,{sendAnalyticsEvent:d}=(0,C.s)();return(0,i.jsxs)(s.A,{sx:{display:"flex",justifyContent:"space-between",flexDirection:"row"},children:[(0,i.jsx)(et.A,{variant:"attention",sx:{my:"auto"},children:"Pending in batch"}),(0,i.jsxs)(s.A,{sx:{display:"flex",gap:2},children:[(0,i.jsx)(em.Q,{size:"medium",variant:"danger",onClick:()=>{e.removeSuggestedChangeFromPendingBatch(n),d("comments.remove_suggested_change_from_batch","REMOVE_SUGGESTED_CHANGE_FROM_BATCH_BUTTON")},children:"Remove from batch"}),(0,i.jsx)(em.Q,{ref:r,size:"medium",count:o,variant:"primary",onClick:a,children:`Apply suggestion${o>1?"s":""}`})]})]})}try{ey.displayName||(ey.displayName="CommitOrRemoveFromBatch")}catch{}function eb({commentingImplementation:e,suggestedChange:t}){let{setIsDialogOpen:n}=M(),[r,a]=(0,l.useState)(!1),o=(0,l.useRef)(void 0),{pendingSuggestedChangesBatch:d,submitSuggestedChanges:c}=e,u=(0,ea.c0)(t,d),m=0===d.length,{isValid:f,reason:h}=(0,ea.EJ)(t,d),p=(0,l.useMemo)(()=>u?d:[t],[u,d,t]),g=(0,l.useCallback)(e=>{a(e),n?.(e)},[n]),x=(0,l.useCallback)(()=>{if(g(!1),o.current){let e=o.current.current;setTimeout(()=>e?.focus())}},[g]),y=(0,l.useCallback)(e=>{g(!0),o.current=e},[g,o]),b=(0,l.useCallback)((e,t,n)=>{c({suggestedChanges:p,commitMessage:e,onCompleted:()=>{x(),n()},onError:t})},[x,c,p]);return(0,i.jsxs)(s.A,{sx:{p:2,borderTop:"1px solid",borderColor:"border.default"},children:[u&&(0,i.jsx)(ey,{commentingImplementation:e,suggestedChange:t,onOpenDialog:y}),!u&&!f&&h&&(0,i.jsx)(ex,{reason:h,sx:{m:0}}),!u&&m&&(0,i.jsx)(eg,{commentingImplementation:e,suggestedChange:t,onOpenDialog:y}),!u&&f&&!m&&(0,i.jsx)(ef,{commentingImplementation:e,suggestedChange:t}),r&&(0,i.jsx)(T,{authorLogins:p.map(e=>e.authorLogin),batchSize:p.length,onClose:x,onCommit:b})]})}try{eb.displayName||(eb.displayName="CodeSuggestionActions")}catch{}function ej({applySuggestedChangesValidationData:e,comment:t,commentBodyRef:n,commentingImplementation:r,filePath:a,isOutdated:s,isThreadResolved:o,subject:d,suggestedChangesConfig:c,threadId:u,viewerData:m}){let f=function(e,t,n,i,r){let[a,s]=(0,l.useState)();return(0,ec.N)(()=>{if(!e.current||"LINE"!==t.subjectType)return;let a=[...e.current.getElementsByClassName("js-apply-changes")];if(a.length>0){let e=[];for(let s of a){let a=s?.closest("div.js-suggested-changes-blob");if(!a)continue;let l=[...a.querySelectorAll(".js-blob-code-addition")];r.lineRange&&e.push({authorLogin:t.author?.login??"ghost",commentId:t.id,path:n,ref:s,suggestion:l.map(e=>e.textContent),lineRange:r.lineRange,threadId:i})}s(e)}},[r.lineRange,t.author?.login,t.bodyHTML,t.id,t.subjectType,e,n,i]),a}(n,t,a,u,e);return(0,i.jsx)(i.Fragment,{children:f?.length?f.map(n=>{let{isValid:a,reason:l}=(0,ea.o_)({suggestedChange:n,isOutdated:s,isPending:"PENDING"===t.state,isResolved:o,pullRequestIsClosed:d?.state!=="OPEN",pullRequestIsInMergeQueue:!!d?.isInMergeQueue,userCanApplySuggestion:!!m?.viewerCanApplySuggestion,applySuggestedChangesValidationData:e,suggestedChangesConfig:c});return!a&&l?(0,eu.createPortal)((0,i.jsx)(ex,{reason:l}),n.ref):(0,eu.createPortal)((0,i.jsx)(eb,{commentingImplementation:r,suggestedChange:n}),n.ref)}):null})}try{ej.displayName||(ej.displayName="SuggestedChangeView")}catch{}function eC({isAnchorable:e=!1,index:t=0,isLastChild:n,isOutdated:r,isThreadResolved:o,anchorPrefix:d="r",comment:c,commentingImplementation:u,filePath:h,hideActions:g,onRefreshThread:x,onQuoteReply:y=R.l,subjectId:j,subject:C,threadCommentCount:v,threadId:N,threadsConnectionId:w,suggestedChangesConfig:S,applySuggestedChangesValidationData:L,viewerData:k,ghostUser:D=W.t.ghostUser}){let{addToast:I}=(0,ee.Y6)(),[E,A]=(0,l.useState)(!1),[_,T]=(0,l.useState)(c.isHidden),[F,O]=(0,l.useState)(c.body),[P,$]=(0,l.useState)(!1),[M,B]=(0,l.useState)(),{persistCommentToStorage:U,removePersistedCommentFromStorage:H}=m({subjectId:j,filePath:h,fileLevelComment:"FILE"===c.subjectType,threadId:c.id,handlePersistedCommentExists:({text:e})=>{e&&O(e)}}),{editComment:V,deleteComment:z,hideComment:G,unhideComment:K,lazyFetchReactionGroups:q,lazyFetchEditHistory:X}=u,Q=(0,l.useRef)(null),Y=(0,l.useRef)(null),J=()=>{Q.current?.focus()};(0,l.useEffect)(()=>{if(E){let e=window.setTimeout(J);return()=>{window.clearTimeout(e)}}},[E]);let Z=(0,l.useCallback)(()=>{$(!0);let e=f(F,S?.sourceContentFromDiffLines??"");if(!e.isValid){B(e.errorMessage),$(!1);return}V({text:F,comment:c,onCompleted:()=>{A(!1),$(!1),H(),x?.(N)},onError:()=>{$(!1),I({type:"error",message:"Failed to update comment"})}})},[I,F,c,V,x,H,S,N]),et=c.currentDiffResourcePath?.split("#r").pop(),en=et?`${d}${et}`:void 0,ei=en&&a.fV?new URL(`${a.fV.pathname}#${en}`,a.fV.origin).toString():void 0,ea=(0,l.useRef)(null);(0,l.useEffect)(()=>{e&&et&&en&&window.location.hash.split("#").pop()===en&&(er(et,d),ea.current?.focus())},[d,en,et,e]);let ec={outline:"2px solid",outlineColor:"accent.fg",outlineOffset:"-2px",boxShadow:"none"},eu=t>0,em=t>1,ef=u.suggestedChangesEnabled,eh=E?"editing":_?"hidden":"visible";return(0,i.jsxs)(s.A,{ref:ea,id:e?en:void 0,tabIndex:-1,sx:{"&:not(:first-child)":{backgroundColor:"canvas.inset"},"&:first-child + div":{borderTop:"1px solid",borderColor:"border.muted"},":target":ec,":focus":ec,pb:eu?0:2},children:[em&&(0,i.jsx)(s.A,{sx:{display:"flex",pl:eu?1:0},children:(0,i.jsx)(s.A,{sx:{ml:4,height:8,borderLeft:"1px solid",borderColor:"border.default"}})}),(0,i.jsx)(s.A,{sx:{px:3,pt:em?0:2,pb:0},children:(0,i.jsx)(es.Rt,{headingProps:{as:"h5"},avatarUrl:c.author?.avatarUrl??D.avatarUrl,comment:{...c,url:ei??"",referenceText:c.reference.text??`#${c.reference.number}`},commentRef:ea,deleteComment:()=>{z({commentId:c.id,onCompleted:()=>{x?.(N)},onError:()=>{$(!1),I({type:"error",message:"Failed to delete comment"})},threadCommentCount:v,threadId:N,threadsConnectionId:w,filePath:h})},editComment:()=>{A(!0)},hideComment:e=>{G({commentId:c.id,reason:e,onCompleted:()=>{x?.(N)},onError:()=>{$(!1),I({type:"error",message:"Failed to hide comment"})}})},onMinimize:T,isMinimized:_,commentAuthorLogin:c.author?.login??D.login,navigate:R.l,commentSubjectAuthorLogin:c.reference?.author?.login??"",commentSubjectType:u.commentSubjectType,onReplySelect:y,unhideComment:()=>{K({commentId:c.id,onCompleted:()=>{x?.(N)},onError:()=>{$(!1),I({type:"error",message:"Failed to unhide comment"})}})},hideActions:g,lazyFetchEditHistory:X,isReply:!0,forceInlineAvatar:!0})}),(0,i.jsxs)(s.A,{sx:{display:"flex",pl:eu?1:0},children:[eu&&(0,i.jsx)(s.A,{sx:{ml:4,mr:1,pl:3,borderLeft:"1px solid",borderColor:"border.default",...n&&{borderImage:"linear-gradient(to bottom, var(--borderColor-default, var(--color-border-default)), rgba(0, 0, 0, 0)) 1 100%"}}}),"editing"===eh&&(0,i.jsx)(s.A,{sx:{pr:2,pl:eu?0:2,pb:2,pt:1,flexGrow:1},children:(0,i.jsxs)(b,{ref:Q,label:"Update comment",value:F,onChange:e=>{U({text:e}),O(e),B(void 0)},onPrimaryAction:Z,userSettings:u.commentBoxConfig,suggestedChangesConfig:S,markdownErrorMessage:M,children:[(0,i.jsx)(p.x,{variant:"default",onClick:()=>{A(!1),H(),O(c.body)},children:"Cancel"}),(0,i.jsx)(p.x,{disabled:P||!F.length,variant:"primary",onClick:Z,children:"Update"})]})}),"visible"===eh&&(0,i.jsx)(s.A,{sx:eu?{pb:2,pr:2,overflowX:"auto",width:"100%"}:{px:3,pb:2,width:"100%"},children:c.bodyHTML&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ed.oG,{ref:Y,className:"markdown-body","comment-testid":`Comment body html for comment ${c.id}`,html:c.bodyHTML,sx:{mt:1,fontSize:1}}),(0,i.jsx)(s.A,{sx:{display:"flex",flexDirection:"column",mt:3},children:q?(0,i.jsx)(l.Suspense,{fallback:(0,i.jsx)(el.e,{}),children:(0,i.jsx)(eo.ReactionViewerRelayQueryComponent,{id:c.id})}):(0,i.jsx)(eo.ReactionViewerRelay,{reactionGroups:c,subjectId:c.id})}),ef&&L&&(0,i.jsx)(ej,{comment:c,commentBodyRef:Y,commentingImplementation:u,filePath:h,isOutdated:r,isThreadResolved:o,threadId:N,suggestedChangesConfig:S,applySuggestedChangesValidationData:L,subject:C,viewerData:k})]})})]})]})}try{eC.displayName||(eC.displayName="ReviewThreadComment")}catch{}var ev=n(51888),eN=n(99893);function ew({sx:e,tabSize:t,thread:n,hideHeaderDetails:r,diffTableSx:a}){if(!n.subject?.diffLines||n.subject?.diffLines.length<1)return null;let l=(0,ev.c7)(n.subject.diffLines);return(0,i.jsxs)(s.A,{sx:{m:3,border:0,borderBottomWidth:6,borderStyle:"solid",borderColor:"border.muted",borderBottomLeftRadius:2,borderBottomRightRadius:2,...e},children:[!r&&(0,i.jsx)(s.A,{sx:{borderWidth:1,borderStyle:"solid",borderTopLeftRadius:2,borderTopRightRadius:2,borderColor:"border.muted",color:"fg.muted",px:2,py:1},children:(0,i.jsxs)(V.A,{sx:{fontSize:0,color:"fg.muted"},children:["Line"," ",(0,eN.Ah)({originalStartLine:n.subject.originalStartLine,originalEndLine:n.subject.originalEndLine,startDiffSide:n.subject.startDiffSide,endDiffSide:n.subject.endDiffSide}),", commit ",(0,i.jsx)("code",{children:n.subject.pullRequestCommit?.commit.abbreviatedOid})]})}),(0,i.jsx)(eN.l4,{lineWidth:l,lines:n.subject.diffLines,tabSize:t,sx:a})]})}try{ew.displayName||(ew.displayName="StaticUnifiedDiffPreview")}catch{}function eS({batchingEnabled:e,batchPending:t,commentAnchorPrefix:n,commentingImplementation:r,commentsConnectionId:a,filePath:o,hideDiffPreview:d,onRefreshThread:c,repositoryId:u,subject:m,subjectId:f,tabSize:h,thread:p,threadsConnectionId:g,shouldLimitHeight:x=!0,suggestedChangesConfig:y,viewerData:b,ghostUser:v}){let[N,w]=(0,l.useState)(!1),[S,L]=(0,l.useState)(void 0),{sendAnalyticsEvent:k}=(0,C.s)(),{addThreadReply:D}=r,I=e=>{L(e),w(!0)};if(null===p.commentsData.comments||p.commentsData.comments.length<1)return null;let E=(0,ea.Lm)(p),A="LINE"===p.subjectType?{lineRange:E}:void 0;return(0,i.jsx)("div",{"data-testid":"review-thread",children:(0,i.jsxs)(s.A,{sx:x?{maxHeight:"40vh",overflowY:"auto"}:{},children:[!d&&p.isOutdated&&(0,i.jsx)(ew,{tabSize:h??4,thread:p}),p.commentsData.comments.map((e,t)=>(0,i.jsx)(eC,{isAnchorable:!0,index:t,isLastChild:t===p.commentsData.comments.length-1,anchorPrefix:n,comment:e,commentConnectionId:p.commentsData.__id,commentingImplementation:r,filePath:o,isOutdated:p.isOutdated,repositoryId:u,subject:m,subjectId:f,threadId:p.id,onRefreshThread:c,onQuoteReply:I,threadCommentCount:p.commentsData.comments.length,threadsConnectionId:g,isThreadResolved:!!p.isResolved,suggestedChangesConfig:y,applySuggestedChangesValidationData:A,viewerData:b,ghostUser:v},e.id)),p.viewerCanReply&&(0,i.jsxs)(s.A,{sx:{backgroundColor:"canvas.inset",borderBottomLeftRadius:2,borderBottomRightRadius:2,p:2},children:[N&&(0,i.jsx)(j,{batchingEnabled:e,batchPending:t,commentBoxConfig:r.commentBoxConfig,condensed:!1,fileLevelComment:!0,filePath:o,focusOnMount:!0,isReplying:!0,onCancelComment:()=>{w(!1),k("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON")},repositoryId:u,quotedText:S,subjectId:f,threadId:p.id,onAddComment:({commentText:e,onCompleted:t,onError:n,submitBatch:i})=>{let r=[];p.commentsData.__id&&r.push(p.commentsData.__id),a&&r.push(a),D({commentsConnectionIds:r,filePath:o,thread:p,text:e,submitBatch:i,onCompleted:e=>{e&&er(e.toString()),t?.(),c?.(p.id)},onError:n,threadsConnectionId:g}),k("comments.add","ADD_COMMENT_BUTTON")},suggestedChangesConfig:y}),!N&&(0,i.jsx)(ei.z,{onClick:()=>{k("comments.start_thread_reply","REPLY_TO_THREAD_INPUT_BUTTON"),w(!0)},children:"Write a reply"})]})]})})}try{eS.displayName||(eS.displayName="ReviewThread")}catch{}function eL({children:e}){return(0,i.jsx)(V.A,{sx:{fontWeight:500,color:"fg.default"},children:e})}function ek({thread:e}){return void 0!==e&&e?.diffSide&&e.line?e.startLine&&e.startDiffSide?eI({thread:e}):eD({thread:e}):null}function eD({thread:e}){let t="LEFT"===e.startDiffSide?"L":"R";return(0,i.jsxs)(V.A,{sx:{color:"fg.muted",pl:2},children:["Comment on lines"," ",(0,i.jsxs)(eL,{children:[t,e.line]})]})}function eI({thread:e}){let t="LEFT"===e.startDiffSide?"L":"R",n="LEFT"===e.diffSide?"L":"R";return(0,i.jsxs)(V.A,{sx:{color:"fg.muted",pl:2},children:["Comment on lines"," ",(0,i.jsxs)(eL,{children:[t,e.startLine]})," ","to"," ",(0,i.jsxs)(eL,{children:[n,e.line]})]})}function eE({commentingImplementation:e,filePath:t,onClose:n,onRefreshThread:r,thread:a,threads:o,threadsConnectionId:d,markerNavigationImplementation:c,ghostUser:u,...m}){let{sendAnalyticsEvent:f}=(0,C.s)(),{resolveThread:h,unresolveThread:p,resolvingEnabled:g}=e,x=o.find(e=>e.id===a.id),y=a.commentsData.comments.length>0,b=!!a.isResolved,{addToast:j}=(0,ee.Y6)(),v=x?.commentsConnectionId;return y?(0,i.jsxs)(s.A,{sx:{width:"clamp(240px, 100vw, 540px)"},children:[(0,i.jsx)(s.A,{sx:{borderBottom:"1px solid",borderBottomColor:"border.default",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",p:1,background:"canvas.default"},children:(0,i.jsxs)(s.A,{sx:{display:"flex",flexDirection:"row",width:"100%",alignItems:"center"},children:[(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(G,{markerId:a.id,markerNavigationImplementation:c,onNavigate:n}),(0,i.jsx)(ek,{thread:x})]}),(0,i.jsxs)(s.A,{sx:{display:"flex",flexDirection:"row",gap:1,alignItems:"center",justifyContent:"right",flexGrow:1},children:[b&&(0,i.jsx)(et.A,{variant:"done",size:"large",children:"Resolved"}),g&&(0,i.jsx)(en.m,{text:b?"Unresolve conversation":"Resolve conversation",type:"label",direction:"w",id:"resolve-conversation",children:(0,i.jsx)(U.K,{"aria-labelledby":"resolve-conversation",unsafeDisableTooltip:!0,icon:b?B.CheckCircleFillIcon:B.CheckCircleIcon,sx:{color:b?"var(--fgColor-done, var(--color-done-fg)) !important":void 0},variant:"invisible",onClick:b?()=>{p({thread:a,onCompleted:()=>r(a.id),onError:()=>{j({type:"error",message:"Failed to unresolve thread"})}}),f("comments.unresolve_thread","RESOLVE_CONVERSATION_BUTTON")}:()=>{h({thread:a,onCompleted:()=>r(a.id),onError:()=>{j({type:"error",message:"Failed to resolve thread"})}}),f("comments.resolve_thread","RESOLVE_CONVERSATION_BUTTON")}})}),(0,i.jsx)(U.K,{unsafeDisableTooltip:!0,"aria-label":"Close thread",icon:B.XIcon,variant:"invisible",onClick:n})]})]})}),(0,i.jsx)(l.Suspense,{fallback:(0,i.jsxs)(s.A,{sx:{height:"90px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",color:"fg.muted",fontSize:0},children:[(0,i.jsx)(S.A,{}),(0,i.jsx)("p",{children:"Loading comments"})]}),children:(0,i.jsx)(eS,{commentingImplementation:e,commentsConnectionId:v,filePath:t,onRefreshThread:r,thread:a,threadsConnectionId:d,...m,ghostUser:u})})]}):null}try{eL.displayName||(eL.displayName="Emphasis")}catch{}try{ek.displayName||(ek.displayName="ThreadBanner")}catch{}try{eD.displayName||(eD.displayName="SingleLineThreadBanner")}catch{}try{eI.displayName||(eI.displayName="MultineLineThreadBanner")}catch{}try{eE.displayName||(eE.displayName="ReviewThreadDialog")}catch{}function eA(e){return(0,i.jsx)($,{children:(0,i.jsx)(e_,{...e})})}function e_({annotations:e,commentingImplementation:t,conversationAnchorRef:n,conversationListAnchorRef:r,conversationListThreads:a,isMarkerListOpen:o,fileAnchor:d,filePath:c,onAnnotationSelected:u,onCloseConversationDialog:m,onCloseConversationList:f,onThreadSelected:h,returnFocusRef:p,selectedAnnotationId:g,selectedThreadId:x,threadsConnectionId:y,markerNavigationImplementation:b,suggestedChangesConfig:j,ghostUser:C,...v}){let{isDialogOpen:N}=M(),[w,L]=(0,l.useState)(),{fetchThread:k}=t,D=(0,l.useCallback)(()=>!N&&m(),[N,m]),I=async e=>{L(void 0);let t=a.find(t=>t.id===e)?.isOutdated;L(await k(e,t))},E=(0,l.useMemo)(()=>{if(d&&w&&w.subject?.startDiffSide&&w.subject?.endDiffSide&&w.subject?.startLine&&w.subject?.endLine&&j?.configureSuggestedChangesFromLineRange){let e=w.subject?.startLine??w?.subject?.endLine,t=w.subject?.startDiffSide??w?.subject?.endDiffSide,n={diffAnchor:d,endLineNumber:w?.subject?.endLine,endOrientation:w.subject?.endDiffSide==="LEFT"?"left":"right",startLineNumber:e,firstSelectedLineNumber:e,firstSelectedOrientation:"LEFT"===t?"left":"right",startOrientation:"LEFT"===t?"left":"right"};return j?.configureSuggestedChangesFromLineRange(n)}},[d,w,j]);(0,l.useEffect)(()=>{!x&&w?L(void 0):x&&x!==w?.id&&I(x)},[k,x]);let A=x||g,_=g?e.find(e=>e.id===g):void 0;return(0,i.jsx)(i.Fragment,{children:A?(0,i.jsx)(F.T,{align:"end",anchorRef:n,focusZoneSettings:{disabled:!0},open:!0,focusTrapSettings:{disabled:!0},renderAnchor:null,overlayProps:{anchorSide:"outside-right","aria-label":`${x?"Pull Request Review Thread":"Pull Request Check Annotation"}`,id:"conversation-dialog",returnFocusRef:p,role:"dialog",sx:{width:"clamp(240px, 100vw, 540px)",borderRadius:2},onClickOutside:R.l,onKeyDown:e=>{"Escape"!==e.key&&e.stopPropagation()},portalContainerName:b.overlayPortalContainerName},onClose:D,children:w?(0,i.jsx)(eE,{commentingImplementation:t,filePath:c,thread:w,threads:a,threadsConnectionId:y,onClose:D,onThreadSelected:h,onRefreshThread:I,markerNavigationImplementation:b,suggestedChangesConfig:E,ghostUser:C,...v}):_?(0,i.jsx)(K,{annotation:_,markerNavigationImplementation:b,onClose:D}):(0,i.jsxs)(s.A,{sx:{height:"90px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",color:"fg.muted",fontSize:0},children:[(0,i.jsx)(S.A,{}),(0,i.jsx)("p",{children:"Loading comments"})]})}):o&&(0,i.jsx)(Z,{anchorRef:r,annotations:e,handleOpenChange:f,threads:a,onShowCommentThread:h,onShowAnnotation:u,ghostUser:C})})}function eT({id:e}){let t=(0,l.useRef)(null);return(0,l.useEffect)(()=>{t.current&&(0,O.c)(t.current,e)},[e]),(0,i.jsx)("span",{id:e,ref:t,style:{position:"absolute",top:0,right:0,zIndex:10}})}try{eA.displayName||(eA.displayName="Markers")}catch{}try{e_.displayName||(e_.displayName="MarkersInternal")}catch{}try{eT.displayName||(eT.displayName="MarkerPortalRoot")}catch{}var eR=n(84217);function eF({addCommentDialogTitle:e,isLeftSide:t,filePath:n,lineNumber:r,onAddComment:a,onClose:l,viewerData:o,threadsConnectionId:d,...c}){return(0,i.jsxs)(s.A,{sx:{px:2,pb:2,pt:1},children:[(0,i.jsxs)(s.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,i.jsxs)(eR.A,{as:"h4",sx:{fontSize:1,ml:2,py:2},children:[(0,i.jsx)(q.r,{alt:o.login,size:24,src:o.avatarUrl||"",sx:{mr:2}}),(0,i.jsx)("span",{children:e??"Add a comment"})]}),l&&(0,i.jsx)(U.K,{unsafeDisableTooltip:!0,variant:"invisible",icon:B.XIcon,onClick:l,"aria-label":"Cancel"})]}),(0,i.jsx)(j,{focusOnMount:!0,condensed:!1,fileLevelComment:!1,filePath:n,lineNumber:r,onAddComment:({commentText:e,onCompleted:t,onError:i,submitBatch:r})=>{a({text:e,onError:i,onCompleted:(e,n)=>{n&&er(n.toString()),t?.(e,n)},submitBatch:r,filePath:n,threadsConnectionId:d})},onCancelComment:l,side:t?"LEFT":"RIGHT",...c})]})}try{eF.displayName||(eF.displayName="StartThreadComment")}catch{}function eO({align:e="end",anchorRef:t,isOpen:n,returnFocusRef:r,onCloseCommentDialog:a,suggestedChangesConfig:s,...o}){let{sendAnalyticsEvent:d}=(0,C.s)(),c=(0,l.useMemo)(()=>{if(n&&s?.configureSuggestedChangesFromLineRange)return s.configureSuggestedChangesFromLineRange(s?.selectedDiffRowRange,s?.shouldStartNewConversationWithSuggestedChange)},[n,s]);return n?(0,i.jsx)(F.T,{align:e,anchorRef:t,focusZoneSettings:{disabled:!0},open:n,renderAnchor:null,focusTrapSettings:{disabled:!0},overlayProps:{id:"conversation-dialog",role:"dialog",width:"xlarge",preventOverflow:!1,returnFocusRef:r,sx:{borderRadius:2},"aria-label":"Add a comment",onClickOutside:R.l,onKeyDown:e=>{"Escape"!==e.key&&e.stopPropagation()}},onClose:a,children:(0,i.jsx)(eF,{onClose:()=>{a(),d("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON")},suggestedChangesConfig:c,...o})}):null}try{eO.displayName||(eO.displayName="StartConversation")}catch{}n(71918),n(35993)},76919:(e,t,n)=>{function i(e,t){return t.some(t=>r(t,e))}function r(e,t){return e.commentId===t.commentId&&e.path===t.path&&e.suggestion.length===t.suggestion.length&&a(e.suggestion,t.suggestion)}n.d(t,{EJ:()=>o,Lm:()=>d,c0:()=>i,o_:()=>l,yM:()=>r});let a=(e,t)=>e.length===t.length&&!e.some((e,n)=>e!==t[n]),s={USER_CANNOT_APPLY_SUGGESTION:"You do not have permission to apply this suggestion.",PULL_REQUEST_IS_CLOSED:"This suggestion cannot be applied because the pull request is closed.",PULL_REQUEST_IS_IN_MERGE_QUEUE:"This suggestion cannot be applied because the pull request is queued to merge.",IS_OUTDATED:"This suggestion is outdated and cannot be applied.",IS_PENDING:"This suggestion is part of a pending comment and cannot be applied.",IS_RESOLVED:"This suggestion is part of a resolved comment and cannot be applied.",UNCHANGED_CODE:"This suggestion is invalid because no changes were made to the code.",INVALID_RANGE:"Unable to commit due to other pending changes affecting this line.",BATCH_TOO_BIG:"Unable to commit due to too many changes in the batch.",DELETED_LINES:"Unable to apply suggestions on deleted lines.",RANGE_NOT_PROVIDED:"This suggestion does not have a valid line range.",UNABLE_TO_DETERMINE_VALIDITY:"Unable to determine the validity of this suggestion."};function l({suggestedChange:e,isOutdated:t,isPending:n,isResolved:i,pullRequestIsClosed:r,pullRequestIsInMergeQueue:a,userCanApplySuggestion:l,applySuggestedChangesValidationData:o,suggestedChangesConfig:d}){let{lineRange:c}=o;if(t)return{isValid:!1,reason:s.IS_OUTDATED};if(n)return{isValid:!1,reason:s.IS_PENDING};if(i)return{isValid:!1,reason:s.IS_RESOLVED};if(r)return{isValid:!1,reason:s.PULL_REQUEST_IS_CLOSED};if(a)return{isValid:!1,reason:s.PULL_REQUEST_IS_IN_MERGE_QUEUE};if(!l)return{isValid:!1,reason:s.USER_CANNOT_APPLY_SUGGESTION};if(!c)return{isValid:!1,reason:s.RANGE_NOT_PROVIDED};if(!d)return{isValid:!1,reason:s.UNABLE_TO_DETERMINE_VALIDITY};if(!d?.isValidSuggestionRange)return{isValid:!1,reason:s.DELETED_LINES};let u=d?.sourceContentFromDiffLines,m=e.suggestion.join("\n");return 0!==e.suggestion.length&&m===u?{isValid:!1,reason:s.UNCHANGED_CODE}:{isValid:!0}}function o(e,t){let n={isValid:!1,reason:s.INVALID_RANGE},i={isValid:!1,reason:s.BATCH_TOO_BIG};return t.length>=50?i:t.find(t=>t.threadId===e.threadId)||function(e,t){for(let r of t)if(e.path===r.path){var n,i;return n=e.lineRange,i=r.lineRange,n.endLineNumber>=i.startLineNumber&&n.startLineNumber<=i.endLineNumber}return!1}(e,t)?n:{isValid:!0}}function d(e){if(!e||"LINE"!==e.subjectType||!e.subject)return;let t=e.subject.startDiffSide??e.subject.endDiffSide;if(!t)return;if(e.isOutdated&&e.subject.originalStartLine&&e.subject.originalEndLine)return{endLineNumber:e.subject.originalEndLine,endOrientation:e.subject.endDiffSide||"RIGHT",startLineNumber:e.subject.originalStartLine,startOrientation:t};if(!e.subject.endLine||!e.subject.endDiffSide)return;let n=e.subject.startLine??e?.subject.endLine;return{endLineNumber:e.subject.endLine,endOrientation:e.subject.endDiffSide,startLineNumber:n,startOrientation:t||"RIGHT"}}},71918:(e,t,n)=>{n.d(t,{ab:()=>s});var i=n(67726),r=n(35993);function a(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function s(e){return{id:e.id??a(),annotationLevel:e.annotationLevel??r.U.Warning,startLine:e.startLine??1,databaseId:e.databaseId??123456,endLine:e.endLine??1,message:e.message??"message",path:e.path??"my-file-path",pathDigest:e.pathDigest??a(),title:e.title??"annotation-title",checkRun:{name:e.checkRun?.name??"check-run-name",detailsUrl:e.checkRun?.detailsUrl??"http://github.localhost/monalisa/smile/actions/runs/1/job/1"},checkSuiteName:e.checkSuiteName??"check-suite-name",appAvatarUrl:e.appAvatarUrl??"http://alambic.github.localhost/avatars/u/2",appAvatarAltText:e.appAvatarAltText??"github-app"}}i.l,i.l,i.l,i.l,i.l,i.l,i.l,i.l,i.l,i.l,i.l,i.l,i.l,i.l,i.l},35993:(e,t,n)=>{n.d(t,{U:()=>i});var i=function(e){return e.Failure="FAILURE",e.Notice="NOTICE",e.Warning="WARNING",e}({})},19255:(e,t,n)=>{n.d(t,{e:()=>i});function i(e){let t=document.querySelector('#__primerPortalRoot__ div[role="dialog"]'),n=document.querySelector(`#${e} div[role="dialog"]`);(t||n)&&document.dispatchEvent(new KeyboardEvent("keydown",{key:"Escape",code:"Escape",ctrlKey:!0}))}},89426:(e,t,n)=>{n.d(t,{C6:()=>a,G7:()=>i,hs:()=>l,mF:()=>o,wh:()=>r,xP:()=>s});let i="tree-comparison",r={explain:"explain",conversation:"conversation",suggest:"suggest",discussFileDiff:"discuss-file-diff",explainFileDiff:"explain-file-diff",reviewPr:"review-pull-request",actionsAgent:"actions-agent"},a=["exception","filtered","publicCode","contentTooLarge","rateLimit","agentUnauthorized","agentRequest","networkError","multipleAgentsAttempt"],s=["bing-search","codesearch","semanticsearch","lexicalsearch","kb-search","pathsearch","show-symbol-definition","getissue","getprcommits","getcommit","getrelease","getrepo","getdiff","get-diff-by-range","getfile","getfilechanges","getdiscussion","get-actions-job-logs","getpullrequest","getalert","planskill","get-github-data","support-search","kb-repo-search"];var l=function(e){return e.Experiments="experiements",e.Prompt="prompt",e.None="none",e}({}),o=function(e){return e.Unknown="unknown",e.Unlicensed="unlicensed",e.LicensedFull="licensed_full",e.LicensedLimited="licensed_limited",e}({})},64104:(e,t,n)=>{n.d(t,{Kf:()=>o,hQ:()=>d});let i=function(){var e=[{alias:null,args:null,kind:"ScalarField",name:"oid",storageKey:null},{alias:null,args:null,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"databaseId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null}],storageKey:null}],storageKey:null}];return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useFileDiffReference_Comparison",selections:[{alias:null,args:null,concreteType:"Commit",kind:"LinkedField",name:"oldCommit",plural:!1,selections:e,storageKey:null},{alias:null,args:null,concreteType:"Commit",kind:"LinkedField",name:"newCommit",plural:!1,selections:e,storageKey:null}],type:"PullRequestComparison",abstractKey:null}}();i.hash="fb70959c69497160ff44b9b0c7820e08";let r=function(){var e={alias:null,args:null,kind:"ScalarField",name:"path",storageKey:null},t=[e,{alias:null,args:null,kind:"ScalarField",name:"size",storageKey:null}];return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useFileDiffReference_DiffEntry",selections:[{alias:null,args:null,kind:"ScalarField",name:"pathDigest",storageKey:null},e,{alias:null,args:null,kind:"ScalarField",name:"rawUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isBinary",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isSubmodule",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isLfsPointer",storageKey:null},{alias:null,args:null,concreteType:"TreeEntry",kind:"LinkedField",name:"oldTreeEntry",plural:!1,selections:t,storageKey:null},{alias:null,args:null,concreteType:"TreeEntry",kind:"LinkedField",name:"newTreeEntry",plural:!1,selections:t,storageKey:null}],type:"PullRequestDiffEntry",abstractKey:null}}();r.hash="f853615ae640634aad832da060f944cf";var a=n(96540),s=n(18312);let l=({oldCommit:e,newCommit:t},{oldTreeEntry:n,newTreeEntry:i,...r},a)=>{if(r.isBinary||r.isSubmodule||r.isLfsPointer||!i||(n?.size??0)>1048576||(i.size??0)>1048576)return;let s=n||!a?t.oid:a;return{type:"file-diff",id:`diff-${r.pathDigest}`,url:r.rawUrl??"",baseFile:n?{type:"file",repoID:e.repository.databaseId??0,repoName:e.repository.name,repoOwner:e.repository.owner.login,path:n.path??"",commitOID:e.oid,url:`${e.repository.url}/raw/${e.oid}/${n.path}`,ref:e.oid}:null,headFile:{type:"file",repoID:t.repository.databaseId??0,repoName:t.repository.name,repoOwner:t.repository.owner.login,path:i.path??"",commitOID:s,url:`${t.repository.url}/raw/${s}/${i.path}`,ref:s},head:null,base:null}},o=(e,t,n)=>{let o=(0,s.useFragment)(i,e),d=(0,s.useFragment)(r,t);return(0,a.useMemo)(()=>l(o,d,n),[o,d,n])},d=(e,t)=>{let n=(0,s.useFragment)(i,e);return(0,a.useMemo)(()=>l(n,t),[n,t])}},54941:(e,t,n)=>{n.d(t,{B:()=>p,C:()=>g});var i=n(74848),r=n(20053),a=n(38621),s=n(34614),l=n(23976),o=n(30729),d=n(14616),c=n(63808),u=n(97394),m=n(30569);let f={"diff-file-header":"DiffFileHeader-module__diff-file-header--TjXyn",collapsed:"DiffFileHeader-module__collapsed--FPwYM","file-name":"DiffFileHeader-module__file-name--mY1O5"};function h({newPath:e,oldPath:t,status:n}){let r=(0,i.jsxs)(i.Fragment,{children:["\u200E",e]}),s=(0,i.jsxs)(i.Fragment,{children:["\u200E",t]});return"RENAMED"===n?(0,i.jsxs)("code",{children:[s," ",(0,i.jsx)(a.ArrowRightIcon,{})," ",r]}):"DELETED"===n||"REMOVED"===n?(0,i.jsx)("code",{children:s}):(0,i.jsx)("code",{children:r})}function p({additionalLeftSideContent:e,areLinesExpanded:t,canExpandOrCollapseLines:n,className:p,diffStatsProps:g,defaultToRichDiff:x,isBinary:y,isCollapsed:b,canToggleRichDiff:j,linesAdded:C,linesChanged:v,linesDeleted:N,fileLinkHref:w,fileLinkRef:S,newMode:L,newPath:k,oldMode:D,oldPath:I,onCopyPath:E,onHeaderClick:A,onToggleDiffDisplay:_,onToggleExpandAllLines:T,onToggleFileCollapsed:R,patchStatus:F,path:O,rightSideContent:P,size:$}){let M=$&&"-"===$[0];return(0,i.jsxs)("div",{className:(0,r.$)(f["diff-file-header"],b?f.collapsed:"","flex-wrap flex-sm-nowrap",p),children:[(0,i.jsx)("button",{onClick:R,className:"Button Button--iconOnly Button--invisible flex-shrink-0 flex-order-1","aria-label":b?`expand file: ${O}`:`collapse file: ${O}`,children:b?(0,i.jsx)(a.ChevronRightIcon,{}):(0,i.jsx)(a.ChevronDownIcon,{})}),e,(0,i.jsxs)("div",{className:"d-flex px-1 flex-items-center overflow-hidden flex-order-2 flex-sm-order-1",children:[(0,i.jsx)("h3",{className:(0,r.$)(f["file-name"]),children:(0,i.jsx)(s.A,{className:"Link--primary",href:w,onClick:A,ref:S,children:(0,i.jsx)(h,{newPath:k,oldPath:I,status:F})})}),(0,i.jsx)(m.T,{className:"ml-1 flex-shrink-0",textToCopy:k??I??"",ariaLabel:"Copy file name to clipboard",tooltipProps:{direction:"s",anchorSide:"outside-bottom"},onCopy:E,avoidStyledComponent:!0,hasPortalTooltip:!0}),(0,c.AL)(F,D,L)&&(0,i.jsxs)("div",{className:"p-2",children:[(0,i.jsx)("code",{children:D}),(0,i.jsx)(o.A,{icon:a.ArrowRightIcon,sx:{mx:1}}),(0,i.jsx)("code",{children:L})]}),n&&T&&(0,i.jsx)(d.m,{text:t?`collapse non diff lines: ${O}`:`expand all lines: ${O}`,direction:"s",children:(0,i.jsx)("button",{onClick:T,className:`Button Button--iconOnly Button--invisible flex-shrink-0 ${t?"":"js-expand-all-difflines-button"}`,"aria-label":t?`collapse non diff lines: ${O}`:`expand all lines: ${O}`,"data-file-path":O,children:t?(0,i.jsx)(a.FoldIcon,{}):(0,i.jsx)(a.UnfoldIcon,{})})})]}),(0,i.jsxs)("div",{className:"d-flex flex-row flex-justify-end flex-1 flex-order-1 flex-sm-order-2 flex-items-center",children:[(0,i.jsx)("div",{className:"d-flex mr-2 flex-justify-end flex-items-center flex-1",children:(0,i.jsx)(u.z,{linesAdded:C,linesDeleted:N,linesChanged:v,tooltipDirection:"sw",...g})}),y&&(0,i.jsxs)("div",{className:"d-flex flex-items-center",children:[(0,i.jsx)("code",{className:(0,r.$)("px-2",M&&"fgColor-danger",!M&&"fgColor-success"),children:`${$}`}),P]}),j&&(0,i.jsxs)(l.I,{"aria-label":"File view",size:"small",sx:{mx:2},onChange:_?e=>_(1===e):void 0,children:[(0,i.jsx)(l.I.IconButton,{"aria-label":"Display the source diff",defaultSelected:!x,icon:a.CodeIcon}),(0,i.jsx)(l.I.IconButton,{"aria-label":"Display the rich diff",defaultSelected:x,icon:a.FileIcon})]}),P]})]})}try{h.displayName||(h.displayName="FileName")}catch{}try{p.displayName||(p.displayName="DiffFileHeader")}catch{}function g({children:e,isAddition:t,className:n}){return(0,i.jsx)("div",{className:(0,r.$)("ml-1 text-small text-bold",t?"fgColor-success":"fgColor-danger",n),children:e})}try{g.displayName||(g.displayName="LinesChangedCounterLabel")}catch{}},63808:(e,t,n)=>{function i(e){return void 0!==e.linesChanged&&0!==e.linesChanged}function r(e,t,n){return"MODIFIED"===e&&t!==n}function a(e,t,n,r){return"MODIFIED"===t&&n!==r&&!i(e)}function s(e){return"COPIED"===e.status&&!i(e)}function l(e){return"RENAMED"===e.status&&!i(e)}function o(e){return!!e.oldTreeEntry&&null===e.newTreeEntry}function d(e){return!!e.truncatedReason}n.d(t,{AL:()=>r,HI:()=>d,Jc:()=>s,Sn:()=>a,dK:()=>l,lO:()=>o,l_:()=>m,s8:()=>h,xW:()=>f});let c=["maximum diff size exceeded.","maximum number of lines exceeded."],u=/^maximum file count exceeded/;function m(e){let t=e;return c.includes(e)?t="Sorry, we could not display the changes to this file because there were too many other changes to display.":u.test(e)&&(t="Sorry, we could not display the changes to this file because there were too many other files to display."),t}function f(e){return!!e.newTreeEntry?.isGenerated}function h(e){return 0===e.linesChanged}},24980:(e,t,n)=>{n.d(t,{QC:()=>g,hr:()=>x,sK:()=>p,wH:()=>o,xY:()=>h});var i=n(14097);function r(e,t,n){if(!t.has(e))throw TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function a(e,t){var n=r(e,t,"get");return n.get?n.get.call(e):n.value}function s(e,t,n){!function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function l(e,t,n){var i=r(e,t,"set");return!function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw TypeError("attempted to set read only private field");t.value=n}}(e,i,n),n}function o(e,t){return e<t?-1:e>t?1:0}function d(e,t){return o(e.name,t.name)}function c(e,t){return o(e.fileName,t.fileName)}function u(e){return e.diff}var m=new WeakMap;let FileNode=class FileNode{constructor(e){s(this,m,{writable:!0,value:void 0}),this.diff=e,this.filePath=this.diff.path,l(this,m,this.filePath.split("/")),this.fileName=a(this,m)[a(this,m).length-1],this.directoryParts=a(this,m).slice(0,a(this,m).length-1)}};var f=new WeakMap;let DirectoryNode=class DirectoryNode{getOrCreateDirectory(e){let t=a(this,f).get(e);if(!t){let n=this.path?`${this.path}/`:"";t=new DirectoryNode(e,`${n}${e}`),this.directories.push(t),a(this,f).set(e,t)}return t}sort(){for(let e of(this.directories.sort(d),this.files.sort(c),this.directories))e.sort()}getOrderedDiffs(){let e=this.files.map(u);for(let t of this.directories)e.push(...t.getOrderedDiffs());return e}constructor(e,t){s(this,f,{writable:!0,value:void 0}),this.name=e,this.path=t,this.directories=[],this.files=[],l(this,f,new Map)}};function h(e){let t=new DirectoryNode("","");for(let n of e.map(e=>new FileNode(e))){let e=t;for(let t of n.directoryParts)e=e.getOrCreateDirectory(t);e.files.push(n)}return t.sort(),t}function p(e){return h(e.filter(e=>!!e)).getOrderedDiffs()}function g(e){let t;t="string"==typeof e?e:e?.newPath||e?.oldPath;let n=t?.lastIndexOf(".");return t?!n||n<0?i.F7:`.${t.substring(n+1)}`:""}function x(e){return new Set(e.map(e=>g(e.path)))}},43579:(e,t,n)=>{n.d(t,{n$:()=>tN,cP:()=>tk,T5:()=>ty,Uz:()=>tS,Yj:()=>d.Y,N0:()=>N.N0,Dd:()=>N.Dd,xB:()=>tR});var i=n(74848),r=n(63808),a=n(99893),s=n(51888),l=n(34614),o=n(96540),d=n(50990),c=n(9393),u=n(20053),m=n(55847);let f={gridColumnTemplate:"HiddenDiffPatch-module__gridColumnTemplate--3bEGq"};function h({children:e,helpText:t,helpUrl:n,onLoadDiff:r,diffAnchor:a}){let s=n&&t;return(0,i.jsx)("div",{className:"px-3 py-4 fgColor-muted","data-diff-anchor":a,children:(0,i.jsxs)("div",{className:(0,u.$)(f.gridColumnTemplate),children:[(0,i.jsx)("svg",{"aria-hidden":!0,height:"84",style:{maxWidth:"340px"},viewBox:"0 0 340 84",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{clipPath:"url(#diff-placeholder)",d:"M0 0h340v84H0z",fillRule:"evenodd",style:{fill:"var(--bgColor-muted, var(--color-canvas-subtle))"}})})," ",(0,i.jsxs)("div",{className:"d-flex flex-justify-center flex-column flex-column text-center",children:[(0,i.jsx)(m.Q,{className:"h4 mx-auto fgColor-accent",variant:"invisible",onClick:()=>r(),children:"Load Diff"}),(0,i.jsxs)("span",{className:"fgColor-muted mt-1",children:[e,s&&(0,i.jsx)(l.A,{inline:!0,href:n,children:t})]})]})]})})}try{h.displayName||(h.displayName="HiddenDiffPatch")}catch{}let p={finalLineId:"final-hunk-header-line"};function g(e,t){return e.startBlobLineNumber-t.startBlobLineNumber}function x(e,t){if("HUNK"===e.type&&e.__id===p.finalLineId)return{currentHunk:t[t.length-1],previousHunk:t[t.length-2]};let n=t.sort(g).findIndex(t=>t.startBlobLineNumber<=e.blobLineNumber&&t.endBlobLineNumber>=e.blobLineNumber);return{currentHunk:t[n],nextHunk:t[n+1],previousHunk:t[n-1]}}function y(e){let t=[],n=0;for(let i=1;i<e.length;i++){let r=e[i],a=i===e.length-1;if(r&&!(0,c.Po)(r)){if("HUNK"===r.type){let a;let s=e[n];if(!s||(0,c.Po)(s))continue;let l=i-1;for(;(!a||(0,c.Po)(a))&&(a=e[l],-1!=--l););a&&!(0,c.Po)(a)&&t.push({startBlobLineNumber:s.blobLineNumber,endBlobLineNumber:a.blobLineNumber}),r.__id===p.finalLineId&&t.push({startBlobLineNumber:r.blobLineNumber,endBlobLineNumber:r.blobLineNumber+20}),n=i;continue}if(a){let i=e[n];i&&!(0,c.Po)(i)&&t.push({startBlobLineNumber:i.blobLineNumber,endBlobLineNumber:r.blobLineNumber})}}}return t}var b=n(51012),j=n(58748);let C={overlay:"SelectedDiffLinesOverlay-module__overlay--mWvvK",overlayOpacity:"SelectedDiffLinesOverlay-module__overlayOpacity--B9iKM"};var v=n(97156),N=n(76515);function w({tableRef:e}){let[t,n]=(0,o.useState)(null),r=(0,o.useCallback)(()=>{if(!e.current)return;let t=e.current.querySelectorAll('td[data-selected="true"]'),i=e.current.getAttribute("data-diff-anchor"),r=v.fV.hash.substring(1),a=(0,N.ZD)(r);if(0===t.length||i!==a?.diffAnchor){n(null);return}let s=(function(e){let t=e.parentNode;for(;null!==t;){if(t instanceof HTMLElement&&"static"!==getComputedStyle(t).position)return t;t=t.parentNode}return document.body})(e.current).getBoundingClientRect(),l=0,o=Number.MAX_SAFE_INTEGER,d=0,c=Number.MAX_SAFE_INTEGER;for(let e of t){let t=e.getBoundingClientRect();l=Math.max(l,t.bottom-s.top),o=Math.min(o,t.left-s.left),d=Math.max(d,t.right-s.left),c=Math.min(c,t.top-s.top)}n({left:o-1,height:l-c,top:c-1,width:d-o+2})},[e]);return((0,b.N)(()=>{v.cg?.requestAnimationFrame(()=>{r()})},[e,r]),(0,b.N)(()=>{let e=()=>{v.cg?.requestAnimationFrame(()=>{r()})};return window.addEventListener("hashchange",e),()=>{window.removeEventListener("hashchange",e)}},[r,e]),(0,j.w)(r,e),t)?(0,i.jsx)("div",{className:(0,u.$)("position-absolute","borderColor-accent-emphasis",C.overlay),style:t,children:(0,i.jsx)("div",{className:(0,u.$)("width-full","height-full","bgColor-accent-emphasis",C.overlayOpacity)})}):null}try{w.displayName||(w.displayName="SelectedDiffLinesOverlay")}catch{}let S=(0,o.createContext)(null);function L({children:e,currentHunk:t,diffEntryId:n,diffLine:r,fileAnchor:a,fileLineCount:s,filePath:l,isLeftSide:d,isRowSelected:c,isSplit:u,modifiedLineThreads:m,modifiedLineThreadsConnectionId:f,nextHunk:h,originalLineThreads:p,originalLineThreadsConnectionId:g,previousHunk:x,rowId:y,diffContext:b}){let j=(0,o.useMemo)(()=>({currentHunk:t,diffEntryId:n,diffLine:r,fileAnchor:a,fileLineCount:s,filePath:l,isLeftSide:d,isRowSelected:c,isSplit:u,modifiedLineThreads:m,modifiedLineHasThreads:m&&m.length>0,modifiedLineThreadsConnectionId:f,nextHunk:h,originalLineThreads:p,originalLineHasThreads:p&&p.length>0,originalLineThreadsConnectionId:g,previousHunk:x,rowId:y,diffContext:b}),[t,n,r,a,s,l,d,c,u,m,f,h,p,g,x,y,b]);return(0,i.jsx)(S.Provider,{value:j,children:e})}function k(){let e=(0,o.useContext)(S);if(!e)throw Error("useDiffLineContext must be used within a DiffLineContextProvider");return e}try{S.displayName||(S.displayName="DiffLineContext")}catch{}try{L.displayName||(L.displayName="DiffLineContextProvider")}catch{}function D(e,t){return e?.threads?.flatMap(e=>{let n=e?.id,i=e?.commentsData?.comments?.[0]?.author??t,r=e?.commentsData.totalCount??0,a=e?.commentsData?.__id;return n&&i?[{id:n,author:i,commentCount:r,commentsConnectionId:a,diffSide:e.diffSide,isOutdated:e.isOutdated,line:e.line,startLine:e.startLine,startDiffSide:e.startDiffSide}]:[]})??[]}var I=n(77321),E=n(82678);let GridNavigator=class GridNavigator{moveToNextItem(e,t){let n;let i=this.cellIdToGridLocation.get(this.focusedGridCell?.cellId??"");if(!i)return;let[r]=i,[,a]=i;switch(("ArrowDown"===e||"ArrowUp"===e)&&this.isHunkRow(r)&&this.savedColumnIndex&&(a=this.savedColumnIndex,this.savedColumnIndex=void 0),!0){case t&&"Home"===e:this.focusFirstGridCell();break;case t&&"End"===e:{let e=this.grid.length-1,t=this.grid[e]?.length;t&&(n=this.grid[e]?.[t-1]);break}case"ArrowUp"===e:this.isHunkRow(r-1)?(this.saveColumnIndex(a),n=this.grid[r-1]?.[0]):n=this.grid[r-1]?.[a];break;case"ArrowDown"===e:this.isHunkRow(r+1)?(this.saveColumnIndex(a),n=this.grid[r+1]?.[0]):n=this.grid[r+1]?.[a];break;case"ArrowLeft"===e:n=this.grid[r]?.[a-1];break;case"ArrowRight"===e:n=this.grid[r]?.[a+1];break;case"PageUp"===e:{this.saveColumnIndex(a);let e=this.getPreviousHunkRowIndex(r);n=this.grid[e]?.[0];break}case"PageDown"===e:{this.saveColumnIndex(a);let e=this.getNextHunkRowIndex(r),t=0;e||(e=this.grid.length-1,t=a),n=this.grid[e]?.[t];break}case"Home"===e:n=this.grid[r]?.[0];break;case"End"===e:{let e=this.grid[r];if(e&&!this.isHunkRow(r)){let t=e.length-1;n=this.grid[r]?.[t]}}}return n&&(this.focusedGridCell=n),this.focusedGridCell}reinitializeGrid(e,t){this.initializeGrid(e,t)}focusFirstGridCell(e){e&&this.cellIdToGridLocation.get(e)?this.focusGridCell(e):this.focusedGridCell=this.grid[0]?.[0]}focusGridCell(e){if(this.focusedGridCell?.cellId===e)return;let t=this.cellIdToGridLocation.get(e);if(!t)return;let[n,i]=t;this.focusedGridCell=this.grid[n]?.[i]}getNextSelectableCell(e){let t;let n=this.lastSelectedGridCell||this.focusedGridCell,i=this.cellIdToGridLocation.get(n?.cellId??"");if(!i)return;let[r,a]=i;if(("ArrowUp"!==e||!(r<=1))&&("ArrowDown"!==e||r!==this.grid.length-1)){if("ArrowUp"===e){let e=r-1;for(;!t;)t=this.getNextSelectableCellFromRow({rowIndex:e,columnIndex:a}),e--}if("ArrowDown"===e){let e=r+1;for(;!t;)t=this.getNextSelectableCellFromRow({rowIndex:e,columnIndex:a}),e++}return t&&(this.lastSelectedGridCell=t),t}}getValidSelectableRowCell(){if(this.focusedGridCell?.isHunk)return;if(!this.focusedGridCell?.isEmpty)return this.focusedGridCell;let e=this.cellIdToGridLocation.get(this.focusedGridCell.cellId)?.[0];if(e)return this.focusedGridCell.columnIndex<2?this.grid[e]?.[this.focusedGridCell.columnIndex+2]:this.grid[e]?.[this.focusedGridCell.columnIndex-2]}clearLastSelectedCell(){this.lastSelectedGridCell=void 0}getFirstCodeCell(){let e=this.grid.find(e=>e[0]&&!e[0].isHunk);return e?.find(e=>!e.isEmpty)}getLastCodeCell(){let e=this.grid.slice().reverse().find(e=>e[0]&&!e[0].isHunk);return e?.slice().reverse().find(e=>!e.isEmpty)}hasLine(e,t,n){let i=(0,c.qX)(this.fileAnchor,e,t),r=(0,c.u6)(i,0),a=this.cellIdToGridLocation.get(r);if(!a)return!1;let[s]=a;return!!n===this.isHunkRow(s)}getNextSelectableCellFromRow({rowIndex:e,columnIndex:t}){let n=this.grid[e],i=n?.[t];switch(!0){case i?.isHunk:return;case i?.orientation==="left"&&i.isEmpty:return n?.[t+2];case i?.orientation==="right"&&i.isEmpty:return n?.[t-2];default:return n?.[t]}}getNextHunkRowIndex(e){return Array.from(this.hunkRowIndexes).sort((e,t)=>e-t).find(t=>t>e)}getPreviousHunkRowIndex(e){return Array.from(this.hunkRowIndexes).sort((e,t)=>e-t).reverse().find(t=>t<e)??0}initializeGrid(e,t){this.grid=[],this.cellIdToGridLocation=new Map,this.hunkRowIndexes=new Set;for(let n=0;n<e.length;n++){let i=[],r=e[n];if(void 0!==r){if(this.isSplitDiff){let e=(t||[])[n],a=(0,c.qX)(this.fileAnchor,r,e);(0,c.Po)(r)||"HUNK"!==r.type?this.initializeSplitDiffCodeRow({leftLine:r,rightLine:e,row:i,rowIdentifier:a,rowIndex:n}):this.initializeHunkRow(i,a,n)}else{let e=(0,c.qX)(this.fileAnchor,r,r);(0,c.Po)(r)||"HUNK"!==r.type?this.initializeUnifiedDiffCodeRow({diffLine:r,row:i,rowIdentifier:e,rowIndex:n}):this.initializeHunkRow(i,e,n)}this.grid.push(i)}}}initializeContentCell({cellIndex:e,diffLine:t,orientation:n,row:i,rowIdentifier:r,rowIndex:a}){let s;let l=(0,c.u6)(r,e);(0,c.Po)(t)||"left"!==n||(s=t?.left),(0,c.Po)(t)||"right"!==n||(s=t?.right),i.push({lineNumber:s,orientation:n,isHunk:!1,isEmpty:(0,c.Po)(t),cellId:(0,c.u6)(r,e),columnIndex:e}),this.cellIdToGridLocation.set(l,[a,e])}initializeHunkRow(e,t,n){let i=(0,c.u6)(t,0);e.push({isHunk:!0,isEmpty:!1,cellId:i,columnIndex:0}),this.cellIdToGridLocation.set(i,[n,0]),this.hunkRowIndexes.add(n)}isHunkRow(e){return this.hunkRowIndexes.has(e)}initializeSplitDiffCodeRow({leftLine:e,rightLine:t,row:n,rowIdentifier:i,rowIndex:r}){this.initializeContentCell({cellIndex:0,diffLine:e,orientation:"left",row:n,rowIdentifier:i,rowIndex:r}),this.initializeContentCell({cellIndex:1,diffLine:e,orientation:"left",row:n,rowIdentifier:i,rowIndex:r}),this.initializeContentCell({cellIndex:2,diffLine:t,orientation:"right",row:n,rowIdentifier:i,rowIndex:r}),this.initializeContentCell({cellIndex:3,diffLine:t,orientation:"right",row:n,rowIdentifier:i,rowIndex:r})}initializeUnifiedDiffCodeRow({diffLine:e,row:t,rowIdentifier:n,rowIndex:i}){let r=(0,c.Po)(e)||"DELETION"!==e.type?"right":"left";this.initializeContentCell({cellIndex:0,diffLine:e,orientation:"left",row:t,rowIdentifier:n,rowIndex:i}),this.initializeContentCell({cellIndex:1,diffLine:e,orientation:"right",row:t,rowIdentifier:n,rowIndex:i}),this.initializeContentCell({cellIndex:2,diffLine:e,orientation:r,row:t,rowIdentifier:n,rowIndex:i})}saveColumnIndex(e){this.isHunkRow(e)||(this.savedColumnIndex=e)}constructor(e,t,n,i,r){this.fileAnchor=e,this.isSplitDiff=t,this.grid=[],this.cellIdToGridLocation=new Map,this.hunkRowIndexes=new Set,this.initializeGrid(n,i),this.focusFirstGridCell(r)}};function A(e){e&&setTimeout(()=>{0!==e.tabIndex&&(e.tabIndex=0)})}var _=n(69676);let T={ArrowLeft:_.z0.ArrowHorizontal,ArrowDown:_.z0.ArrowVertical,ArrowUp:_.z0.ArrowVertical,ArrowRight:_.z0.ArrowHorizontal,h:_.z0.HL,j:_.z0.JK,k:_.z0.JK,l:_.z0.HL,a:_.z0.AD,s:_.z0.WS,w:_.z0.WS,d:_.z0.AD,Tab:_.z0.Tab,Home:_.z0.HomeAndEnd,End:_.z0.HomeAndEnd,PageUp:_.z0.PageUpDown,PageDown:_.z0.PageUpDown,Backspace:_.z0.Backspace},R=_.z0.ArrowAll|_.z0.PageUpDown|_.z0.HomeAndEnd|_.z0.AD,F={ghostUser:{displayName:"Ghost",login:"ghost",avatarUrl:"https://avatars.githubusercontent.com/ghost",path:"/ghost",url:"/ghost"}};function O(e){return e in T&&(T[e]&R)>0}function P({clearSelectedDiffRowRange:e,containerRef:t,fileAnchor:n,isSplitDiff:i,leftLines:r,replaceSelectedDiffRowRangeFromGridCells:a,rightLines:s,selectedDiffRowRange:l,updateSelectedDiffRowRange:d}){var u;let m=(0,o.useRef)(void 0),f=(0,o.useMemo)(()=>new GridNavigator(n,i,r,s,m.current?.focusedGridCell?.cellId),[n,i,r,s]);(0,o.useEffect)(()=>{m.current=f},[f]),u=m.current,(0,o.useEffect)(()=>{if(u&&document.activeElement){let e=function(e,t,n){let i=[];for(let r=0;r<t.length;r++){let a=t[r],s=n?.[r]??a,l=!(0,c.Po)(a)&&a?.type==="HUNK";a&&s&&!e.hasLine(a,s,l)&&i.push(a)}return i}(u,r,s);if(0!==e.length){if(document.activeElement===document.body){let t,i,a;let s=r.indexOf(e[e.length-1]),l=r[s+1],o=e[0];l&&!(0,c.Po)(l)&&"HUNK"===l.type&&(t=(0,c.u6)((0,c.qX)(n,l,l),0),i=document.querySelector(`[data-grid-cell-id=${t}]`),a=i?.querySelector("button[data-direction=down], button[data-direction=all]")),a||(t=(0,c.u6)((0,c.qX)(n,o,o),0),i=document.querySelector(`[data-grid-cell-id=${t}]`),a=i?.querySelector("button[data-direction=up], button[data-direction=all]")),t&&i&&(a?a.focus():i.focus(),f.focusGridCell(t),A(i))}else if("BUTTON"===document.activeElement.tagName)A(document.activeElement.closest("td"));else if("TD"===document.activeElement.tagName){let e=document.activeElement.getAttribute("data-grid-cell-id"),n=f.focusedGridCell?.cellId;if(e!==n){let e=t.current?.querySelector(`[data-grid-cell-id=${n}]`);e?.focus()}}}}},[n,r,f,s,u,t]),function(e,t){let n=(0,o.useCallback)(e=>{let n=e.target.getAttribute("data-grid-cell-id");n&&t.focusGridCell(n)},[t]);(0,o.useEffect)(()=>{let t=e.current;return t?.addEventListener("focusin",n),()=>t?.removeEventListener("focusin",n)},[e,n])}(t,f);let h=(0,o.useCallback)((t,i,r)=>{let s=f.getValidSelectableRowCell();switch(!0){case(r.metaKey||r.ctrlKey)&&"KeyA"===r.code:{let e=f.getFirstCodeCell(),t=f.getLastCodeCell();if(!e||!t)return i;return a({diffAnchor:n,focusedGridCell:e,startGridCell:e,endGridCell:t}),i}case r.shiftKey&&"ArrowDown"===r.key:{let e=f.getNextSelectableCell("ArrowDown");if(!e||!s)return i;return l?.firstSelectedLineNumber?d(n,e.lineNumber,e.orientation,!0):a({diffAnchor:n,focusedGridCell:s,startGridCell:s,endGridCell:e}),i}case r.shiftKey&&"ArrowUp"===r.key:{let e=f.getNextSelectableCell("ArrowUp");if(!e||!s)return i;return l?.firstSelectedLineNumber?d(n,e.lineNumber,e.orientation,!0):a({diffAnchor:n,focusedGridCell:s,startGridCell:e,endGridCell:s}),i}default:{let t=f.moveToNextItem(r.key,r.ctrlKey),n=t&&document.querySelector(`[data-grid-cell-id=${t.cellId}]`);return e(),f.clearLastSelectedCell(),n??void 0}}},[f,l,d,n,a,e]);return(0,E.G)({containerRef:t,bindKeys:R,getNextFocusable:h,focusableElementFilter:e=>"BUTTON"!==e.tagName,focusInStrategy:"previous"},[h]),{gridNavigator:f}}var $=n(6024),M=n(74408),B=n(64665),U=n(22084),H=n(26750),V=n(83296),z=n(38621);let G=(0,o.createContext)(null);function K({children:e,...t}){let n=!!t.commentingImplementation,r=!!t.markerNavigationImplementation;if(t.commentingEnabled!==n&&t.commentingEnabled!==r)throw Error("commentingEnabled, commentingImplementation, and markerNavigationImplementation must be passed together");let a=t?.ghostUser??F.ghostUser,s=(0,o.useMemo)(()=>({ghostUser:a,...t}),[...Object.values(t),a]);return(0,i.jsx)(G.Provider,{value:s,children:e})}function W(){let e=(0,o.useContext)(G);if(!e)throw Error("useDiffContext must be used within a DiffContextProvider");return e}try{G.displayName||(G.displayName="DiffContext")}catch{}try{K.displayName||(K.displayName="DiffContextProvider")}catch{}var q=n(19255);function X(e){return null!=e}let Q="thread",Y="annotation",J=(0,o.createContext)(null);function Z({children:e,line:t}){let[n,r]=(0,o.useState)(!1),[a,s]=(0,o.useState)(),[l,d]=(0,o.useState)(),[c,u]=(0,o.useState)(),[m,f]=(0,o.useState)(),[h,p]=(0,o.useState)(),{ghostUser:g,markerNavigationImplementation:x}=W(),{originalLineThreads:y,modifiedLineThreads:b,originalLineThreadsConnectionId:j,modifiedLineThreadsConnectionId:C}=k(),[v,N]=(0,o.useState)(),{threads:w,threadConnectionId:S}=et({line:t,side:v,originalLineThreads:y,modifiedLineThreads:b,originalLineThreadsConnectionId:j,modifiedLineThreadsConnectionId:C,ghostUser:g}),L=(0,o.useMemo)(()=>!!a||!!l||!!c||!!m,[a,c,l,m]),D=(0,o.useCallback)(()=>{r(!0)},[]),I=(0,o.useCallback)(()=>{r(!1)},[]),E=(0,o.useCallback)(e=>{e?p({id:e,kind:Q}):p(void 0)},[]),A=h?.kind===Q?h.id:void 0,_=h?.kind===Y?h.id:void 0,T=(0,o.useCallback)(e=>{e?p({id:e,kind:Y}):p(void 0)},[]),R=(0,o.useCallback)((e,t,n)=>{switch((0,q.e)(x?.overlayPortalContainerName),e){case"context-menu":s(t),f(void 0),u(void 0),d(void 0);break;case"new-conversation":f({cellId:t,withSuggestedChange:n?.withSuggestedChange}),s(void 0),u(void 0),d(void 0);break;case"marker-details":u(t),s(void 0),d(void 0),f(void 0);break;case"marker-list":d(t),s(void 0),f(void 0),u(void 0)}},[x?.overlayPortalContainerName]),F=(0,o.useCallback)(e=>{switch(e){case"context-menu":s(void 0);break;case"new-conversation":f(void 0);break;case"marker-details":u(void 0);break;case"marker-list":d(void 0)}},[]),O=(0,o.useCallback)(e=>(N(e),et({line:t,side:e,modifiedLineThreads:b,modifiedLineThreadsConnectionId:C,originalLineThreads:y,originalLineThreadsConnectionId:j,ghostUser:g}).threads),[t,b,C,y,j,g]),P=(0,o.useMemo)(()=>t.annotationsData?.annotations?.filter(X)??[],[t.annotationsData?.annotations]),$=(0,o.useMemo)(()=>({annotations:P,isActionBarVisible:n,showActionBar:D,hideActionBar:I,selectThreadId:E,selectAnnotationId:T,closeDialog:F,openDialog:R,anyMenuOpen:L,selectedThreadId:A,selectedAnnotationId:_,openContextMenuCell:a,openMarkersListCell:l,openMarkerDetailsCell:c,openNewConversationCell:m,threads:w,updateVisibleThreads:O,threadConnectionId:S}),[P,n,D,I,E,T,F,R,L,A,_,a,l,c,m,w,S,O]);return(0,i.jsx)(J.Provider,{value:$,children:e})}function ee(){let e=(0,o.useContext)(J);if(!e)throw Error("useMarkersDialogContext must be used within a MarkersDialogContextProvider");return e}function et({line:e,side:t,originalLineThreads:n,modifiedLineThreads:i,originalLineThreadsConnectionId:r,modifiedLineThreadsConnectionId:a,ghostUser:s}){switch(t){case"LEFT":return{threads:n||[],threadConnectionId:r};case"RIGHT":return{threads:i||[],threadConnectionId:a};case void 0:return{threads:D(e.threadsData,s),threadConnectionId:e.threadsData?.__id};default:return{threads:[],threadConnectionId:void 0}}}try{J.displayName||(J.displayName="MarkersDialogContext")}catch{}try{Z.displayName||(Z.displayName="MarkersDialogContextProvider")}catch{}var en=n(30841),ei=n(71312);function er({cellId:e,actionBarRef:t}){let{replaceSelectedDiffRowRange:n}=(0,d.o)(),{fileAnchor:i}=k(),[r,a]=(0,o.useState)(t),{annotations:s,openDialog:l,closeDialog:c,selectedAnnotationId:u,selectAnnotationId:m,selectedThreadId:f,selectThreadId:h,openContextMenuCell:p,openNewConversationCell:g,openMarkerDetailsCell:x,openMarkersListCell:y,updateVisibleThreads:b,threads:j,threadConnectionId:C,anyMenuOpen:v}=ee(),{sendAnalyticsEvent:N}=(0,ei.s)(),w=(0,o.useMemo)(()=>g?.cellId===e,[e,g]),S=(0,o.useMemo)(()=>g?.withSuggestedChange,[g]),L=(0,o.useCallback)(t=>{l("new-conversation",e,t)},[e,l]),D=(0,o.useCallback)(()=>{L()},[L]),I=(0,o.useCallback)(()=>{a(t),L(),N("diff.start_new_conversation","PLUS_ICON")},[t,L,N]),E=(0,o.useCallback)(()=>{L({withSuggestedChange:!0}),N("diff.start_new_conversation_with_suggested_change","CELL_CONTEXT_MENU")},[L,N]),A=(0,o.useCallback)(()=>{a(t),L({withSuggestedChange:!0}),N("diff.start_new_conversation_with_suggested_change","ACTION_BAR_CONTEXT_MENU")},[t,L,N]),_=(0,o.useCallback)(()=>{c("new-conversation")},[c]),T=(0,o.useMemo)(()=>p===e,[e,p]),R=(0,o.useCallback)(()=>{l("context-menu",e)},[e,l]),F=(0,o.useCallback)(()=>{a(t),R()},[t,R]),O=(0,o.useCallback)(()=>{c("context-menu")},[c]),P=(0,o.useCallback)(()=>{T?O():R()},[O,T,R]),$=(0,o.useCallback)(()=>{a(t),P()},[t,P]),M=(0,o.useMemo)(()=>x===e?f:void 0,[e,x,f]),B=(0,o.useMemo)(()=>x===e?u:void 0,[e,x,u]),U=(0,o.useCallback)(()=>{l("marker-details",e)},[e,l]),H=(0,o.useCallback)(()=>{c("marker-details")},[c]),V=(0,en.K)((e,t={skipLineSelection:!1})=>{if(h(e),U(),t.skipLineSelection)return;let r=j.find(t=>t.id===e);if(r&&r.diffSide&&r.line){let e=r.startLine??r.line,t=r.startDiffSide??r.diffSide;n({diffAnchor:i,endLineNumber:r.line,endOrientation:"LEFT"===r.diffSide?"left":"right",startLineNumber:e,startOrientation:"LEFT"===t?"left":"right",firstSelectedLineNumber:e,firstSelectedOrientation:"LEFT"===t?"left":"right"})}}),z=(0,en.K)((e,t={skipLineSelection:!1})=>{if(m(e),U(),t.skipLineSelection)return;let r=s.find(t=>t.id===e);r&&n({diffAnchor:i,endLineNumber:r.endLine,endOrientation:"right",startLineNumber:r.startLine,startOrientation:"right",firstSelectedLineNumber:r.startLine,firstSelectedOrientation:"right"})}),G=(0,o.useCallback)(()=>{l("marker-list",e)},[e,l]),K=(0,o.useCallback)(()=>{c("marker-list")},[c]),W=(0,o.useCallback)(e=>{let t=b(e);if(!t?.length&&!s.length)return;let n=t&&t[0],i=t&&1===t.length&&n&&!s.length,r=s[0],a=1===s.length&&r&&!t?.length;i?V(n.id):a?z(r.id):G()},[s,G,z,V,b]);return{isNewConversationDialogOpen:w,startNewConversation:D,startNewConversationFromActionBar:I,closeNewConversationDialog:_,startNewConversationWithSuggestedChange:E,startNewConversationFromActionBarWithSuggestedChange:A,shouldStartNewConversationWithSuggestedChange:S,isContextMenuOpen:T,openContextMenu:R,openContextMenuFromActionBar:F,closeContextMenu:O,toggleContextMenu:P,toggleContextMenuFromActionBar:$,optimizedSelectedThreadId:M,optimizedSelectedAnnotationId:B,selectThread:V,selectAnnotation:z,openMarkerDetailsDialog:U,closeConversationDetailsDialog:H,isMarkerListDialogOpen:y===e,openMarkerListDialog:G,closeMarkerListDialog:K,openMarkerOrListDialogFromActionBar:(0,o.useCallback)(e=>{W(e),a(t)},[t,W]),openMarkerOrListDialog:(0,o.useCallback)(e=>{W(e)},[W]),annotations:s,returnFocusRef:r,threadConnectionId:C,threads:j,anyMenuOpen:v}}function ea({cellRef:e}){let{showActionBar:t,hideActionBar:n,anyMenuOpen:i}=ee(),[r,a]=(0,o.useState)(!1),s=(0,o.useCallback)(()=>{t()},[t]),l=(0,o.useCallback)(t=>{!i&&(e.current&&e.current.contains(t.relatedTarget)||n())},[i,e,n]),d=(0,o.useCallback)(()=>{t()},[t]),c=(0,o.useCallback)(()=>{!i&&(e.current===document.activeElement||e.current?.contains(document.activeElement)||n())},[i,e,n]);return{isActionBarFocused:r,handleCellBlur:l,handleCellFocus:s,handleCellMouseEnter:d,handleCellMouseLeave:c,handleActionBarBlur:(0,o.useCallback)(t=>{e.current&&!i&&(e.current.contains(t.relatedTarget)?e.current===t.relatedTarget&&a(!1):(n(),a(!1)))},[i,e,n]),handleActionBarFocusCapture:(0,o.useCallback)(e=>{i||(e.stopPropagation(),a(!0))},[i]),handleActionBarKeydownCapture:(0,o.useCallback)(e=>{!i&&O(e.key)&&e.stopPropagation()},[i])}}function es(){let{nextHunk:e,currentHunk:t,previousHunk:n}=k(),{addInjectedContextLines:i}=W(),r=!!t&&0!==t.startBlobLineNumber,a=!!t&&!!e;return{expandStartOfHunk:()=>{r&&t&&i({start:Math.max(0,t.startBlobLineNumber-20),end:t.startBlobLineNumber})},expandEndOfHunk:()=>{a&&t&&i({start:t.endBlobLineNumber+1,end:t.endBlobLineNumber+1+20})},expandEndOfPreviousHunk:()=>{n&&i({start:n.endBlobLineNumber+1,end:n.endBlobLineNumber+1+20})},canExpandEndOfHunk:a,canExpandStartOfHunk:r}}var el=n(52019),eo=n(64515),ed=n(12094),ec=n(87330),eu=n(89323),em=n(80497),ef=n(22868),eh=n(36279),ep=n(52464),eg=n(83994);let ex={commentIndicatorContainer:"CommentIndicator-module__commentIndicatorContainer--L8lU3"},ey={compact:{avatarSize:18,maxWidth:"32px"},relaxed:{avatarSize:20,maxWidth:"40px"}};function eb({shouldAnimateRef:e,lineSpacingPreference:t="relaxed"}){let{diffLine:n}=k(),{ghostUser:r}=W();(0,o.useEffect)(()=>{e?.current&&(e.current=!1)},[e]);let{avatarSize:a,maxWidth:s}=ey[t],l=(n.threadsData?.totalCommentsCount||0)+(n.annotationsData?.totalCount||0);if(0===l)return null;let d={},c=[];n.annotationsData?.annotations?.map(e=>{e?.annotationLevel&&c.push({id:e.id,level:e.annotationLevel})}),n.threadsData?.threads?.map(e=>e?.commentsData?.comments?.map(e=>{e?.author?d[e?.author.login]=e.author:r?.login&&(d[r.login]=r)}));let m=[...c.sort((e,t)=>(eg.GF[e.level]?.priority||0)<(eg.GF[t.level]?.priority||0)?-1:1).map(t=>e?.current?(0,i.jsx)(eg.S,{annotationLevel:t.level},t.id):(0,i.jsx)(eg.Xh,{annotationLevel:t.level},t.id)),...Object.keys(d).map(e=>{let t=d[e]?.login,n=d[e]?.avatarUrl??(r?.avatarUrl||" ");return(0,i.jsx)(ef.r,{alt:t,size:20,src:n},t)})].slice(0,3),f=l>9?"9+":`${l}`;return(0,i.jsxs)("div",{className:(0,u.$)("d-flex","flex-justify-between","flex-items-center",ex.commentIndicatorContainer),children:[(0,i.jsx)(eh.A,{disableExpand:!0,size:a,sx:{maxWidth:s,"--avatar-stack-three-plus-min-width":"32px"},children:m}),(0,i.jsx)(ep.A,{sx:{color:"fg.default",ml:1,fontSize:0,fontWeight:400,fontVariantNumeric:"tabular-nums",width:"2ch",textAlign:"start"},children:f})]})}try{eb.displayName||(eb.displayName="CommentIndicator")}catch{}var ej=n(30595),eC=n(78017),ev=n(23246),eN=n(39037),ew=n(30746);let eS=({selectedRange:e,showDivider:t,...n})=>(0,i.jsx)(ew.B,{errorFallback:(0,i.jsx)(eL,{}),suspenseFallback:(0,i.jsx)(ek,{}),componentProps:{selectedRange:e,showDivider:t},Component:eD,...n}),eL=()=>(0,i.jsxs)(em.l.Item,{disabled:!0,children:[(0,i.jsx)(em.l.LeadingVisual,{children:(0,i.jsx)(z.AlertIcon,{})}),"Copilot failed to load"]}),ek=()=>(0,i.jsxs)(em.l.Item,{disabled:!0,children:[(0,i.jsx)(em.l.LeadingVisual,{children:(0,i.jsx)(ej.A,{size:"small"})}),"Copilot is loading..."]}),eD=({fileDiffReference:e,selectedRange:t,showDivider:n})=>{let r=(0,o.useMemo)(()=>{let n={...e};return t&&(n.selectedRange={start:`${t?.startOrientation[0]?.toUpperCase()??""}${t?.startLineNumber}`,end:`${t?.endOrientation[0]?.toUpperCase()??""}${t?.endLineNumber}`}),n},[e,t]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eu.W,{children:[(0,i.jsx)(eu.W.Anchor,{children:(0,i.jsxs)(em.l.Item,{children:[(0,i.jsx)(em.l.LeadingVisual,{children:(0,i.jsx)(z.CopilotIcon,{})}),"Copilot"]})}),(0,i.jsx)(eu.W.Overlay,{children:(0,i.jsxs)(em.l,{children:[(0,i.jsx)(ev.t,{fileDiffReference:r,eventContext:{prx:!0}}),(0,i.jsx)(eN.e,{fileDiffReference:r,eventContext:{prx:!0}}),(0,i.jsx)(eC.i,{fileDiffReference:r,eventContext:{prx:!0}})]})})]}),n&&(0,i.jsx)(em.l.Divider,{})]})};try{eS.displayName||(eS.displayName="CopilotDiffChatContextMenu")}catch{}try{eL.displayName||(eL.displayName="MenuItemError")}catch{}try{ek.displayName||(ek.displayName="MenuItemLoading")}catch{}try{eD.displayName||(eD.displayName="BaseCopilotDiffChatContextMenu")}catch{}var eI=n(30871);let eE={left:"L",right:"R"},eA="Start conversation",e_="Suggest change";function eT(e,t,n){let i=n&&!(0,c.Ji)(t)?eE.left:eE.right;return`${e} on line ${i}${t.blobLineNumber}`}function eR({handleStartConversationWithSuggestedChange:e,handleStartConversation:t}){let n,r,a;let{selectedDiffRowRange:s,selectedDiffLines:l,replaceSelectedDiffRowRange:u}=(0,d.o)(),{commentingEnabled:m}=W(),{diffLine:f,isLeftSide:h,isSplit:p,diffContext:g}=k(),x=(0,o.useMemo)(()=>l.leftLines[0],[l.leftLines]),y=(0,o.useMemo)(()=>l.leftLines[l.leftLines.length-1],[l.leftLines]),b=(0,o.useMemo)(()=>l.leftLines.every(e=>!(0,c.Po)(e)&&"DELETION"!==e.type),[l.leftLines]),j=(0,o.useMemo)(()=>l.rightLines[0],[l.rightLines]),C=(0,o.useMemo)(()=>l.rightLines[l.rightLines.length-1],[l.rightLines]),v=(0,o.useMemo)(()=>0===l.rightLines.length,[l.rightLines]),N=(0,o.useMemo)(()=>0===l.leftLines.length,[l.leftLines]),w=(0,o.useMemo)(()=>!(l.leftLines.find(e=>!(0,c.Po)(e)&&!(0,c.Ji)(e)&&"INJECTED_CONTEXT"!==e.type)||l.rightLines.find(e=>!(0,c.Po)(e)&&!(0,c.Ji)(e)&&"INJECTED_CONTEXT"!==e.type)),[l.leftLines,l.rightLines]),S=(0,o.useCallback)((n,i)=>{!(!s||!y||!x||(0,c.Po)(y)||(0,c.Po)(x))&&x.left&&y.left&&(u({diffAnchor:s.diffAnchor,endLineNumber:y.left,endOrientation:"left",startLineNumber:x.left,startOrientation:"left",firstSelectedLineNumber:x.left,firstSelectedOrientation:"left"}),i?.withSuggestedChange?e():t())},[s,y,x,u,e,t]),L=(0,o.useCallback)((n,i)=>{!(!s||!C||!j||(0,c.Po)(C)||(0,c.Po)(j))&&j.right&&C.right&&(u({diffAnchor:s.diffAnchor,endLineNumber:C.right,endOrientation:"right",startLineNumber:j.right,startOrientation:"right",firstSelectedLineNumber:j.right,firstSelectedOrientation:"right"}),i?.withSuggestedChange?e():t())},[s,C,j,u,e,t]),D="DELETION"!==f.type&&("pr"===g||void 0===g),I=(0,o.useMemo)(()=>!!s&&(s.startOrientation!==s.endOrientation||s.startLineNumber!==s.endLineNumber),[s]);if(!m)return null;let E=!1,A=!1;if(s&&I){let t=eE[s.startOrientation],l=eE[s.endOrientation];return a=` on lines ${t}${s.startLineNumber}-${l}${s.endLineNumber}`,!(0,c.Po)(x)&&!(0,c.Po)(y)&&x&&y&&(E=!0,n=x.left===y.left?v?` on line L${x.left}`:`, original line L${x.left}`:v?` on lines L${x.left}-L${y.right}`:`, original lines L${x.left}-L${y.left}`),!(0,c.Po)(j)&&!(0,c.Po)(C)&&j&&C&&(A=!0,r=j.right===C.right?N||p&&w?` on line R${j.right}`:`, modified line R${C.right}`:N||p&&w?` on lines R${j.right}-R${C.right}`:`, modified lines R${j.right}-R${C.right}`),(0,i.jsx)(i.Fragment,{children:p?(0,i.jsx)(i.Fragment,{children:w?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(em.l.Item,{onSelect:L,children:[(0,i.jsx)(em.l.LeadingVisual,{children:(0,i.jsx)(z.PlusIcon,{})}),eA+r,(0,i.jsx)(em.l.TrailingVisual,{children:(0,i.jsx)(eI.U,{keys:"Alt+n"})})]}),(0,i.jsxs)(em.l.Item,{onSelect:e=>L(e,{withSuggestedChange:!0}),children:[(0,i.jsx)(em.l.LeadingVisual,{children:(0,i.jsx)(z.PlusCircleIcon,{})}),e_+r]})]}):(0,i.jsxs)(i.Fragment,{children:[E?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(em.l.Item,{onSelect:S,children:[(0,i.jsx)(em.l.LeadingVisual,{children:(0,i.jsx)(z.PlusIcon,{})}),eA+n,(0,i.jsx)(em.l.TrailingVisual,{children:(0,i.jsx)(eI.U,{keys:v?"Alt+n":"Alt+Shift+N"})})]}),b&&(0,i.jsxs)(em.l.Item,{onSelect:e=>S(e,{withSuggestedChange:!0}),children:[(0,i.jsx)(em.l.LeadingVisual,{children:(0,i.jsx)(z.PlusCircleIcon,{})}),e_+n]})]}):null,A?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(em.l.Item,{onSelect:L,children:[(0,i.jsx)(em.l.LeadingVisual,{children:(0,i.jsx)(z.PlusIcon,{})}),eA+r,(0,i.jsx)(em.l.TrailingVisual,{children:(0,i.jsx)(eI.U,{keys:"Alt+n"})})]}),(0,i.jsxs)(em.l.Item,{onSelect:e=>L(e,{withSuggestedChange:!0}),children:[(0,i.jsx)(em.l.LeadingVisual,{children:(0,i.jsx)(z.PlusCircleIcon,{})}),e_+r]})]}):null]})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(H.Vr,{commandId:"pull-requests-diff-view:start-conversation-current",leadingVisual:(0,i.jsx)(z.PlusIcon,{}),children:eA+a}),D&&b&&(0,i.jsxs)(em.l.Item,{onSelect:e,children:[(0,i.jsx)(em.l.LeadingVisual,{children:(0,i.jsx)(z.PlusCircleIcon,{})}),e_+a]})]})})}return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(H.Vr,{commandId:"pull-requests-diff-view:start-conversation-current",leadingVisual:(0,i.jsx)(z.PlusIcon,{}),children:eT(eA,f,h)}),D&&(0,i.jsxs)(em.l.Item,{onSelect:e,children:[(0,i.jsx)(em.l.LeadingVisual,{children:(0,i.jsx)(z.PlusCircleIcon,{})}),eT(e_,f,h)]})]})}try{eR.displayName||(eR.displayName="StartConversationContextMenuItems")}catch{}function eF(e){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eM,{...e}),(0,i.jsx)(eP,{copilotChatReferenceData:e.copilotChatReferenceData}),(0,i.jsx)(ez,{}),(0,i.jsx)(e$,{}),(0,i.jsx)(H.Vr,{commandId:"pull-requests-diff-view:copy-anchor-link",leadingVisual:(0,i.jsx)(z.LinkIcon,{})}),(0,i.jsx)(eG,{})]})}function eO(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eK,{}),(0,i.jsx)(e$,{})]})}let eP=({copilotChatReferenceData:e})=>{let{diffEntryId:t}=k(),{subjectId:n,oldCommitOid:r,newCommitOid:a}=W(),{selectedDiffRowRange:s}=(0,d.o)(),l=(0,o.useMemo)(()=>e&&n&&r&&a?{referenceData:e,queryVariables:{pullRequestId:n,startOid:r,endOid:a}}:t&&n&&r&&a?{queryVariables:{diffEntryId:t,pullRequestId:n,startOid:r,endOid:a}}:void 0,[t,a,r,n,e]);return l?(0,i.jsx)(eS,{selectedRange:s,showDivider:!0,...l}):null};function e$(){let{fileAnchor:e}=k();return(0,i.jsxs)(em.l.Item,{onSelect:()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${e}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"a",code:"KeyA",ctrlKey:!0}))})},children:[(0,i.jsx)(em.l.LeadingVisual,{children:(0,i.jsx)(z.MultiSelectIcon,{})}),"Select all",(0,i.jsx)(em.l.TrailingVisual,{children:(0,i.jsx)(eI.U,{keys:"Mod+a"})})]})}function eM({handleViewMarkersSelection:e,showStartConversation:t,startConversationCurrentLine:n,startConversationWithSuggestedChange:r}){let{commentingEnabled:a}=W(),{originalLineHasThreads:s,modifiedLineHasThreads:l}=k(),{annotations:o}=ee(),d=o.length>0;return a&&(t||s||l||d)?(0,i.jsxs)(i.Fragment,{children:[t&&(0,i.jsx)(eR,{handleStartConversation:n,handleStartConversationWithSuggestedChange:r}),(0,i.jsx)(eB,{handleViewMarkersSelection:e}),(0,i.jsx)(em.l.Divider,{})]}):null}function eB({handleViewMarkersSelection:e}){let{commentingEnabled:t}=W(),{isSplit:n}=k();return t?n?(0,i.jsx)(eU,{handleViewMarkersSelection:e}):(0,i.jsx)(eH,{onSelect:()=>e()}):null}function eU({handleViewMarkersSelection:e}){let{originalLineHasThreads:t,modifiedLineHasThreads:n,isLeftSide:r}=k(),{annotations:a}=ee(),s=a.length>0;return r?(0,i.jsxs)(i.Fragment,{children:[t&&(0,i.jsx)(eV,{text:"View comments",onSelect:()=>e("LEFT")}),(n||s)&&(0,i.jsx)(eV,{text:"View comments, modified line",onSelect:()=>e("RIGHT")})]}):(0,i.jsxs)(i.Fragment,{children:[(n||s)&&(0,i.jsx)(eV,{text:"View comments",onSelect:()=>e("RIGHT")}),t&&(0,i.jsx)(eV,{text:"View comments, original line",onSelect:()=>e("LEFT")})]})}function eH({onSelect:e}){let{ghostUser:t}=W(),{diffLine:n}=k(),{annotations:r}=ee();return n&&D(n.threadsData,t).length>0||r.length>0?(0,i.jsx)(eV,{text:"View comments",onSelect:()=>e()}):null}function eV({onSelect:e,text:t}){return(0,i.jsxs)(em.l.Item,{onSelect:e,children:[(0,i.jsx)(em.l.LeadingVisual,{children:(0,i.jsx)(z.CommentDiscussionIcon,{})}),t]})}function ez(){return(0,i.jsx)("div",{onMouseDown:e=>{window.getSelection()?.toString()!==""&&e.preventDefault()},children:(0,i.jsx)(H.Vr,{commandId:"pull-requests-diff-view:copy-code",leadingVisual:(0,i.jsx)(z.CopyIcon,{})})})}function eG(){let{canExpandStartOfHunk:e,canExpandEndOfHunk:t}=es(),{previousHunk:n,nextHunk:r}=k();return e||t||n||r?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(em.l.Divider,{}),(0,i.jsx)(eK,{}),(0,i.jsx)(eW,{})]}):null}function eK(){let{canExpandStartOfHunk:e,canExpandEndOfHunk:t}=es();return(0,i.jsxs)(i.Fragment,{children:[e&&(0,i.jsx)(H.Vr,{commandId:"pull-requests-diff-view:expand-hunk-up",leadingVisual:(0,i.jsx)(z.FoldUpIcon,{})}),t&&(0,i.jsx)(H.Vr,{commandId:"pull-requests-diff-view:expand-hunk-down",leadingVisual:(0,i.jsx)(z.FoldDownIcon,{})})]})}function eW(){let{previousHunk:e,nextHunk:t}=k(),{fileAnchor:n}=k();return(0,i.jsxs)(i.Fragment,{children:[t?(0,i.jsxs)(em.l.Item,{"aria-keyshortcuts":"PageDown",onSelect:()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${n}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"PageDown"}))})},children:[(0,i.jsx)(em.l.LeadingVisual,{children:(0,i.jsx)(z.MoveToBottomIcon,{})}),"Go to next hunk",(0,i.jsx)(em.l.TrailingVisual,{children:"Page Down"})]}):null,e?(0,i.jsxs)(em.l.Item,{"aria-keyshortcuts":"PageUp",onSelect:()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${n}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"PageUp"}))})},children:[(0,i.jsx)(em.l.LeadingVisual,{children:(0,i.jsx)(z.MoveToTopIcon,{})}),"Go to previous hunk",(0,i.jsx)(em.l.TrailingVisual,{children:"Page Up"})]}):null]})}try{eF.displayName||(eF.displayName="CellContextMenu")}catch{}try{eO.displayName||(eO.displayName="EmptyCellContextMenu")}catch{}try{eP.displayName||(eP.displayName="CopilotListItems")}catch{}try{e$.displayName||(e$.displayName="SelectAllListItem")}catch{}try{eM.displayName||(eM.displayName="MarkerListItems")}catch{}try{eB.displayName||(eB.displayName="ViewMarkerListItems")}catch{}try{eU.displayName||(eU.displayName="SplitDiffMarkersListItems")}catch{}try{eH.displayName||(eH.displayName="UnifiedDiffMarkerListItem")}catch{}try{eV.displayName||(eV.displayName="MarkerListItem")}catch{}try{ez.displayName||(ez.displayName="CopyContentListItems")}catch{}try{eG.displayName||(eG.displayName="HunkListItems")}catch{}try{eK.displayName||(eK.displayName="ExpandHunksListItems")}catch{}try{eW.displayName||(eW.displayName="JumpToHunkListItems")}catch{}var eq=n(224);function eX({authorAvatarUrl:e,authorLogin:t,lineSpacingPreference:n,sx:r}){return(0,i.jsx)(eq.k,{altText:`${t}'s avatar image with pending indicator`,icon:z.DotFillIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",square:!1,size:"compact"===n?18:20,src:e,backgroundSx:{backgroundColor:"var(--bgColor-default, var(--color-canvas-default))",boxShadow:"0 0 0 .1px var(--bgColor-default, var(--color-canvas-default))"},sx:{alignItems:"center",display:"flex",opacity:.5,height:"var(--diff-line-minimum-height)",...r}})}try{eX.displayName||(eX.displayName="InProgressCommentIndicator")}catch{}let eQ={"action-bar-position":"ActionBar-module__action-bar-position--q5zYS"},eY="24px",eJ="30px",eZ=(0,o.forwardRef)(function({authorAvatarUrl:e,authorLogin:t,cellId:n,cellRef:r,showStartConversation:a,hasDraftComment:s,copilotChatReferenceData:l},d){let c=(0,o.useRef)(null),f=(0,o.useRef)(null),{commentingEnabled:h,viewerData:{lineSpacingPreference:p}}=W(),{diffLine:g,isRowSelected:x}=k(),y=(0,o.useRef)(null),b=c.current?c:f;(0,eo.T)(d,b);let j=g.threadsData?.totalCommentsCount||0,C=g.annotationsData?.totalCount||0,{isActionBarFocused:v,handleActionBarBlur:N,handleActionBarFocusCapture:w,handleActionBarKeydownCapture:S}=ea({cellRef:r}),{annotations:L,isContextMenuOpen:D,openMarkerOrListDialogFromActionBar:I,startNewConversationFromActionBar:E,startNewConversationFromActionBarWithSuggestedChange:A,anyMenuOpen:_,threads:T,toggleContextMenu:R,toggleContextMenuFromActionBar:F}=er({cellId:n,actionBarRef:y}),O=(0,o.useCallback)(e=>{x&&e.preventDefault()},[x]);return(0,i.jsx)("div",{"aria-hidden":!v,className:(0,u.$)("d-flex","flex-row",eQ["action-bar-position"]),children:(0,i.jsxs)(ed.A,{onBlur:N,onClick:O,onFocusCapture:w,onKeyDownCapture:S,children:[h&&(0,i.jsxs)(i.Fragment,{children:[j+C>0&&(0,i.jsx)(m.Q,{ref:c,"aria-expanded":_,"aria-label":"View conversations",size:"small",sx:{pt:0,pb:0,px:1,height:eY},onClick:e=>{(1===T.length||1===L.length)&&e.preventDefault(),I()},children:(0,i.jsx)(eb,{lineSpacingPreference:p})}),a&&(0,i.jsx)(i.Fragment,{children:s?(0,i.jsx)(m.Q,{"aria-label":"Start conversation (comment in progress)",size:"small",sx:{pt:0,pb:0,px:1,width:eJ,height:eY},onClick:E,children:(0,i.jsx)(eX,{lineSpacingPreference:p,authorAvatarUrl:e,authorLogin:t})}):(0,i.jsx)(ec.K,{unsafeDisableTooltip:!0,"aria-label":"Start conversation",ref:f,icon:z.PlusIcon,size:"small",sx:{width:eJ,height:eY,color:"fg.muted"},onClick:E})})]}),(0,i.jsx)(ec.K,{unsafeDisableTooltip:!0,ref:y,"aria-haspopup":"true","aria-label":"More actions",icon:z.TriangleDownIcon,size:"small",sx:{width:eY,height:eY,color:"fg.muted"},onClick:F}),(0,i.jsx)(eu.W,{anchorRef:y,open:D,onOpenChange:R,children:(0,i.jsx)(eu.W.Overlay,{width:"medium",children:(0,i.jsx)(em.l,{children:(0,i.jsx)(eF,{copilotChatReferenceData:l,showStartConversation:a,handleViewMarkersSelection:I,startConversationCurrentLine:E,startConversationWithSuggestedChange:A})})})})]})})});eZ.displayName="ActionBar";let e0={visibilityHidden:"DiffHighlightedOverlay-module__visibilityHidden--v59uf",userSelectNone:"DiffHighlightedOverlay-module__userSelectNone--i39lB",focusedResultStyles:"DiffHighlightedOverlay-module__focusedResultStyles--QZMIm",nonFocusedResultStyles:"DiffHighlightedOverlay-module__nonFocusedResultStyles--x2N7d",nonHunkStyles:"DiffHighlightedOverlay-module__nonHunkStyles--_dJlQ"};function e1({searchResults:e,focusedSearchResult:t,className:n,styleObject:r}){let a=0,s=e[0]?.text??"",l=e[0]?.diffLineNumIndex??-1,o=`overlay-${l}-${s}`;return(0,i.jsxs)("span",{className:(0,u.$)(n,"position-absolute",e0.userSelectNone,!e[0].isHunk&&e0.nonHunkStyles),style:{...r},children:[e.map(e=>{var n,r;let l=e.indexWithinPathDigest===t,o=(0,i.jsxs)("span",{children:[(0,i.jsx)("span",{className:(0,u.$)(e0.visibilityHidden,e0.userSelectNone),children:s.substring(a,e.column)}),(0,i.jsx)("span",{className:(0,u.$)(e0.userSelectNone,l&&e0.focusedResultStyles,!l&&e0.nonFocusedResultStyles),children:(0,i.jsx)("span",{className:(0,u.$)(!l&&e0.visibilityHidden),id:(n=e.indexWithinPathDigest,r=e.pathDigest,`match-${r}-${n}`),children:s.substring(e.column,e.columnEnd)})})]},`find-match-${e.diffLineNumIndex}-${e.column}`);return a=e.columnEnd,o}),(0,i.jsx)("span",{className:(0,u.$)(e0.visibilityHidden,e0.userSelectNone),children:s.substring(a)})]},o)}try{e1.displayName||(e1.displayName="DiffHighlightedOverlay")}catch{}function e2(e,t,n){let i=e.threadsData?.totalCount||0,r=t.threadsData?.totalCount||0;if(0===i&&0===r)return;let a=e.threadsData?.threads?.[0]?.commentsData.comments?.[0]?.author?.login||"",s=t.threadsData?.threads?.[0]?.commentsData.comments?.[0]?.author?.login||"",l="";1===i?l=`has conversation started by @${a}.`:i>1&&(l="has conversations.");let o="";1===r?o=`has conversation started by @${s}.`:r>1&&(o="has conversations.");let d="";if("LEFT"===n){let e=`${l.charAt(0).toUpperCase()}${l.slice(1)}`,t=`${o.length>1?"Modified line":""} ${o}`;d=`${e} ${t}`}else{let e=`${o.charAt(0).toUpperCase()}${o.slice(1)}`,t=`${l.length>1?"Original line":""} ${l}`;d=`${e} ${t}`}return d}function e4({summary:e}){return""===e?null:(0,i.jsx)("div",{className:"sr-only user-select-none","data-testid":"pr-diffline-summary",children:e.trimStart().trimEnd()})}try{e4.displayName||(e4.displayName="DiffLineScreenReaderSummary")}catch{}let e8=["CONTEXT","INJECTED_CONTEXT"];function e6(e){let{rowId:t}=k();if(t)return(0,c.u6)(t,e)}function e7(e,t){let{selectedDiffRowRange:n}=(0,d.o)();return(0,o.useMemo)(()=>{let i="Add a comment on",r=!!n&&n.startLineNumber!==n.endLineNumber;if(n&&r){let e={left:"L",right:"R"},t=e[n.startOrientation],r=e[n.endOrientation];i+=n.startLineNumber!==n.endLineNumber?` lines ${t}${n.startLineNumber} to ${r}${n.endLineNumber}`:` line ${t}${n.startLineNumber}`}else{let n=t&&!(0,c.Ji)(e)?"L":"R";i+=` line ${n}${e.blobLineNumber}`}return i},[e,t,n])}let e3=(0,o.forwardRef)(function({children:e,ContextMenu:t,className:n,columnIndex:r,handleDiffCellClick:a,handleDiffCellMouseDown:s,diffLineFirstSelected:l,handleDiffSideCellSelectionBlocking:u,lineAnchor:m,commentDialogOpen:f,startConversation:h,...p},g){let{diffLine:x,isRowSelected:y,isLeftSide:b,isSplit:j}=k(),C=(0,o.useRef)(null);(0,o.useImperativeHandle)(g,()=>C.current,[]);let[N,w]=(0,o.useState)(!1),{selectedDiffRowRange:S}=(0,d.o)(),{fileAnchor:L,filePath:D}=k(),{expandStartOfHunk:I,expandEndOfHunk:E,expandEndOfPreviousHunk:A}=es(),{getUnifiedDiffLineCode:_,getSplitDiffSingleLineCode:T,getSplitDiffMultiLineCode:R}=function(e){let{selectedDiffRowRange:t,selectedDiffLines:n,getDiffLinesByDiffAnchor:i}=(0,d.o)();return{getUnifiedDiffLineCode:()=>{let n=i(e);if(!n||!t)return"";let{startOrientation:r,endOrientation:a,startLineNumber:s,endLineNumber:l}=t,o=0,d=0;return n.length>1&&(o=n.findIndex(e=>"left"===r?e.left===s:e.right===s),d=n.findIndex(e=>"left"===a?e.left===l:e.right===l)),(0,c.Ls)(n.slice(o,d+1))},getSplitDiffSingleLineCode:(t,n)=>{if(!t||!n)return"";let r=i(e)?.find(e=>"left"===t?e.left===n:e.right===n);return r?(0,c.Ls)([r]):""},getSplitDiffMultiLineCode:e=>void 0===e?"":"left"===e?(0,c.Ls)(n.leftLines):(0,c.Ls)(n.rightLines)}}(L),F=(0,o.useRef)(null),O=(0,V.U)(e=>{if(!e.target)return;let t=e.target;!N||F.current?.contains(t)||C.current?.contains(t)||2!==e.button?C.current?.contains(t)&&e.target.closest("button")?.contains(t)&&w(!1):w(!1)});(0,o.useEffect)(()=>{N?v.XC?.addEventListener("mousedown",O):v.XC?.removeEventListener("mousedown",O)},[O,N]),(0,o.useEffect)(()=>()=>v.XC?.removeEventListener("mousedown",O),[]);let P=(0,o.useCallback)(()=>{l&&(l.current=null)},[l]),$=(0,o.useCallback)(e=>{let t=e.target?.closest("td"),n=t?.classList.contains("diff-line-number");e.shiftKey?e.preventDefault():n?s?.():l&&(l.current=null),l&&n&&(l.current=b?x.left:x.right),u?.(e)},[u]);return(0,i.jsxs)(H.tL,{as:"td",commands:{"pull-requests-diff-view:copy-code":()=>{let e=window.getSelection();if(e&&""!==e.toString()){document.execCommand("copy");return}if(j){void 0===S||S?.startOrientation===S?.endOrientation&&S?.startLineNumber===S?.endLineNumber?(0,B.D)(T(b?"left":"right",b?x?.left:x?.right)):(0,B.D)(R(b?"left":"right"));return}(0,B.D)(_())},"pull-requests-diff-view:expand-all-hunks":()=>{let e=document.querySelector(`.js-expand-all-difflines-button[data-file-path="${D}"]`);e?.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0}))},"pull-requests-diff-view:expand-hunk-up":I,"pull-requests-diff-view:expand-hunk-down":()=>{if(x?.type==="HUNK"){A();return}E()},"pull-requests-diff-view:copy-anchor-link":()=>{let e=(0,c.j2)({line:x,range:S,fileAnchor:L});e&&(0,B.D)(e)},"pull-requests-diff-view:start-conversation-current":h},ref:C,"data-grid-cell-id":e6(r),"data-line-anchor":m,"data-selected":y,role:"gridcell",style:{userSelect:"none",position:"relative"},tabIndex:-1,valign:"top",className:n?`focusable-grid-cell ${n} ${r<3?"left-side":""}`:"focusable-grid-cell",onBlur:e=>e.target.ariaSelected="false",onClick:a,onFocus:e=>e.target.ariaSelected="true",onMouseDown:$,onMouseUp:P,...p,children:[e,t&&N&&(0,i.jsx)(eu.W,{anchorRef:C,open:!0,onOpenChange:w,children:(0,i.jsx)(eu.W.Overlay,{width:e?"medium":"small",children:(0,i.jsx)(em.l,{children:t})})})]})});function e9(){let{isSplit:e}=k();return(0,i.jsx)("div",{className:(0,u.$)("hunk-kebab-icon pr-2 pb-1",!e&&"hunk-kebab-icon-unified"),children:(0,i.jsx)(z.KebabHorizontalIcon,{})})}let e5=(0,o.memo)(te);function te({summary:e,searchResultsForLine:t,focusedSearchResult:n,columnIndex:r,lineAnchor:a,handleDiffCellClick:s,handleDiffSideCellSelectionBlocking:l,diffLineFirstSelected:m,filePath:f,copilotChatReferenceData:h}){let{diffLine:p,fileAnchor:g,isLeftSide:x}=k(),[y,b]=(0,c._S)(p.html,p.type),j=b&&["+","-"].includes(b),{isActionBarVisible:C}=ee(),{selectedDiffRowRange:v,selectedDiffLines:N}=(0,d.o)(),{commentBatchPending:w,commentingEnabled:S,commentingImplementation:L,initialExpandedThreadId:D,markerNavigationImplementation:I,repositoryId:E,subjectId:A,subject:_,viewerData:T}=W(),{hasPersistedComment:R}=(0,M.L4)({diffSide:x?"LEFT":"RIGHT",filePath:f,line:p.blobLineNumber,subjectId:A,fileLevelComment:!1}),F=(0,o.useMemo)(()=>{var e;return e=T.viewerCanComment,S&&e&&(0,c.a1)(p,N)},[S,T,p,N]),O=(0,o.useRef)(null),P=(0,o.useRef)(null),$=(0,c.YY)({shouldAlignRight:R||!F,lineSpacingPreference:T.lineSpacingPreference}),B=!!p.threadsData?.threads?.length||!!p.annotationsData?.annotations?.length,H=(0,c.S4)({hasThreads:B}),V=e7(p,!!x),z=e6(r),{handleCellBlur:G,handleCellFocus:K,handleCellMouseEnter:q,handleCellMouseLeave:X}=ea({cellRef:P}),Q=(0,o.useCallback)(()=>{q()},[q]),{annotations:Y,isNewConversationDialogOpen:J,shouldStartNewConversationWithSuggestedChange:Z,startNewConversation:et,startNewConversationWithSuggestedChange:en,openMarkerOrListDialog:ei,selectAnnotation:es,selectThread:eo,isMarkerListDialogOpen:ed,closeNewConversationDialog:ec,closeMarkerListDialog:eu,closeConversationDetailsDialog:em,returnFocusRef:ef,optimizedSelectedAnnotationId:eh,optimizedSelectedThreadId:ep,threadConnectionId:eg,threads:ex}=er({cellId:z,actionBarRef:O});(0,o.useEffect)(()=>{L&&D&&ep!==D&&ex.map(e=>e.id).includes(D)&&eo(D,{skipLineSelection:!0})},[D]);let ey=(0,o.useCallback)(()=>{m&&(m.current=null)},[]);(0,o.useEffect)(()=>{if(!I)return;let{activeGlobalMarkerID:e,onActivateGlobalMarkerNavigation:t}=I;if(e){let n=ex.map(e=>e.id),i=Y.map(e=>e.id);n.includes(e)?(eo(e,{skipLineSelection:!0}),t()):i.includes(e)&&(es(e,{skipLineSelection:!0}),t())}},[eo,ex,I,Y,es]);let ej=(0,el.S)(L?.suggestedChangesEnabled,p,Z),eC=(0,o.useRef)(!0),{ghostUser:ev}=W();return(0,i.jsxs)(e3,{ref:P,columnIndex:r,diffLineFirstSelected:m,commentDialogOpen:J,handleDiffCellClick:s,handleDiffSideCellSelectionBlocking:l,lineAnchor:a,startConversation:et,ContextMenu:(0,i.jsx)(eF,{copilotChatReferenceData:h,showStartConversation:F,handleViewMarkersSelection:ei,startConversationCurrentLine:et,startConversationWithSuggestedChange:en}),className:(0,u.$)(`diff-text-cell ${x?"left-side-diff-cell":"right-side-diff-cell"}`,{"border-right":x&&"HUNK"!==p.type}),style:{backgroundColor:ta(p.type,!1),paddingRight:H},onBlur:G,onFocus:K,handleDiffCellMouseDown:ey,onMouseEnter:Q,onMouseLeave:X,children:[(0,i.jsxs)("code",{className:(0,u.$)("diff-text syntax-highlighted-line",{addition:"ADDITION"===p.type,deletion:"DELETION"===p.type}),children:[j&&(0,i.jsx)("span",{className:"diff-text-marker",children:b}),t&&t.length>0&&(0,i.jsx)(e1,{searchResults:t,focusedSearchResult:n,className:(0,u.$)("diff-text-inner",{"color-fg-muted":"HUNK"===p.type})}),(0,i.jsx)(U.mo,{html:y,className:(0,u.$)("diff-text-inner",{"color-fg-muted":"HUNK"===p.type})})]}),C&&(0,i.jsx)(eZ,{copilotChatReferenceData:h,authorAvatarUrl:T.avatarUrl,authorLogin:T.login,ref:O,cellId:z,cellRef:P,hasDraftComment:R,showStartConversation:F}),L&&I&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(M.c7,{annotations:Y,batchPending:w,batchingEnabled:L.batchingEnabled,commentingImplementation:{...L,deleteComment:({onCompleted:e,...t})=>{L&&p&&L.deleteComment({...t,onCompleted:()=>{e?.(),ex.length<=1&&(em(),setTimeout(()=>P.current?.focus()))},filePath:f})}},conversationAnchorRef:P,conversationListAnchorRef:ef,conversationListThreads:ex,fileAnchor:g,filePath:f,isMarkerListOpen:ed,repositoryId:E,returnFocusRef:ef,selectedAnnotationId:eh,selectedThreadId:ep,subjectId:A,subject:_,suggestedChangesConfig:ej,threadsConnectionId:eg,onCloseConversationDialog:em,onCloseConversationList:eu,onAnnotationSelected:es,onThreadSelected:eo,markerNavigationImplementation:I,viewerData:T,ghostUser:ev}),(0,i.jsx)(M.cT,{addCommentDialogTitle:V,anchorRef:P,batchPending:w,batchingEnabled:L.batchingEnabled,commentBoxConfig:L.commentBoxConfig,filePath:f,isLeftSide:!!x,isOpen:J,lineNumber:p.blobLineNumber,repositoryId:E,returnFocusRef:ef,subjectId:A,suggestedChangesConfig:ej,threadsConnectionId:eg,viewerData:T,onAddComment:({onCompleted:e,threadsConnectionId:t,...n})=>{if(!L||!p)return;let{leftLines:i,rightLines:r}=N;if(v){let e="left"===v.endOrientation?i:r,n=e[e.length-1];n&&(0,c.qK)(n)&&n.threadsData?.__id&&(t=n.threadsData?.__id)}L.addThread({...n,diffLine:p,isLeftSide:x,selectedDiffRowRange:v,threadsConnectionId:t,onCompleted:(t,n)=>{e?.(t,n),eo(t)}})},onCloseCommentDialog:ec})]}),!C&&(0,i.jsxs)("div",{"aria-hidden":"true",style:{right:$},className:"position-absolute top-0 d-flex user-select-none",children:[(0,i.jsx)(eb,{shouldAnimateRef:eC,lineSpacingPreference:T.lineSpacingPreference}),R&&(0,i.jsx)(eX,{lineSpacingPreference:T.lineSpacingPreference,authorAvatarUrl:T.avatarUrl,authorLogin:T.login})]}),e&&(0,i.jsx)(e4,{summary:e})]})}let tt=(0,o.memo)(tn);function tn({children:e,columnIndex:t,handleDiffCellClick:n,handleDiffSideCellSelectionBlocking:r,filePath:a,diffLineFirstSelected:s,copilotChatReferenceData:l,...m}){let f=(0,o.useRef)(null),h=e6(t),{commentBatchPending:p,commentingEnabled:g,commentingImplementation:x,repositoryId:y,subject:b,subjectId:j,markerNavigationImplementation:C,viewerData:v}=W(),{diffLine:N,fileAnchor:w,isLeftSide:S}=k(),{selectedDiffRowRange:L,selectedDiffLines:D,updateSelectedDiffRowRange:I}=(0,d.o)(),E=e7(N,!!S),A=(0,o.useMemo)(()=>{var e;return e=v.viewerCanComment,g&&e&&(0,c.a1)(N,D)},[g,v,N,D]),{handleCellBlur:_,handleCellFocus:T,handleCellMouseEnter:R,handleCellMouseLeave:F}=ea({cellRef:f}),O=(0,o.useCallback)(()=>{s&&null!==s.current&&I(w,S?N.left:N.right,S?"left":"right",!0,!0),R()},[R]),P=(0,o.useCallback)(()=>{I(w,S?N.left:N.right,S?"left":"right",!1,!0)},[]),{ghostUser:$}=W(),{annotations:B,isNewConversationDialogOpen:U,shouldStartNewConversationWithSuggestedChange:H,startNewConversation:V,startNewConversationWithSuggestedChange:z,openMarkerOrListDialog:G,isMarkerListDialogOpen:K,closeConversationDetailsDialog:q,closeMarkerListDialog:X,selectAnnotation:Q,selectThread:Y,closeNewConversationDialog:J,returnFocusRef:Z,optimizedSelectedThreadId:ee,optimizedSelectedAnnotationId:et,threadConnectionId:en,threads:ei}=er({cellId:h,actionBarRef:f}),es=(0,el.S)(x?.suggestedChangesEnabled,N,H);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e3,{ref:f,className:(0,u.$)("diff-line-number",e8.includes(N.type)&&"diff-line-number-neutral"),columnIndex:t,diffLineFirstSelected:s,commentDialogOpen:U,handleDiffCellClick:n,handleDiffSideCellSelectionBlocking:r,startConversation:V,style:{backgroundColor:ta(N.type,!0),textAlign:"center"},ContextMenu:(0,i.jsx)(eF,{copilotChatReferenceData:l,showStartConversation:A,handleViewMarkersSelection:G,startConversationCurrentLine:V,startConversationWithSuggestedChange:z}),onBlur:_,onFocus:T,handleDiffCellMouseDown:P,onMouseEnter:O,onMouseLeave:F,...m,children:(0,i.jsx)("code",{children:e})}),x&&C&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(M.c7,{annotations:B,batchPending:p,batchingEnabled:x.batchingEnabled,commentingImplementation:{...x,deleteComment:({onCompleted:e,...t})=>{x&&N&&x.deleteComment({...t,onCompleted:()=>{e?.(),ei.length<=1&&(q(),setTimeout(()=>f.current?.focus()))},filePath:a})}},conversationAnchorRef:f,conversationListAnchorRef:Z,conversationListThreads:ei,fileAnchor:w,filePath:a,isMarkerListOpen:K,repositoryId:y,returnFocusRef:Z,selectedAnnotationId:et,selectedThreadId:ee,subjectId:j,subject:b,suggestedChangesConfig:es,threadsConnectionId:en,markerNavigationImplementation:C,onCloseConversationDialog:q,onCloseConversationList:X,onThreadSelected:Y,onAnnotationSelected:Q,viewerData:v,ghostUser:$}),(0,i.jsx)(M.cT,{addCommentDialogTitle:E,align:"start",anchorRef:f,batchPending:p,batchingEnabled:x.batchingEnabled,commentBoxConfig:x.commentBoxConfig,filePath:a,isLeftSide:!!S,isOpen:U,lineNumber:N.blobLineNumber,repositoryId:y,returnFocusRef:Z,subjectId:j,suggestedChangesConfig:es,threadsConnectionId:en,viewerData:v,onAddComment:({onCompleted:e,threadsConnectionId:t,...n})=>{if(!x||!N)return;let{leftLines:i,rightLines:r}=D;if(L){let e="left"===L.endOrientation?i:r,n=e[e.length-1];n&&(0,c.qK)(n)&&n.threadsData?.__id&&(t=n.threadsData?.__id)}x.addThread({...n,diffLine:N,selectedDiffRowRange:L,threadsConnectionId:t,onCompleted:(t,n)=>{e?.(t,n),Y(t)}})},onCloseCommentDialog:J})]})]})}function ti({ContextMenu:e,renderHunkButton:t,searchResultsForLine:n,focusedSearchResult:r}){let a=(0,o.useRef)(null),[s,l]=function(e){let[t,n]=(0,o.useState)(!1),[i,r]=(0,o.useState)(!1),a=(0,o.useCallback)(t=>{e.current&&e.current.contains(t.relatedTarget)||n(!1)},[e]),s=(0,o.useCallback)(()=>{e.current===document.activeElement&&n(!0)},[e]),l=(0,o.useCallback)(t=>{e.current&&!e.current.contains(t.relatedTarget)&&n(!1),r(!1)},[e]);return[{onFocus:s,onBlur:a},{"aria-hidden":!i,tabIndex:t?0:-1,onBlur:l,onFocusCapture:(0,o.useCallback)(e=>{e.stopPropagation(),r(!0)},[]),onKeyDownCapture:(0,o.useCallback)(e=>{O(e.key)&&e.stopPropagation()},[])}]}(a),{diffLine:d}=k();return(0,i.jsx)(e3,{ref:a,ContextMenu:e,colSpan:4,columnIndex:0,style:{backgroundColor:"var(--bgColor-accent-muted, var(--color-accent-subtle))",flexGrow:1},...s,children:(0,i.jsxs)("div",{className:"d-flex flex-row",children:[t?.(l)??(0,i.jsx)(e9,{}),(0,i.jsxs)("code",{className:"diff-text-cell hunk",children:[n&&n.length>0&&(0,i.jsx)(e1,{searchResults:n,focusedSearchResult:r,className:(0,u.$)("diff-text-inner",{"color-fg-muted":"HUNK"===d.type})}),(0,i.jsx)(U.mo,{className:"diff-text-inner color-fg-muted",html:d.html})]})]})})}function tr({columnIndex:e,showRightBorder:t}){return(0,i.jsx)(e3,{ContextMenu:(0,i.jsx)(eO,{}),className:(0,u.$)("empty-diff-line",{"border-right":t}),columnIndex:e})}function ta(e,t=!1){switch(e){case"ADDITION":return t?"var(--diffBlob-additionNum-bgColor, var(--diffBlob-addition-bgColor-num))":"var(--diffBlob-additionLine-bgColor, var(--diffBlob-addition-bgColor-line))";case"DELETION":return t?"var(--diffBlob-deletionNum-bgColor, var(--diffBlob-deletion-bgColor-num))":"var(--diffBlob-deletionLine-bgColor, var(--diffBlob-deletion-bgColor-line))";case"HUNK":return t?"var(--diffBlob-hunkNum-bgColor-rest, var(--diffBlob-hunk-bgColor-num))":"var(--diffBlob-hunkLine-bgColor, var(--bgColor-accent-muted))";case"EMPTY":return t?"var(--diffBlob-emptyNum-bgColor, var(--diffBlob-hunk-bgColor-num))":"var(--diffBlob-emptyLine-bgColor, var(--bgColor-accent-muted))";default:return}}try{e3.displayName||(e3.displayName="Cell")}catch{}try{e9.displayName||(e9.displayName="HunkKebabIcon")}catch{}try{e5.displayName||(e5.displayName="ContentCell")}catch{}try{te.displayName||(te.displayName="ContentCellUnmemoized")}catch{}try{tt.displayName||(tt.displayName="LineNumberCell")}catch{}try{tn.displayName||(tn.displayName="LineNumberCellUnmemoized")}catch{}try{ti.displayName||(ti.displayName="HunkCell")}catch{}try{tr.displayName||(tr.displayName="EmptyCell")}catch{}let ts=({summary:e,resultsForLine:t,focusedSearchResult:n,handleDiffSideCellSelectionBlocking:r,handleDiffRowClick:a,diffLineFirstSelected:s,lineAnchor:l,filePath:d,copilotChatReferenceData:c})=>{let{diffLine:u,isLeftSide:m,isSplit:f}=k(),h="ADDITION"!==u.type,p=!f||m,g=p&&!h,x="DELETION"!==u.type,y=!f||!m,b=y&&!x,j=(0,o.useCallback)(e=>{u.left&&a(e,u.left,"left",e.shiftKey,!0)},[a,u.left]),C=(0,o.useCallback)(e=>{u.left&&a(e,u.left,"left",e.shiftKey,!1)},[a,u.left]),v=(0,o.useCallback)(e=>{u.right&&a(e,u.right,"right",e.shiftKey,!0)},[a,u.right]),N=(0,o.useCallback)(e=>{u.right&&a(e,u.right,"right",e.shiftKey,!1)},[a,u.right]),w=(0,o.useCallback)(()=>{r&&r("left")},[r]),S=(0,o.useCallback)(()=>{r&&r("right")},[r]);return(0,i.jsxs)(Z,{line:u,children:[p&&(0,i.jsx)(tt,{diffLineFirstSelected:s,copilotChatReferenceData:c,columnIndex:0,filePath:d,handleDiffCellClick:g?v:j,handleDiffSideCellSelectionBlocking:S,children:h&&u.left}),y&&(0,i.jsx)(tt,{diffLineFirstSelected:s,copilotChatReferenceData:c,columnIndex:f?2:1,filePath:d,handleDiffCellClick:b?j:v,handleDiffSideCellSelectionBlocking:w,children:x&&u.right}),(0,i.jsx)(e5,{diffLineFirstSelected:s,copilotChatReferenceData:c,columnIndex:f?m?1:3:2,filePath:d,handleDiffCellClick:m?C:N,lineAnchor:l,handleDiffSideCellSelectionBlocking:m?S:w,searchResultsForLine:t,focusedSearchResult:n,summary:e})]})},tl=({summary:e,resultsForLine:t,focusedSearchResult:n,fileAnchor:r,filePath:a,handleDiffRowClick:l,diffLineFirstSelected:o,handleDiffSideCellSelectionBlocking:d,copilotChatReferenceData:u})=>{let{diffLine:m,isLeftSide:f}=k();if((0,c.Po)(m))return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(tr,{columnIndex:f?0:2}),(0,i.jsx)(tr,{columnIndex:f?1:3,showRightBorder:f})]});let h=f?"left":(0,s.XU)(m.type),p="left"===h?m.left:m.right,g=(0,s.IQ)(r,h,p??0);switch(m.type){case"HUNK":return null;case"ADDITION":case"DELETION":case"CONTEXT":case"INJECTED_CONTEXT":return(0,i.jsx)(td,{copilotChatReferenceData:u,filePath:a,handleDiffRowClick:l,diffLineFirstSelected:o,handleDiffSideCellSelectionBlocking:d,lineAnchor:g,resultsForLine:t,focusedSearchResult:n,summary:e});default:throw Error(`cannot handle type ${m.type}`)}},to=o.memo(tl),td=o.memo(ts);try{ts.displayName||(ts.displayName="CodeDiffLineUnmemoized")}catch{}try{tl.displayName||(tl.displayName="DiffLineSideUnmemoized")}catch{}try{to.displayName||(to.displayName="DiffLineSide")}catch{}try{td.displayName||(td.displayName="CodeDiffLine")}catch{}let tc={"expand-button-line":"ExpandableHunkHeaderDiffLine-module__expand-button-line--rnQN5","expand-up-and-down":"ExpandableHunkHeaderDiffLine-module__expand-up-and-down--hCan_","expand-button-unified":"ExpandableHunkHeaderDiffLine-module__expand-button-unified--j86KQ"};function tu({direction:e,icon:t,label:n,onClick:r,ariaLabel:a,className:s,...l}){let{sendAnalyticsEvent:o}=(0,ei.s)(),{isSplit:d}=k();return(0,i.jsx)("button",{onClick:()=>{r(),o("file_entry.expand_hunk","FILE_EXPANDER_BUTTON")},className:(0,u.$)("Button Button--iconOnly Button--invisible",tc["expand-button-line"],!d&&tc["expand-button-unified"],s),"aria-label":a??n,"data-direction":e,...l,children:(0,i.jsx)(t,{})})}function tm({nextLine:e,prevLine:t,resultsForLine:n,focusedSearchResult:r}){let{fileLineCount:a,diffLine:s}=k(),{expandStartOfHunk:l,expandEndOfPreviousHunk:d}=es(),u=!t,m=!e,f=0===s.blobLineNumber,h=u||m,p=m&&s.blobLineNumber===a,g=(0,o.useMemo)(()=>!h&&!(s.blobLineNumber<=0)&&(s.blobLineNumber-t.blobLineNumber<=20||e.blobLineNumber-s.blobLineNumber>=20),[h,s,e,t]),x=(0,o.useMemo)(()=>!h&&!p&&s.blobLineNumber-t.blobLineNumber>20,[h,p,s,t]),y=(0,o.useMemo)(()=>!(s.blobLineNumber<=0)&&!f&&!!u,[u,f,s]),b=(0,o.useMemo)(()=>!u&&!p&&!!m,[u,m,p]),j=(0,o.useMemo)(()=>{switch(!0){case g:return"expand-all";case x:return"expand-up-and-down";case y:return"expand-up";case b:return"expand-down"}},[g,x,y,b]),C=()=>l(),v=()=>d(),N=()=>l();return(0,i.jsx)(ti,{searchResultsForLine:n,focusedSearchResult:r,renderHunkButton:n=>{switch(j){case"expand-all":return(0,i.jsx)(tu,{...n,direction:"all",icon:z.UnfoldIcon,label:`Expand file from line ${t?.blobLineNumber||""} to line ${e?.blobLineNumber||""}`,onClick:N});case"expand-up-and-down":return(0,i.jsxs)("div",{className:"d-flex flex-column",children:[(0,i.jsx)(tu,{...n,direction:"down",icon:z.FoldDownIcon,label:`Expand file down from line ${t?.blobLineNumber||""}`,className:tc["expand-up-and-down"],onClick:v}),(0,i.jsx)(tu,{...n,direction:"up",icon:z.FoldUpIcon,label:`Expand file up from line ${e?.blobLineNumber||""}`,className:tc["expand-up-and-down"],onClick:C})]});case"expand-up":return(0,i.jsx)(tu,{...n,direction:"up",icon:z.FoldUpIcon,label:`Expand file up from line ${e?.blobLineNumber||""}`,onClick:C});case"expand-down":return(0,i.jsx)(tu,{...n,direction:"down",icon:z.FoldDownIcon,label:`Expand file down from line ${t?.blobLineNumber||""}`,onClick:v});default:return null}},ContextMenu:(0,i.jsx)(tf,{handleCopyContent:()=>{let[e]=(0,c._S)((0,c.ZC)(s.html),s.type);(0,B.D)(e)},handleExpandAbove:C,handleExpandAll:N,handleExpandBelow:v,shouldCopyContent:!!s.html,shouldExpandAbove:x||y,shouldExpandBelow:x||b})})}function tf({shouldExpandBelow:e,shouldExpandAbove:t,shouldCopyContent:n,handleExpandAll:r,handleExpandBelow:a,handleExpandAbove:s,handleCopyContent:l}){let o={includeShiftKey:!0,key:"["},d={key:"]"},u={key:"["},m={key:"C"};return(0,i.jsx)(eu.W.Overlay,{width:"medium",children:(0,i.jsxs)(em.l,{children:[(0,i.jsxs)(em.l.Item,{"aria-keyshortcuts":(0,c.oE)(o),onSelect:r,children:[(0,i.jsx)(em.l.LeadingVisual,{children:(0,i.jsx)(z.UnfoldIcon,{})}),"Expand all",(0,i.jsx)(em.l.TrailingVisual,{children:(0,i.jsx)("span",{children:`${(0,c.pI)(o)}`})})]}),t?(0,i.jsxs)(em.l.Item,{"aria-keyshortcuts":(0,c.oE)(d),onSelect:s,children:[(0,i.jsx)(em.l.LeadingVisual,{children:(0,i.jsx)(z.FoldUpIcon,{})}),"Expand above",(0,i.jsx)(em.l.TrailingVisual,{children:(0,i.jsx)("span",{children:`${(0,c.pI)(d)}`})})]}):null,e?(0,i.jsxs)(em.l.Item,{"aria-keyshortcuts":(0,c.oE)(u),onSelect:a,children:[(0,i.jsx)(em.l.LeadingVisual,{children:(0,i.jsx)(z.FoldDownIcon,{})}),"Expand below",(0,i.jsx)(em.l.TrailingVisual,{children:(0,i.jsx)("span",{children:`${(0,c.pI)(u)}`})})]}):null,(0,i.jsx)(eW,{}),n?(0,i.jsxs)(em.l.Item,{"aria-keyshortcuts":(0,c.oE)(m),onSelect:l,children:[(0,i.jsx)(em.l.LeadingVisual,{children:(0,i.jsx)(z.CopyIcon,{})}),"Copy",(0,i.jsx)(em.l.TrailingVisual,{children:(0,i.jsx)("span",{children:`${(0,c.pI)(m)}`})})]}):null]})})}try{tu.displayName||(tu.displayName="ExpandButtonLine")}catch{}try{tm.displayName||(tm.displayName="ExpandableHunkHeaderDiffLine")}catch{}try{tf.displayName||(tf.displayName="HunkContextMenu")}catch{}let th=(0,o.memo)(function({searchResults:e,diffContext:t="pr",focusedSearchResult:n,clearSelectedDiffRowRange:r,diffEntryId:a,diffLines:s,fileAnchor:l,fileLineCount:d,diffLineFirstSelected:u,filePath:m,handleDiffRowClick:f,handleDiffSideCellSelectionBlocking:h,replaceSelectedDiffRowRangeFromGridCells:p,selectedDiffRowRange:g,tableRef:b,updateDiffLines:j,updateSelectedDiffRowRange:C,copilotChatReferenceData:v}){let{leftLines:N,rightLines:w}=function(e){let t=e.reduce((e,t)=>e+(t.threadsData?.totalCount??0),0)??0,{leftLines:n,rightLines:i}=(0,o.useMemo)(()=>(function(e){let t=[],n=[],i=()=>{for(;t.length<n.length;)t.push($.V);for(;n.length<t.length;)n.push($.V)};for(let r of e)switch(r.type){case"ADDITION":n.push(r);break;case"DELETION":t.push(r);break;case"CONTEXT":case"INJECTED_CONTEXT":i();let[e,a]=[{...r,threadsData:void 0,annotationsData:void 0},{...r,threadsData:r.threadsData?{...r.threadsData,threads:r.threadsData.threads,totalCommentsCount:r.threadsData.totalCommentsCount,totalCount:r.threadsData.totalCount}:void 0}];t.push(e),n.push(a);break;case"HUNK":i(),t.push(r),n.push(r)}return i(),{leftLines:t,rightLines:n}})(e),[e,t]);return{leftLines:n,rightLines:i}}(s),{ghostUser:S}=W();P({clearSelectedDiffRowRange:r,containerRef:b,fileAnchor:l,isSplitDiff:!0,leftLines:N,replaceSelectedDiffRowRangeFromGridCells:p,rightLines:w,selectedDiffRowRange:g,updateSelectedDiffRowRange:C});let k=(0,o.useMemo)(()=>{if(g)return(0,I.A)({selectedDiffRowRange:g,leftLines:N,rightLines:w,isNumberCell:!0})},[g,N,w]);(0,o.useEffect)(()=>{j(l,s)},[s,l,j]);let E=(0,o.useMemo)(()=>y(N),[N]),A=new Map,_=new Map,T=new Map;for(let t=0;t<(e?.length??0);t++){let n=e?.[t];n&&(A.has(n.leftLineNumber)?A.get(n.leftLineNumber)?.push(n):-1!==n.leftLineNumber&&A.set(n.leftLineNumber,[n]),T.has(n.hunkLineNumber)?T.get(n.hunkLineNumber)?.push(n):n.isHunk&&T.set(n.hunkLineNumber,[n]),_.has(n.rightLineNumber)?_.get(n.rightLineNumber)?.push(n):-1!==n.rightLineNumber&&_.set(n.rightLineNumber,[n]))}let R=[];for(let e=0;e<N.length;e++){let r=N[e],s=w[e],p=N[e-1],g=(0,c.Po)(N[e+1])?w[e+1]:N[e+1],y=(0,c.qK)(r)&&"HUNK"===r.type,b=(0,c.qX)(l,r,s),j=(0,c.Po)(r)?(0,c.Po)(s)?void 0:s:r;if(!j)continue;let C=(0,c.Po)(r)?void 0:r.threadsData,I=(0,c.Po)(s)?void 0:s.threadsData,{currentHunk:F,nextHunk:O,previousHunk:P}=x(j,E),$=A.get((0,c.Po)(r)?-2:r.left??-2),M=_.get((0,c.Po)(s)?-2:s.right??-2),B=T.get(j.blobLineNumber),U=B?.[0]?.rightLineNumber===s?.right?n:void 0,H=$?.[0]?.leftLineNumber===r?.left?n:void 0,V=M?.[0]?.rightLineNumber===s?.right?n:void 0,z=e2(r,s,"LEFT"),G=e2(r,s,"RIGHT"),K=D(I,S),W=D(C,S),q={currentHunk:F,diffEntryId:a,fileAnchor:l,fileLineCount:d,filePath:m,isRowSelected:k?.isRowSelected(r)||k?.isRowSelected(s),modifiedLineThreadsConnectionId:I?.__id,nextHunk:O,originalLineThreadsConnectionId:C?.__id,previousHunk:P,rowId:b,isSplit:!0,diffContext:t};R.push((0,i.jsx)(o.Fragment,{children:(0,i.jsx)("tr",{className:"diff-line-row",children:y?(0,i.jsx)(L,{...q,diffLine:j,modifiedLineThreads:K,originalLineThreads:W,children:(0,i.jsx)(tm,{nextLine:g,prevLine:p,focusedSearchResult:U,resultsForLine:B})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(L,{...q,diffLine:r,isLeftSide:!0,children:(0,i.jsx)(to,{summary:z,copilotChatReferenceData:v,fileAnchor:l,filePath:m,handleDiffRowClick:f,diffLineFirstSelected:u,handleDiffSideCellSelectionBlocking:h,resultsForLine:$,focusedSearchResult:H})}),(0,i.jsx)(L,{...q,diffLine:s,children:(0,i.jsx)(to,{summary:G,copilotChatReferenceData:v,fileAnchor:l,filePath:m,diffLineFirstSelected:u,handleDiffRowClick:f,handleDiffSideCellSelectionBlocking:h,resultsForLine:M,focusedSearchResult:V})})]})})},b))}return(0,i.jsx)(i.Fragment,{children:R})});try{th.displayName||(th.displayName="SplitDiffLines")}catch{}let tp=(0,o.memo)(function({searchResults:e,diffContext:t="pr",focusedSearchResult:n,clearSelectedDiffRowRange:r,diffEntryId:a,diffLines:l,diffLineFirstSelected:d,fileLineCount:u,fileAnchor:m,filePath:f,tableRef:h,selectedDiffRowRange:p,handleDiffRowClick:g,updateDiffLines:b,updateSelectedDiffRowRange:j,replaceSelectedDiffRowRangeFromGridCells:C,copilotChatReferenceData:v}){P({clearSelectedDiffRowRange:r,containerRef:h,fileAnchor:m,isSplitDiff:!1,leftLines:l,replaceSelectedDiffRowRangeFromGridCells:C,selectedDiffRowRange:p,updateSelectedDiffRowRange:j});let N=(0,o.useMemo)(()=>{if(p)return(0,I.A)({selectedDiffRowRange:p,leftLines:l,isNumberCell:!0})},[p,l]),w=(0,o.useMemo)(()=>y(l.map(e=>e)),[l]);(0,o.useEffect)(()=>{b(m,l)},[l,m,b]);let S=new Map;for(let t=0;t<(e?.length??0);t++){let n=e?.[t];n&&(e&&S.has(n.diffLineNumIndex)?S.get(n.diffLineNumIndex)?.push(n):e&&S.set(n.diffLineNumIndex,[n]))}let k=l.map((e,r)=>{let h=l[r+1],p=l[r-1],y="HUNK"===e.type,b=(0,s.IQ)(m,(0,s.XU)(e.type),e.blobLineNumber),{currentHunk:j,nextHunk:C,previousHunk:k}=x(e,w),D=S.get(r),I=r===D?.[0]?.diffLineNumIndex?n:void 0,E=e2(e,e,"RIGHT"),A=N?.isRowSelected(e),_=(0,c.qX)(m,e,e),T={diffEntryId:a,diffLine:e,currentHunk:j,fileAnchor:m,fileLineCount:u,filePath:f,isLeftSide:"DELETION"===e.type,isSplit:!1,nextHunk:C,previousHunk:k,diffContext:t};return(0,i.jsx)(o.Fragment,{children:(0,i.jsx)("tr",{className:"diff-line-row",children:(0,i.jsx)(L,{...T,isRowSelected:A,rowId:_,children:y?(0,i.jsx)(tm,{nextLine:h,prevLine:p,focusedSearchResult:I,resultsForLine:D},r):(0,i.jsx)(td,{filePath:f,copilotChatReferenceData:v,handleDiffRowClick:g,diffLineFirstSelected:d,lineAnchor:b,resultsForLine:D,focusedSearchResult:I,summary:E},r)})})},r)});return(0,i.jsx)(i.Fragment,{children:k})});try{tp.displayName||(tp.displayName="UnifiedDiffLines")}catch{}let tg={tableLayoutFixed:"DiffLines-module__tableLayoutFixed--YZcIJ",compact:"DiffLines-module__compact--wEEom"};function tx({diffAnchor:e,children:t}){return(0,i.jsx)("div",{className:"fgColor-muted p-2","data-diff-anchor":e,children:t})}let ty=(0,o.memo)(function({searchResults:e,diffContext:t="pr",focusedSearchResult:n,diffEntryData:a,diffLinesManuallyUnhidden:s,baseHelpUrl:o,onHandleLoadDiff:c,copilotChatReferenceData:u,...m}){let f=`diff-${a.pathDigest}`;if(a.isBinary)return(0,i.jsx)(tx,{diffAnchor:f,children:"Binary file not shown."});if((0,r.dK)(a))return(0,i.jsx)(tx,{diffAnchor:f,children:"File renamed without changes."});if((0,r.Jc)(a))return(0,i.jsx)(tx,{diffAnchor:f,children:"File copied without changes."});if((0,r.Sn)(a,a.status,a.oldTreeEntry?.mode,a.newTreeEntry?.mode))return(0,i.jsx)(tx,{diffAnchor:f,children:"File mode changed."});if((0,r.HI)(a))return(0,i.jsx)(tx,{diffAnchor:f,children:(0,r.l_)(a.truncatedReason)});if((0,r.s8)(a))return(0,i.jsx)(tx,{diffAnchor:f,children:"Whitespace-only changes."});if(!s&&(0,r.lO)(a))return(0,i.jsx)(h,{diffAnchor:f,onLoadDiff:c,children:"This file was deleted."});if(!s&&(0,r.xW)(a))return(0,i.jsxs)(h,{diffAnchor:f,helpText:"customizing how changed files appear on GitHub.",helpUrl:`${o}/github/administering-a-repository/customizing-how-changed-files-appear-on-github`,onLoadDiff:c,children:["Some generated files are not rendered by default. Learn more about"," "]});if(a.isTooBig){if("commit"===t&&0===a.diffLines.length)return s?(0,i.jsxs)(tx,{diffAnchor:f,children:["Diff is too big to render. To view,"," ",(0,i.jsx)(l.A,{inline:!0,href:`${o}/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally`,children:"check out this pull request locally."})]}):(0,i.jsx)(h,{diffAnchor:f,onLoadDiff:c,children:"Large diffs are not rendered by default."});if("pr"===t)return a.diffLines.length>0?(0,i.jsx)(h,{diffAnchor:f,onLoadDiff:c,children:"Large diffs are not rendered by default."}):(0,i.jsxs)(tx,{diffAnchor:f,children:["Diff is too big to render. To view,"," ",(0,i.jsx)(l.A,{inline:!0,href:`${o}/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally`,children:"check out this pull request locally."})]})}return a.diffLines?(0,i.jsx)(K,{...m,children:(0,i.jsx)(d.Y,{children:(0,i.jsx)(tb,{diffAnchor:f,diffContext:t,diffEntryData:a,viewerData:m.viewerData,focusedSearchResult:n,searchResults:e,copilotChatReferenceData:u})})}):null});function tb({diffAnchor:e,viewerData:t,diffEntryData:n,searchResults:r,focusedSearchResult:l,copilotChatReferenceData:m,diffContext:f}){let h=(0,o.useRef)(null),[g,x]=(0,o.useState)(null),y=n.newTreeEntry?.lineCount??n.oldTreeEntry?.lineCount??0,b=(0,o.useMemo)(()=>{let e=n.diffLines[n.diffLines.length-1];return e?.blobLineNumber&&e.blobLineNumber<y?n.diffLines.concat({__id:p.finalLineId,blobLineNumber:e.blobLineNumber+1,left:null,right:null,type:"HUNK",html:"",text:""}):n.diffLines},[n.diffLines,y]),{diffViewPreference:j,lineSpacingPreference:C,tabSizePreference:N}=t,{selectedDiffRowRange:S,replaceSelectedDiffRowRange:L,replaceSelectedDiffRowRangeFromGridCells:k,clearSelectedDiffRowRange:D,updateDiffLines:I,updateSelectedDiffRowRange:E}=(0,d.o)(),A=e===S?.diffAnchor;(0,o.useEffect)(()=>{if(!A)return;let e=(0,c.On)(S,b);e&&e!==S&&L(e)},[b,S,A,L]);let _=v.cg?.location.search,T=(0,o.useMemo)(()=>"split"===new URLSearchParams(_).get("diff")||"split"===j,[_,j]),R=(0,s.c7)(b),F=(0,o.useCallback)(e=>{x(e)},[x]),O=(0,o.useRef)(null),P=(0,V.U)(e=>{e.target&&O&&!h.current?.contains(e.target)&&(O.current=null)});(0,o.useEffect)(()=>(v.XC?.addEventListener("mouseup",P),()=>v.XC?.removeEventListener("mouseup",P)),[P]),(0,o.useEffect)(()=>()=>v.XC?.removeEventListener("mousedown",P),[]);let $=(0,o.useCallback)((t,n,i,r,a)=>{!function(e){let t=document.getElementById("__primerPortalRoot__");return!!t&&!!e&&t.contains(e)}(t.target)&&(t.defaultPrevented||E(e,n,i,r,a))},[e,E]),M={searchResults:r,diffContext:f,focusedSearchResult:l,clearSelectedDiffRowRange:D,diffEntryId:n.objectId,diffLines:b,fileAnchor:e,fileLineCount:y,filePath:n.path,handleDiffRowClick:$,diffLineFirstSelected:O,handleDiffSideCellSelectionBlocking:F,replaceSelectedDiffRowRangeFromGridCells:k,selectedDiffRowRange:A?S:null,tableRef:h,updateDiffLines:I,updateSelectedDiffRowRange:E,copilotChatReferenceData:m};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(w,{tableRef:h}),(0,i.jsx)("table",{ref:h,className:(0,u.$)("tab-size","width-full",tg.tableLayoutFixed,{[tg.compact]:"compact"===C}),"data-block-diff-cell-selection":g,"data-diff-anchor":e,"data-tab-size":N,"data-paste-markdown-skip":!0,role:"grid",style:{"--line-number-cell-width":`${R}px`,"--line-number-cell-width-unified":`${2*parseFloat(R)}px`},children:T?(0,i.jsx)(a.wj,{lineWidth:R,children:(0,i.jsx)(th,{...M})}):(0,i.jsx)(a.Qe,{lineWidth:R,children:(0,i.jsx)(tp,{...M})})})]})}try{tx.displayName||(tx.displayName="PlainTextStatus")}catch{}try{ty.displayName||(ty.displayName="DiffLines")}catch{}try{tb.displayName||(tb.displayName="CodeDiffLines")}catch{}var tj=n(67138),tC=n(30729);let tv={defaultStyles:"DiffFind-module__defaultStyles--gxyWR"},tN=(0,o.memo)(function({currentPathDigestIndex:e,searchTerm:t,searchResults:n,setSearchTerm:r,focusedSearchResult:a,currentIndex:s,setCurrentIndex:l,setFocusedSearchResult:d,scrollDiffCellIntoView:c}){let u=(0,o.useRef)([]),m=(0,o.useRef)(0),f=()=>{r(""),d(void 0),e.current=0},h=(0,i.jsxs)("div",{className:"d-flex flex-row flex-justify-center flex-items-center",children:[t&&(0,i.jsxs)("span",{className:"text-small fgColor-subtle m-2 text-center",children:[0===n.size||void 0===a?0:s+1,"/",m.current]}),!t&&(0,i.jsx)("span",{className:"text-small fgColor-subtle m-2 text-center pr-4",children:"\xa0"}),t&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ec.K,{size:"small",variant:"invisible",onClick:()=>{p(-1)},icon:z.ChevronUpIcon,"aria-label":"Up","data-testid":"up-search"}),(0,i.jsx)(ec.K,{size:"small",variant:"invisible",onClick:()=>{p(1)},icon:z.ChevronDownIcon,"aria-label":"Down","data-testid":"down-search"})]})]}),p=t=>{if(void 0===a||""===a.pathDigest){e.current=0,d({pathDigest:u.current[0]??"",indexWithinDigest:0});return}1===t?(l(s===m.current-1?0:s+1),a.indexWithinDigest===n.get(a.pathDigest).length-1?(e.current=e.current+1,e.current===u.current.length&&(e.current=0),a.pathDigest=u.current[e.current]??"",a.indexWithinDigest=0):a.indexWithinDigest=a.indexWithinDigest+1):(l(0===s?m.current-1:s-1),0===a.indexWithinDigest?(e.current=e.current-1,-1===e.current&&(e.current=u.current.length-1),a.pathDigest=u.current[e.current]??"",a.indexWithinDigest=n.get(a.pathDigest).length-1):a.indexWithinDigest=a.indexWithinDigest-1),d(a)};return(0,o.useEffect)(()=>{u.current=Array.from(n.keys()),e.current=0,d({pathDigest:u.current[0]??"",indexWithinDigest:0});let t=0;for(let e of n.values())t+=e.length;m.current=t},[e,n,n.size,d]),(0,o.useEffect)(()=>{n.size>0&&void 0!==a&&c(a)},[n,a,s]),(0,i.jsxs)("div",{className:tv.defaultStyles,children:[(0,i.jsx)(H.ak,{commands:{"pull-requests-diff-view:jump-to-next-result-alternate":()=>p(1),"pull-requests-diff-view:jump-to-previous-result-alternate":()=>p(-1)}}),(0,i.jsx)(H.tL,{commands:{"pull-requests-diff-view:jump-to-next-result":()=>p(1),"pull-requests-diff-view:jump-to-previous-result":()=>p(-1)},children:(0,i.jsx)(tj.A,{className:"border-0 box-shadow-none",style:{width:"100%"},validationStatus:m.current>1e3?"error":void 0,type:"text",leadingVisual:()=>(0,i.jsx)(tC.A,{icon:z.SearchIcon,"aria-hidden":"true"}),autoComplete:"off",name:"Find in commit input","aria-label":"Search within code",placeholder:"Search within code",value:t,onChange:e=>{e.target.value?(r(e.target.value),l(0)):f()},block:!0,trailingAction:h})})]})});try{tN.displayName||(tN.displayName="DiffFind")}catch{}var tw=n(59972);function tS({dependencyDiffPath:e,fileRendererInfo:t,proseDiffHtml:n,loading:r}){return r?(0,i.jsx)("div",{className:"d-flex flex-justify-center p-4",children:(0,i.jsx)(ej.A,{size:"large"})}):n?(0,i.jsx)("div",{className:"prose-diff position-relative",children:(0,i.jsx)(U.oG,{html:n})}):t?(0,i.jsx)(tw.default,{...t}):e?(0,i.jsx)("include-fragment",{src:e,children:(0,i.jsxs)("div",{className:"text-center py-3",children:[(0,i.jsx)(ej.A,{size:"medium"}),(0,i.jsx)("p",{className:"color-fg-muted my-2",children:"Loading Dependency Review..."})]})}):(0,i.jsx)("div",{className:"d-flex flex-justify-center p-4",children:"This rich diff is not supported at the moment."})}try{tS.displayName||(tS.displayName="RichDiff")}catch{}let tL=(0,o.createContext)({diffFindOpen:!1,setDiffFindOpen:()=>void 0});function tk({children:e,searchTerm:t,setSearchTerm:n}){let r=(0,o.useRef)(""),[a,s]=(0,o.useState)(!1),l=(0,o.useCallback)(e=>{e&&""===t&&""!==r.current?n(r.current):e||""===t||(r.current=t,n("")),s(e)},[t,n]),d=(0,o.useMemo)(()=>({diffFindOpen:a,setDiffFindOpen:l}),[a,l]);return(0,i.jsx)(tL.Provider,{value:d,children:e})}try{tL.displayName||(tL.displayName="DiffFindOpenContext")}catch{}try{tk.displayName||(tk.displayName="DiffFindOpenProvider")}catch{}var tD=n(37363),tI=n(76391);function tE({data:e}){let{query:t,diffEntryInfo:n,currentDiffEntryData:i}=e;return{matchingDiffs:i?function(e,t,n){if(0===n.size)return new Map;let i=n.size>=200,r={},a=e.reduce((n,i,a)=>{if(r[a])return n;r[a]=!0;let s=tT(t,[e[a]]),l=s.next();for(;!l.done&&n.size<200;){let{resultsWithinDiff:t}=l.value;n.set(e[a]?.pathDigest??"",t),l=s.next()}return n},new Map);if(a.size<200&&i){let n=tT(t,e,a.size),i=n.next();for(;!i.done&&a.size<200;){let{resultsWithinDiff:t,diff:r}=i.value;a.set(e[r]?.pathDigest??"",t),i=n.next()}}return a}(n,t_(t),i):function(e,t){let n=new Map,i=tT(t,e),r=i.next();for(;!r.done&&n.size<200;){let{resultsWithinDiff:t,diff:a}=r.value;n.set(e[a]?.pathDigest??"",t),r=i.next()}return n}(n,t_(t)),query:t}}var tA=function(e){return e[e.Text=0]="Text",e[e.Symbol=1]="Symbol",e}(tA||{});function t_(e){return{kind:0,regexp:RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")}}function*tT(e,t,n=0){for(let i=n;i<t.length;i++){let n=t[i],r=[],a=0;for(let s=0;s<n.diffLines.length;s++){let l,o;l=t[i]?.diffLines[s]?.type==="HUNK"?n.diffLines[s]?.text:n.diffLines[s]?.text?.substring(1);let d=n.diffLines[s];for(;l&&null!==(o=e.regexp.exec(l));){let e=o[0],t=o.index;r.push({pathDigest:n.pathDigest,indexWithinPathDigest:a,matchContent:e,column:t,diffLineNumIndex:s,isHunk:d?.type==="HUNK",hunkLineNumber:d?.blobLineNumber??-1,leftLineNumber:d?.type!=="ADDITION"?d?.left??-1:-1,rightLineNumber:d?.type!=="DELETION"?d?.right??-1:-1,columnEnd:t+e.length,text:l}),a++}}0!==r.length&&(yield{diff:i,resultsWithinDiff:r})}}function tR(e,t,n,i){let[r,a]=(0,o.useState)(new Map),[s,l]=(0,o.useState)(void 0),[d,c]=(0,o.useState)(0),u=o.useRef();!u.current&&t&&(u.current=new tI.N(new tD.z(n,tE),200,e=>1!==e.query.length));let m=(0,o.useRef)(t);m.current=t;let f=(0,o.useRef)("");(0,o.useEffect)(()=>function(){u.current?.terminate()},[]);let h=(0,o.useRef)([]);return u.current&&e!==h.current&&(u.current.onResponse=e=>{e.query===m.current&&(a(e.matchingDiffs),f.current=m.current)},h.current=e),(0,o.useEffect)(()=>{if(!e||!u.current||!f.current||""===f.current){a(new Map),l(void 0);return}a(new Map),l(void 0),u.current.post({query:f.current,diffEntryInfo:e,currentDiffEntryData:void 0})},[e?.length,e]),(0,o.useEffect)(()=>{if(e&&u.current){if(""===t)a(new Map),l(void 0),c(0),f.current="";else{if(!(t.length>0&&t.length<=1e3))return;let n=f.current.length>0&&t.startsWith(f.current);u.current.post({query:t,diffEntryInfo:e,currentDiffEntryData:n?r:void 0}),c(0)}}},[t,i]),{focusedSearchResult:s,setFocusedSearchResult:l,searchResults:r,currentIndex:d,setCurrentIndex:c}}},77321:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(51888),r=n(9393);function a({selectedDiffRowRange:e,leftLines:t,rightLines:n,isNumberCell:a}){let s=!!n,{startOrientation:l,endOrientation:o}=e;if(e.startLineNumber===e.endLineNumber&&e.startOrientation===e.endOrientation&&!a)return{isRowSelected:()=>!1,selectedRightLines:[],selectedLeftLines:[]};let d=f(l).findIndex(t=>(0,r.a2)(t,e.startLineNumber,e.startOrientation)),c=f(o).findIndex(t=>(0,r.a2)(t,e.endLineNumber,e.endOrientation)),u=d>=0&&c>=0;function m(e){if(!u||(0,r.Po)(e))return!1;let t=f((0,i.XU)(e.type)).indexOf(e);return t>=d&&t<=c}function f(e){return s&&"left"!==("string"==typeof e?e:(0,i.XU)(e.type))?n:t}let h=f("left").filter(e=>m(e)),p=f("right").filter(e=>m(e));return{isRowSelected:m,selectedRightLines:p,selectedLeftLines:h}}},76515:(e,t,n)=>{function i(e,t){return`${"left"===t?"L":"R"}${e}`}function r(e){let t=e.match(/^#?(diff-[a-f0-9]+)/);return t?.[1]}function a(e){let t=e.match(/^#?(r\d+)/),n=t?.[1];return n?parseInt(n.slice(1)):void 0}function s(e){let t=e.match(/^#annotation_(\d+)/),n=t?.[1];return n?parseInt(n):void 0}function l(e){let t=function(e){let t=e.match(/^#?(diff-[a-f0-9]+)(L|R)(\d+)(?:-(L|R)(\d+))?$/i);if(null!=t&&6===t.length)return t;let n=e.match(/^#?(discussion-diff-[0-9]+)(L|R)(\d+)(?:-(L|R)(\d+))?$/i);return null!=n&&6===n.length?n:null}(e);if(t){let e=t[1],n=t[2]?"L"===t[2]?"left":"right":void 0,i=t[3]?parseInt(t[3]):void 0;if(!e||!n||void 0===i)return;return{diffAnchor:e,startOrientation:n,startLineNumber:i,endOrientation:(t[4]?"L"===t[4]?"left":"right":void 0)??n,endLineNumber:(t[5]?parseInt(t[5]):void 0)??i,firstSelectedLineNumber:i,firstSelectedOrientation:n}}}function o(e){c(d(e))}function d(e){let t=i(e.startLineNumber,e.startOrientation),n=`${e.diffAnchor}${t}`;if(e.endLineNumber!==e.startLineNumber||e.endOrientation!==e.startOrientation){let t=i(e.endLineNumber,e.endOrientation);n+=`-${t}`}return n}function c(e){let t=`#${e}`;if(t===window.location.hash)return;let n=window.location.href;history.replaceState({...history.state},"",t),window.dispatchEvent(new HashChangeEvent("hashchange",{newURL:window.location.href,oldURL:n}))}n.d(t,{Dd:()=>a,N0:()=>s,ZD:()=>l,i8:()=>o,j$:()=>d,pd:()=>r,pk:()=>c})},9393:(e,t,n)=>{n.d(t,{Ji:()=>f,Ls:()=>w,Mk:()=>p,On:()=>o,Po:()=>u,S4:()=>b,YY:()=>j,ZC:()=>g,_S:()=>h,a1:()=>N,a2:()=>l,j2:()=>x,oE:()=>C,pI:()=>y,qK:()=>m,qX:()=>d,u6:()=>c});var i=n(51888),r=n(12480),a=n(6024),s=n(76515);function l(e,t,n){return"left"===n?!u(e)&&e.left===t:!u(e)&&(0,i.XU)(e.type)===n&&e.right===t}function o(e,t){if(!e)return;if(!t)return e;let n=!1,i=!1,r=!1;for(let a of t)if(a&&(i||(i=l(a,e.startLineNumber,e.startOrientation)),r||(r=l(a,e.endLineNumber,e.endOrientation)),(n=r&&!i)||i&&r))break;return n?{...e,startLineNumber:e.endLineNumber,startOrientation:e.endOrientation,endLineNumber:e.startLineNumber,endOrientation:e.startOrientation}:e}function d(e,t,n){let i=`-${u(t)||"number"!=typeof t.left?"empty":t.left}`,r=n?`-${u(n)||"number"!=typeof n.right?"empty":n.right}`:"";return`${e}${i}${r}`}function c(e,t){return`${e}-${t}`}function u(e){return!!e&&e===a.V}function m(e){return!!e&&e!==a.V}function f(e){return"CONTEXT"===e.type}function h(e,t){let n;switch(t){case"ADDITION":n="+";break;case"DELETION":n="-";break;case"CONTEXT":case"INJECTED_CONTEXT":n=" "}if(!n||!e.startsWith(n))return[e,void 0];let i=e[0];return[e.substring(1),i]}function p(e){let t=[],n=[],i=()=>{for(;t.length<n.length;)t.push(a.V);for(;n.length<t.length;)n.push(a.V)};for(let r of e)switch(r.type){case"ADDITION":n.push(r);break;case"DELETION":t.push(r);break;case"CONTEXT":case"INJECTED_CONTEXT":case"HUNK":i(),t.push(r),n.push(r)}return i(),{leftLines:t,rightLines:n}}function g(e){return new DOMParser().parseFromString(e,"text/html").documentElement.textContent||""}function x({line:e,range:t,fileAnchor:n}){let i;let{origin:r,pathname:a}=window.location;if(t?i=(0,s.j$)(t):e&&(i=function(e,t){let n=["HUNK","CONTEXT","INJECTED_CONTEXT","DELETION"].includes(e.type),i=n?e.left:e.right,r=n?"left":"right";if(null!==i)return(0,s.j$)({diffAnchor:t,endLineNumber:i,endOrientation:r,startLineNumber:i,startOrientation:r,firstSelectedLineNumber:i,firstSelectedOrientation:r})}(e,n)),i)return`${r}${a}#${i}`}function y({includeControlKey:e=!0,includeShiftKey:t,includeOptionKey:n,key:i}){let a=e?`${(0,r.U0)()?"\u2318":"Ctrl + "}`:"";return n&&(a+=`${(0,r.U0)()?"\u2325":"Alt + "}`),t&&(a+=`${(0,r.U0)()?"\u21E7":"Shift + "}`),a+=i}function b({hasThreads:e}){return e?"96px":"30px"}function j({shouldAlignRight:e,lineSpacingPreference:t}){return e?"compact"===t?"12px":"11px":"40px"}function C({includeControlKey:e=!0,includeShiftKey:t,includeOptionKey:n,key:i}){let a="";return e&&(a+=(0,r.U0)()?"Command+":"Control+"),n&&(a+=(0,r.U0)()?"Option+":"Alt+"),t&&(a+="Shift+"),a+=i}let v=["ADDITION","DELETION","CONTEXT"],N=(e,t)=>{if(!e)return!1;let n=t.leftLines.concat(t.rightLines);return n.length>0&&n.includes(e)?n.every(e=>!u(e)&&v.includes(e.type)):!u(e)&&v.includes(e.type)},w=e=>e?e.filter(e=>!u(e)).map(e=>{let[t]=h(g(e.html),e.type);return t}).join("\n"):""},30841:(e,t,n)=>{n.d(t,{K:()=>a});var i=n(51012),r=n(96540);let a=e=>{let t=(0,r.useRef)(e);return(0,i.N)(()=>(t.current=e,()=>t.current=null),[e]),(0,r.useCallback)((...e)=>t.current?.(...e),[])}},52019:(e,t,n)=>{n.d(t,{S:()=>c,n:()=>d});var i=n(96540),r=n(50990),a=n(9393),s=n(71312),l=n(30841),o=n(76919);function d(e){let t=(0,o.Lm)(e),n=(e.subject?.diffLines??[]).filter(e=>t?e.left&&e.left>=t.startLineNumber&&e.left<=t.endLineNumber||e.right&&e.right>=t.startLineNumber&&e.right<=t.endLineNumber:[]),i=n.every(e=>"DELETION"!==e.type),r=n?.map(e=>a._S(e.text,e.type)[0]).join("\n");return{isValidSuggestionRange:n.length>0&&!!i,showSuggestChangesButton:!1,sourceContentFromDiffLines:r,onInsertSuggestedChange:()=>{},shouldInsertSuggestedChange:!1}}function c(e,t,n){let{sendAnalyticsEvent:o}=(0,s.s)(),{getDiffLinesFromLineRange:d,selectedDiffRowRange:c}=(0,r.o)(),u=(0,l.K)(function(n,i){if(!e)return;let r=function(e){if(!e)return"DELETION"!==t.type;if("right"===e.startOrientation&&"right"===e.endOrientation)return!0;if(e.startLineNumber===e.endLineNumber&&e.startOrientation===e.endOrientation)return"DELETION"!==t.type;let n=d(e)?.selectedLeftLines;return!!n?.every(e=>"empty-diff-line"!==e&&"DELETION"!==e.type)}(n);return{isValidSuggestionRange:r,showSuggestChangesButton:r,sourceContentFromDiffLines:r?function(e){let n=d(e)?.selectedRightLines;if(e&&n&&n.length>1)return(0,a.Ls)(n);if(!t)return"";let[i]=(0,a._S)(t.text,t.type);return i}(n):void 0,onInsertSuggestedChange:()=>{o("diff.add_suggested_change","ADD_SUGGESTED_CHANGE_BUTTON")},shouldInsertSuggestedChange:i}});return(0,i.useMemo)(()=>({selectedDiffRowRange:c,configureSuggestedChangesFromLineRange:u,shouldStartNewConversationWithSuggestedChange:n}),[c,u,n])}},6024:(e,t,n)=>{n.d(t,{V:()=>i});let i="empty-diff-line"},60188:(e,t,n)=>{n.d(t,{D:()=>a});var i=n(7572),r=n(97156);function a(e){if(!r.XC)return;let t=r.XC.querySelector("title"),n=r.XC.createElement("title");n.textContent=e,t?t.textContent!==e&&(t.replaceWith(n),(0,i.i)(e)):(r.XC.head.appendChild(n),(0,i.i)(e))}},13894:(e,t,n)=>{n.d(t,{h:()=>C});var i=n(74848),r=n(47139),a=n(94977),s=n(34614),l=n(75177),o=n(91246),d=n(30729),c=n(52464),u=n(14740);function m({reason:e,isViewer:t,hasSignature:n,verificationStatus:r,signatureType:a,signedByGitHub:l,keyExpired:o,keyRevoked:d}){let m=o?(0,i.jsxs)("span",{children:[" The key has expired",d&&(0,i.jsx)("span",{children:" and has been revoked"}),"."]}):d?(0,i.jsx)("span",{children:" The key has been revoked."}):(0,i.jsx)(i.Fragment,{});if("unverified"===r){if(n&&"GPGVERIFY_UNAVAILABLE"===e)return(0,i.jsx)("span",{children:"The commit signature verification service is not available"});if(!n)return(0,i.jsx)("span",{children:"This commit is not signed, but one or more authors requires that any commit attributed to them is signed."});switch(e){case"INVALID":return(0,i.jsx)("span",{children:"The signature in this commit could not be verified. Someone may be trying to trick you."});case"MALFORMED_SIG":return(0,i.jsx)("span",{children:"We were unable to parse the signature in this commit."});case"UNKNOWN_KEY":if(t)return(0,i.jsxs)("span",{children:[(0,i.jsxs)(s.A,{inline:!0,href:"/settings/keys",children:["Upload your public signing ","SshSignature"===a?"SSH":"GPG"," key"]})," ","to verify your signature."]});return(0,i.jsx)("span",{children:"This user has not yet uploaded their public signing key."});case"BAD_EMAIL":return(0,i.jsx)("span",{children:"The email in this signature doesn\u2019t match the committer email."});case"UNVERIFIED_EMAIL":if(t)return(0,i.jsxs)("span",{children:[(0,i.jsx)(s.A,{inline:!0,href:"/settings/emails",children:"Verify your email address"})," ","to verify your signature."]});return(0,i.jsx)("span",{children:"The committer email address is not verified."});case"NO_USER":return(0,i.jsx)("span",{children:"No user is associated with the committer email."});case"UNKNOWN_SIG_TYPE":return(0,i.jsx)("span",{children:"GitHub supports GPG and S/MIME signatures. We don't know what type of signature this is."});case"GPGVERIFY_ERROR":return(0,i.jsx)("span",{children:"We had a problem verifying this signature. Please try again later."});case"NOT_SIGNING_KEY":return(0,i.jsx)("span",{children:"The key that signed this doesn't have usage flags that allow signing."});case"EXPIRED_KEY":return(0,i.jsx)("span",{children:"The key that signed this is expired."});case"OCSP_ERROR":return(0,i.jsx)("span",{children:"We had a problem checking for revoked certificates. Please try again later."});case"OCSP_REVOKED":return(0,i.jsx)("span",{children:"One or more certificates in the chain has been revoked."});case"BAD_CERT":return(0,i.jsx)("span",{children:"The signing certificate or its chain could not be verified."});default:return(0,i.jsx)("span",{children:"We were unable to verify this signature."})}}else if("partially_verified"===r)return l?(0,u.k)()?(0,i.jsxs)("span",{children:["This commit was created on GitHub Enterprise Server and signed with a"," ",(0,i.jsx)(c.A,{sx:{fontWeight:"bold"},children:"verified signature"}),".",m]}):(0,i.jsxs)("span",{children:["This commit was created on GitHub.com and signed with GitHub's"," ",(0,i.jsx)(c.A,{sx:{fontWeight:"bold"},children:"verified signature"}),".",m]}):(0,i.jsxs)("span",{children:["This commit was signed with the committer's ",(0,i.jsx)(c.A,{sx:{fontWeight:"bold"},children:"verified signature"}),".",m]});else if("verified"===r)switch(e){case"VALID":if(!l)return(0,i.jsxs)("span",{children:["This commit was signed with the committer's ",(0,i.jsx)(c.A,{sx:{fontWeight:"bold"},children:"verified signature"}),".",m]});if((0,u.k)())return(0,i.jsxs)("span",{children:["This commit was created on GitHub Enterprise Server and signed with a"," ",(0,i.jsx)(c.A,{sx:{fontWeight:"bold"},children:"verified signature"}),".",m]});return(0,i.jsxs)("span",{children:["This commit was created on GitHub.com and signed with GitHub's"," ",(0,i.jsx)(c.A,{sx:{fontWeight:"bold"},children:"verified signature"}),".",m]});case"OCSP_PENDING":return(0,i.jsx)("span",{children:"This commit was signed with a verified signature, though we're still working on certificate revocation checking."})}return(0,i.jsx)("span",{})}try{m.displayName||(m.displayName="ReasonLabel")}catch{}function f({icon:e,iconColor:t,id:n,reason:r,isViewer:a,hasSignature:s,verificationStatus:o,signatureType:c,signedByGitHub:u,keyExpired:f,keyRevoked:h}){return(0,i.jsxs)(l.A,{id:n,sx:{display:"flex",p:2},"data-testid":"signed-commit-header",children:[(0,i.jsx)(l.A,{sx:{pr:2},children:(0,i.jsx)(d.A,{icon:e,sx:{color:t}})}),(0,i.jsx)(l.A,{sx:{fontSize:1,flexGrow:1},children:(0,i.jsx)(m,{reason:r,isViewer:a,hasSignature:s,verificationStatus:o,signatureType:c,signedByGitHub:u,keyExpired:f,keyRevoked:h})})]})}try{f.displayName||(f.displayName="SignedCommitHeader")}catch{}var h=n(38621),p=n(89169),g=n(22868);function x({keyHex:e,signatureType:t,signer:n,verifiedAt:a,showPartiallyVerifiedMessage:o,signingLinkComponent:u,keyExpired:m,keyRevoked:f}){return(0,i.jsx)(l.A,{sx:{display:"flex"},"data-testid":"signed-commit-footer",children:(0,i.jsx)(l.A,{sx:{fontSize:0,flexGrow:1,maxWidth:"100%"},children:o&&n?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.A,{sx:{py:3},children:(0,i.jsxs)(l.A,{sx:{display:"flex"},children:[(0,i.jsx)(g.r,{src:n.avatar_url,size:20,sx:{mr:2,ml:3}}),(0,i.jsxs)(l.A,{sx:{flex:1},children:[(0,i.jsx)(s.A,{href:`/${n.login}`,sx:{fontSize:0,color:"fg.default",fontWeight:"bold"},children:n.login}),(0,i.jsxs)("span",{children:["'s contribution has been verified via ","SshSignature"===t?"SSH":"GPG"," key."]})]})]})}),(0,i.jsxs)(l.A,{sx:{backgroundColor:"attention.subtle",display:"flex",p:3},children:[(0,i.jsx)(d.A,{icon:h.InfoIcon,sx:{mr:2}}),"We cannot verify signatures from co-authors, and some of the co-authors attributed to this commit require their commits to be signed."]})]}):(0,i.jsxs)(i.Fragment,{children:[n?(0,i.jsx)(l.A,{sx:{px:3,pt:3},children:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(g.r,{src:n.avatar_url,size:20,sx:{mr:2}}),(0,i.jsx)(s.A,{href:`/${n.login}`,sx:{fontSize:1,color:"fg.default",fontWeight:"bold"},children:n.login})]})}):(0,i.jsx)(i.Fragment,{}),(0,i.jsxs)(l.A,{sx:{p:3,flexDirection:"column"},children:[e&&(0,i.jsxs)("div",{children:["SshSignature"===t?"SSH Key Fingerprint:":"GPG Key ID:"," ",(0,i.jsx)(c.A,{sx:{color:"fg.muted"},children:e})]}),a&&(0,i.jsxs)("div",{children:["Verified"," ",(0,i.jsx)(p.A,{datetime:a,threshold:"PT0S",year:"numeric",hour:"2-digit",minute:"2-digit"})]}),e&&(m||f)&&(0,i.jsxs)(l.A,{sx:{py:1},children:[m&&(0,i.jsx)(r.A,{sx:{mr:1},variant:"accent",children:"Expired"}),f&&(0,i.jsx)(r.A,{variant:"attention",children:"Revoked"})]}),u]})]})})})}try{x.displayName||(x.displayName="SignedCommitFooter")}catch{}function y({subject:e,issuer:t,signingLinkComponent:n,verifiedAt:r}){let a,s;return e.organization&&e.organization_unit?a="O/OU":e.organization?a="O":e.organization_unit&&(a="OU"),t.organization&&t.organization_unit?s="O/OU":t.organization?s="O":t.organization_unit&&(s="OU"),(0,i.jsx)(l.A,{sx:{display:"flex"},"data-testid":"smime-commit-footer",children:(0,i.jsxs)(l.A,{sx:{fontSize:0,p:3},children:[(0,i.jsx)(c.A,{sx:{fontWeight:"bold",fontSize:1},children:"Certificate subject"}),(0,i.jsxs)(l.A,{as:"table",sx:{mb:1},children:[e.common_name&&(0,i.jsxs)("tr",{children:[(0,i.jsx)(l.A,{as:"td",sx:{width:"44px",paddingRight:"12px",color:"fg.muted"},children:"CN"}),(0,i.jsx)(l.A,{as:"td",sx:{width:"44px",paddingRight:"12px"},children:e.common_name})]}),e.email_address&&(0,i.jsxs)("tr",{children:[(0,i.jsx)(l.A,{as:"td",sx:{width:"44px",paddingRight:"12px",color:"fg.muted"},children:"emailAddress"}),(0,i.jsx)(l.A,{as:"td",sx:{width:"44px",paddingRight:"12px"},children:e.email_address})]}),a&&(0,i.jsxs)("tr",{children:[(0,i.jsx)(l.A,{as:"td",sx:{width:"44px",paddingRight:"12px",color:"fg.muted"},children:a}),(0,i.jsxs)("td",{children:[e.organization,"O/OU"===a&&"/",e.organization_unit]})]})]}),(0,i.jsx)(c.A,{sx:{fontWeight:"bold",fontSize:1},children:"Certificate issuer"}),(0,i.jsxs)(l.A,{as:"table",sx:{mb:1},children:[t.common_name&&(0,i.jsxs)("tr",{children:[(0,i.jsx)(l.A,{as:"td",sx:{width:"44px",paddingRight:"12px",color:"fg.muted"},children:"CN"}),(0,i.jsx)("td",{children:t.common_name})]}),s&&(0,i.jsxs)("tr",{children:[(0,i.jsx)(l.A,{as:"td",sx:{width:"44px",paddingRight:"12px",color:"fg.muted"},children:s}),(0,i.jsxs)("td",{children:[t.organization,"O/OU"===s&&"/",t.organization_unit]})]})]}),r&&(0,i.jsxs)("div",{children:["Verified"," ",(0,i.jsx)(p.A,{datetime:r,threshold:"PT0S",year:"numeric",hour:"2-digit",minute:"2-digit"})]}),n]})})}try{y.displayName||(y.displayName="SmimeCommitFooter")}catch{}function b(e){var t;let n;let{ariaLabel:r,hasSignature:a,isOpen:d,onDismiss:c,signature:u,verificationStatus:m}=e,{footerLabel:p,footerUrl:g}=(t=u.helpUrl,{footerLabel:"Learn about vigilant mode",footerUrl:`${t}/github/authenticating-to-github/displaying-verification-statuses-for-all-of-your-commits`}),b=u.signatureVerificationReason.toUpperCase(),j=u.signedByGitHub,{icon:C,icon_color:v}="unverified"===m?{icon:h.UnverifiedIcon,icon_color:"fg.muted"}:{icon:h.VerifiedIcon,icon_color:"success.fg"};"unverified"===m||j||(n={avatar_url:u.signerAvatarUrl,login:u.signerLogin});let N=(0,i.jsx)(s.A,{href:g,"data-testid":"signature-link",className:"Link--inTextBlock",children:p});return d?(0,i.jsx)(o.l,{onClose:c,sx:{overflowY:"auto",backgroundColor:"canvas.default",boxShadow:"none"},title:m,width:"small",renderHeader:({dialogLabelId:e,dialogDescriptionId:t})=>(0,i.jsxs)(l.A,{"data-testid":"signed-commit-dialog",sx:{display:"flex",gap:2,alignItems:"flex-start",p:2,backgroundColor:"canvas.subtle",borderBottomWidth:"1px",borderBottomStyle:"solid",borderBottomColor:"border.subtle"},children:[(0,i.jsx)(o.l.Title,{id:e,className:"sr-only",children:r??m}),(0,i.jsx)(f,{reason:b,icon:C,iconColor:v,id:t,verificationStatus:m,isViewer:u.isViewer,hasSignature:a,signatureType:u.signatureType,signedByGitHub:j,keyExpired:u.keyExpired,keyRevoked:u.keyRevoked}),(0,i.jsx)(o.l.CloseButton,{onClose:c})]}),renderBody:()=>(0,i.jsx)(o.l.Body,{sx:{padding:0},children:"GpgSignature"===u.signatureType||"SshSignature"===u.signatureType?(0,i.jsx)(x,{keyHex:u.keyId,signatureType:u.signatureType,signer:n,verifiedAt:u.verifiedAt,showPartiallyVerifiedMessage:"partially_verified"===m,signingLinkComponent:N,keyExpired:u.keyExpired,keyRevoked:u.keyRevoked}):"SmimeSignature"===u.signatureType&&u.signatureCertificateSubject&&u.signatureCertificateIssuer?(0,i.jsx)(y,{issuer:u.signatureCertificateIssuer,subject:u.signatureCertificateSubject,signingLinkComponent:N,verifiedAt:u.verifiedAt}):(0,i.jsx)(l.A,{sx:{display:"flex"},children:(0,i.jsx)(l.A,{sx:{fontSize:0,p:3},children:N})})})}):null}try{b.displayName||(b.displayName="SignedCommitDialog")}catch{}var j=n(96540);function C({hasSignature:e,verificationStatus:t,signature:n,commitOid:r,badgeSize:s="small"}){let[l,o]=(0,j.useState)(!1),d=(0,j.useRef)(null);if(!t||!n)return(0,i.jsx)(a.A,{"aria-label":"Verification status not available",direction:"n",noDelay:!0,children:(0,i.jsx)(N,{verificationStatus:"error",labelProps:{size:"small"}})});if("unsigned"===t)return(0,i.jsx)(i.Fragment,{});let c=(0,i.jsx)(N,{labelProps:{as:"button",onClick:()=>o(!0),ref:d,size:s,sx:{cursor:"pointer"}},verificationStatus:t});return(0,i.jsxs)(i.Fragment,{children:[c,l&&(0,i.jsx)(b,{isOpen:l,onDismiss:()=>{o(!1),setTimeout(()=>{d.current?.focus()},0)},verificationStatus:t,signature:n,hasSignature:e,ariaLabel:`${t.replace("_"," ")}: ${r.slice(0,7)}`})]})}let v={verified:{label:"Verified",variant:"success"},unverified:{label:"Unverified",variant:"attention"},partially_verified:{label:"Partially verified",variant:"success"},error:{label:"Verification error",variant:"secondary"}},N=(0,j.forwardRef)(({verificationStatus:e,labelProps:t},n)=>{let a=v[e];return a?(0,i.jsx)(r.A,{ref:n,variant:a.variant,...t,children:a.label}):(0,i.jsx)(i.Fragment,{})});N.displayName="VerificationLabel";try{C.displayName||(C.displayName="SignedCommitBadge")}catch{}},27500:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(96540);function r({focusRowRef:e,mouseRowRef:t}){let[n,r]=i.useState(!1);return i.useEffect(()=>{if(e.current&&t.current){let n=()=>{let t=e.current?.querySelector(".PRIVATE_TreeView-item-content-text");t?.scrollWidth!==t?.offsetWidth&&r(!0)};e.current.onfocus=()=>{n()},e.current.onblur=()=>{r(!1)},t.current.onmouseenter=()=>{n()},t.current.onmouseleave=()=>{r(!1)}}},[e,t]),n}},52876:(e,t,n)=>{n.d(t,{T:()=>b});var i=n(74848),r=n(22868),a=n(38621),s=n(89323),l=n(75177),o=n(80497),d=n(67138),c=n(30595),u=n(65481),m=n(30729),f=n(96540),h=n(76024);let p=f.memo(function({user:e,isCurrent:t,onSelect:n}){return(0,i.jsxs)(o.l.Item,{selected:t,onSelect:()=>{n&&n(e)},children:[(0,i.jsx)(o.l.LeadingVisual,{children:(0,i.jsx)(r.r,{src:e.primaryAvatarUrl,square:e.path.startsWith("/apps/")})}),e.login,(0,i.jsx)(o.l.Description,{truncate:!0,children:e.name})]})});try{p.displayName||(p.displayName="UserItem")}catch{}function g(e){return e.users.length>20?(0,i.jsx)(y,{...e}):(0,i.jsx)(x,{...e})}function x({users:e,currentUser:t,onSelect:n,sx:r}){return(0,i.jsx)(l.A,{sx:{maxHeight:330,overflowY:"auto",...r},children:e.map(e=>(0,i.jsx)(p,{user:e,isCurrent:e.login===t?.login,onSelect:n},e.login))})}function y({users:e,currentUser:t,onSelect:n,sx:r}){return(0,i.jsx)(h.F,{items:e,itemHeight:33,sx:{maxHeight:330,overflowY:"auto",...r},makeKey:e=>e.login,renderItem:e=>(0,i.jsx)(p,{user:e,isCurrent:e.login===t?.login,onSelect:n},e.login)})}try{g.displayName||(g.displayName="UsersList")}catch{}try{x.displayName||(x.displayName="FullUsersList")}catch{}try{y.displayName||(y.displayName="VirtualUsersList")}catch{}function b(e){let{defaultText:t,usersState:n,currentUser:d,onSelect:c,hotKey:u,onOpenChange:h,renderCustomFooter:p,size:x,showTypedInUser:y=!1,width:b="large",label:w=""}=e,[S,L]=(0,f.useState)(""),k=function(e,t){if(!e)return[];let n=t.trim().toLowerCase();return n?e.filter(e=>e.login.toLowerCase().includes(n)||e.name?.toLowerCase().includes(n)):e}(n.users,S);return(0,i.jsx)("div",{children:(0,i.jsxs)(s.W,{onOpenChange:h,children:[(0,i.jsx)(s.W.Button,{"data-hotkey":u,size:x,"data-testid":"user-selector-button",children:(0,i.jsxs)(l.A,{sx:{display:"flex"},children:[(0,i.jsx)(l.A,{sx:{mr:2},children:d?(0,i.jsx)(r.r,{size:16,src:d.primaryAvatarUrl,square:d.path.startsWith("/apps/")}):(0,i.jsx)(m.A,{icon:a.PeopleIcon,size:"small",sx:{color:"fg.muted"}})}),(0,i.jsx)(l.A,{sx:{maxWidth:125,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:d?(0,i.jsxs)("span",{children:[w,d.login]}):(0,i.jsx)("span",{children:t})})]})}),(0,i.jsx)(s.W.Overlay,{width:b,children:(0,i.jsxs)(o.l,{showDividers:!0,selectionVariant:"single",children:[(0,i.jsx)(j,{defaultText:S,onFilterChange:L}),(0,i.jsx)(o.l.Divider,{}),n.loading?(0,i.jsx)(C,{}):n.error?(0,i.jsx)(v,{}):0===k.length?(0,i.jsx)(N,{showTypedInUser:y,filterText:S,onSelect:c}):(0,i.jsx)(g,{users:k,currentUser:d,onSelect:c,sx:p?{pb:"10px",pt:1}:{pt:1}}),p&&(0,i.jsx)(o.l.Divider,{sx:{marginTop:0}}),p?.()]})})]})})}function j({onFilterChange:e,defaultText:t}){return(0,i.jsx)(o.l.Group,{sx:{px:2},children:(0,i.jsx)(d.A,{leadingVisual:a.SearchIcon,value:t,sx:{width:"100%"},placeholder:"Find a user...",onChange:t=>e(t.target.value)})})}function C(){return(0,i.jsx)(l.A,{sx:{display:"flex",justifyContent:"center",p:2},children:(0,i.jsx)(c.A,{size:"medium","aria-label":"Loading users..."})})}function v(){return(0,i.jsx)(u.A,{variant:"danger",children:"Could not load users"})}function N({showTypedInUser:e,filterText:t,onSelect:n}){return e?(0,i.jsx)(o.l.Item,{sx:{display:"flex",justifyContent:"center",mb:2},onSelect:()=>{n&&n({login:t,name:t,path:"",primaryAvatarUrl:""})},children:(0,i.jsxs)(i.Fragment,{children:["Filter on author\xa0",(0,i.jsx)(l.A,{as:"span",sx:{fontWeight:600},children:t})]})}):(0,i.jsx)(l.A,{sx:{p:3,display:"flex",justifyContent:"center"},children:"Nothing to show"})}try{b.displayName||(b.displayName="UserSelector")}catch{}try{j.displayName||(j.displayName="UserFilter")}catch{}try{C.displayName||(C.displayName="Loading")}catch{}try{v.displayName||(v.displayName="LoadingFailed")}catch{}try{N.displayName||(N.displayName="UsersZeroState")}catch{}},7148:(e,t,n)=>{n.d(t,{P:()=>s});var i=n(74848),r=n(75177);let a={reason:"readonly-comment-box-module__reason--CzzUh"};function s({reason:e,icon:t,...n}){return(0,i.jsx)(r.A,{className:"blankslate",sx:{border:"1px solid",borderColor:"neutral.muted",borderRadius:2,backgroundColor:"canvas.default",boxShadow:"shadow.small"},...n,children:(0,i.jsxs)(r.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:"fg.muted"},children:[t&&(0,i.jsx)(t,{size:24}),(0,i.jsx)("div",{className:a.reason,children:e})]})})}try{s.displayName||(s.displayName="ReadonlyCommentBox")}catch{}},96711:(e,t,n)=>{n.d(t,{z:()=>a});var i=n(74848),r=n(75177);let a=({onClick:e,id:t,children:n})=>(0,i.jsx)(r.A,{as:"button",type:"button",id:t,sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"left",fontWeight:400,color:"fg.muted",width:"100%",backgroundColor:"canvas.default",border:"1px solid",borderColor:"border.default",cursor:"text",borderRadius:2,height:"var(--control-medium-size)",lineHeight:"var(--text-body-lineHeight-medium)",px:2},onClick:e,children:n});try{a.displayName||(a.displayName="CompactCommentButton")}catch{}},94034:(e,t,n)=>{n.d(t,{d:()=>a});var i=n(74848),r=n(1946);function a({status:e,oid:t,repo:n,badgeProps:a={},descriptionString:s=""}){let[l,o]=(0,r.ym)(t,n);return e?(0,i.jsx)(r.B6,{disablePopover:!1,size:"small",statusRollup:e,buttonSx:{height:"18px",color:"fg.muted",p:"2px"},combinedStatus:l,descriptionText:s,onWillOpenPopup:o,...a}):null}try{a.displayName||(a.displayName="AsyncChecksStatusBadge")}catch{}},2003:(e,t,n)=>{n.d(t,{N:()=>en,$:()=>ei});var i=n(74848),r=n(96540),a=n(53935),s=n(89504),l=n(86584),o=n(97156),d=n(38621),c=n(65481),u=n(55847),m=n(12528),f=n(20053),h=n(15617),p=n(1719);let g={"commit-discussion-comments":"Comment-module__commit-discussion-comments--WaMOe","discussion-comments-rose":"Comment-module__discussion-comments-rose--v1SXb"};var x=n(34306),y=n(92979);let b=()=>(0,i.jsx)("div",{className:"d-flex gap-2",children:(0,i.jsx)("div",{className:"flex-1 border overflow-x-auto rounded-2 borderColor-muted color-shadow-small",children:(0,i.jsxs)("div",{className:"d-flex flex-column gap-2 m-3",children:[(0,i.jsxs)("div",{className:"d-flex flex-items-center gap-2",children:[(0,i.jsx)(y.O,{variant:"elliptical",height:"xl",width:"xl"}),(0,i.jsx)(y.O,{variant:"rounded",height:"sm",width:"150px"})]}),[void 0,void 0].map((e,t)=>(0,i.jsx)(y.O,{variant:"rounded",height:"sm",width:"random"},t)),(0,i.jsx)(x.e,{})]})})});try{b.displayName||(b.displayName="CommentLoading")}catch{}var j=n(84568),C=n(23449),v=n(97564),N=n(65887),w=n(21741),S=n(8001),L=n(66330),k=n(29852),D=n(6256),I=n(71878),E=n(47373),A=n(41907),_=n(66965),T=n(74408),R=n(51012);let F=(0,r.forwardRef)(({initialMarkdown:e,onCancel:t,onSave:n,referenceId:a,buttonText:s,commentContent:l},o)=>{let[d,c]=(0,r.useState)(!1),u=(0,r.useRef)(null),m=(0,r.useRef)(void 0),f=(0,r.useCallback)(()=>{},[]),{markdownBody:h,resetMarkdownBody:p,markdownValidationResult:g,handleMarkdownBodyChanged:x}=(0,_.x)({commentBoxRef:u,markdownComposerRef:o,onChange:f,onCancel:()=>{},referenceId:a});(0,r.useEffect)(()=>{e&&!h&&x(e)},[e]),(0,r.useEffect)(()=>{if(l&&m.current!==l){x(l),m.current=l;let e=window.setTimeout(()=>{u.current&&(u.current?.scrollIntoView(),u.current?.focus())},0);return()=>{window.clearTimeout(e)}}},[l]),(0,R.N)(()=>{if(u&&u.current){let e=window.setTimeout(()=>{u.current?.focus()},0);return()=>{window.clearTimeout(e)}}},[u]);let y=async()=>{c(!0),await n(h,p),c(!1)},b=(0,T.nN)()||void 0;return(0,i.jsx)(A.h,{ref:u,validationResult:g,disabled:d,onChange:e=>{x(e)},onCancel:()=>{x(e??""),t?.()},onSave:y,saveButtonText:s,saveButtonTrailingIcon:!1,value:h,teamHovercardsEnabled:!0,fileUploadsEnabled:!0,userSettings:(0,D.X)().commentBoxConfig,subject:b})});function O({comment:e,commitOid:t,onCancel:n,onUpdate:a}){let{editComment:s}=(0,D.X)(),l=(0,r.useRef)(null),o=async t=>{let n=await s(t,e);n.updatedFields&&a({...e,...n.updatedFields})};return(0,i.jsx)(F,{commitOid:t,initialMarkdown:e.body,ref:l,onSave:o,onCancel:n,referenceId:`${t}-${e.id}`,buttonText:"Update comment"})}F.displayName="CommitCommentEditor";try{O.displayName||(O.displayName="UpdateCommitComment")}catch{}function P({comments:e,commit:t,locked:n,deleteComment:r,updateComment:a,setNewCommentContent:s}){return 0===e.length?null:(0,i.jsx)("div",{className:"d-flex flex-column gap-3",children:e.map(e=>(0,i.jsx)($,{comment:e,commit:t,locked:n,deleteComment:r,updateComment:a,setNewCommentContent:s},e.id))})}function $({comment:e,commit:t,locked:n,deleteComment:a,updateComment:l,setNewCommentContent:o}){let d=(0,s.t)(),[c,u]=(0,r.useState)(!1),[m,f]=(0,r.useState)(e.isHidden),h=(0,r.useRef)(null),{deleteComment:p,hideComment:g,unhideComment:y}=(0,D.X)(),b=async()=>{let t=await p(e.id.toString());"canceled"!==t&&"error"!==t&&"success"===t&&a(e.id)},j=async t=>{let n=await g(e.id.toString(),t);"error"!==n&&"success"===n&&(l({...e,isHidden:!0,minimizedReason:t}),f(!0))},C=async()=>{let t=await y(e.id.toString());"error"!==t&&"success"===t&&(l({...e,isHidden:!1,minimizedReason:null}),f(!1))},v=t.authors.length>0?t.authors[0]?.login:"",N={...(0,I.p)(e,t,d),referenceText:(0,E.F)(t.oid)};return(0,i.jsxs)("div",{className:"border rounded-2",ref:h,id:e.urlFragment,tabIndex:-1,children:[(0,i.jsx)(M,{comment:N,commentAuthorLogin:e.author.login,commentSubjectAuthorLogin:v,commentSubjectType:"commit",avatarUrl:e.author.avatarUrl,isMinimized:m,editComment:()=>{u(!0)},onReplySelect:o,onMinimize:f,navigate:()=>{},hideComment:j,unhideComment:C,deleteComment:b,commentRef:h,showEditHistory:e.viewerCanReadUserContentEdits&&!!e.lastUserContentEdit,commitComment:e}),m?null:c?(0,i.jsx)("div",{className:"m-2",children:(0,i.jsx)(O,{comment:e,commitOid:t.oid,onUpdate:e=>{l(e),u(!1)},onCancel:()=>u(!1)})}):(0,i.jsxs)("div",{className:"d-flex flex-column m-3 gap-3",style:{gap:"12px"},children:[(0,i.jsx)("div",{className:"markdown-body","data-turbolinks":"false",children:(0,i.jsx)(L.G,{disabled:!1,verifiedHTML:e.htmlBody,markdownValue:e.body,onChange:()=>{},onLinkClick:()=>{},teamHovercardsEnabled:!0})}),(0,i.jsx)(r.Suspense,{fallback:(0,i.jsx)(x.e,{}),children:(0,i.jsx)(k.ReactionViewerRelayQueryComponent,{id:e.relayId,subjectLocked:n})})]})]})}function M({hideActions:e,...t}){let n,a;let s=(0,v.G7)("issues_react_avatar_refactor"),l=t.commitComment;return t.showEditHistory&&(s?(n=(0,i.jsx)(r.Suspense,{fallback:null,children:(0,i.jsx)(B,{id:l.relayId})}),a=(0,i.jsx)(U,{id:t.comment.id})):n=(0,i.jsx)(r.Suspense,{fallback:null,children:(0,i.jsx)(N.$N,{id:l.relayId})})),(0,i.jsx)(j.v,{lastEditedByMessage:a,editHistoryComponent:n,forceInlineAvatar:!0,...t,actions:e?void 0:(0,i.jsx)(C.p,{...t})})}function B({id:e}){let t=(0,S.f)({id:e});return t?(0,i.jsx)(N.WT,{editHistory:t}):null}function U({id:e}){let t=(0,S.f)({id:e});return t?(0,i.jsx)(w._,{editInformation:t}):null}try{P.displayName||(P.displayName="ExistingCommitComments")}catch{}try{$.displayName||($.displayName="ExistingCommitComment")}catch{}try{M.displayName||(M.displayName="CommitCommentHeader")}catch{}try{B.displayName||(B.displayName="CommitCommentHeaderEditHistory")}catch{}try{U.displayName||(U.displayName="CommitCommentHeaderLastEditedBy")}catch{}var H=n(83056),V=n(73627),z=n(28784),G=n(91246);function K({commitOid:e,locked:t,onClose:n}){let a=(0,s.t)(),{helpUrl:l}=(0,V.X)(),[o,d]=(0,r.useState)(!1),u=t?"Unlock":"Lock",m=async()=>{(await (0,z.DI)(`${(0,H.$Qz)({owner:a.ownerLogin,repo:a.name,commitish:e})}/lock`,{method:"PUT",headers:{Accept:"application/json"}})).ok?n(!0):d(!0)},f=async()=>{(await (0,z.lS)(`${(0,H.$Qz)({owner:a.ownerLogin,repo:a.name,commitish:e})}/unlock`,{method:"PUT",headers:{Accept:"application/json"}})).ok?n(!1):d(!0)};return(0,i.jsxs)(G.l,{onClose:()=>n(),width:"large",title:`${u} conversation on this commit`,footerButtons:[{content:`${u} conversation`,buttonType:"danger",sx:{width:"100%"},onClick:t?f:m}],children:[o&&(0,i.jsxs)(c.A,{className:"mb-2",variant:"danger",children:["There was an error ",u.toLocaleLowerCase(),"ing this conversation. Please try again."]}),(0,i.jsxs)("p",{children:[u,"ing the conversation means:"]}),(0,i.jsx)("ul",{className:"ml-4",children:t?(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Everyone"})," will be able to comment on this commit once more."]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("li",{children:["Other users ",(0,i.jsx)("strong",{children:"can\u2019t add new comments"})," to this commit."]}),a.isOrgOwned?(0,i.jsxs)("li",{children:["You and other members of teams with\xa0",(0,i.jsx)("a",{href:`${l}/articles/what-are-the-different-access-permissions`,children:"write access"}),"\xa0 to this repository ",(0,i.jsx)("strong",{children:"can still leave comments"})," that others can see."]}):(0,i.jsxs)("li",{children:["You and other collaborators\xa0",(0,i.jsx)("a",{href:"<%= GitHub.help_url %>/articles/what-are-the-different-access-permissions",children:"with access"}),"\xa0to this repository ",(0,i.jsx)("strong",{children:"can still leave comments"})," that others can see."]})]})}),(0,i.jsxs)("p",{className:"mb-0 mt-2",children:["You can always this ",t?"lock":"unlock"," commit again in the future."]})]})}try{K.displayName||(K.displayName="LockConversationDialog")}catch{}var W=n(7148),q=n(14642),X=n(96711),Q=n(82667),Y=n(22868);function J({commitOid:e,onAddComment:t,onExpandCommentEditor:n,newCommentContent:a,canComment:s,locked:l,repoArchived:o,avatarURL:c}){let{addComment:u}=(0,D.X)(),m=(0,r.useRef)(null),f=async(e,n)=>{let i=await u(e);i.comment&&(t(i.comment),n())},h=(0,q.i)(o,l);return(0,i.jsx)("div",{className:"d-flex flex-column gap-2 pt-3",children:s?(0,i.jsx)(Z,{commitOid:e,commentEditor:m,onExpandEditor:n,onSave:f,newCommentContent:a,avatarURL:c||Q.t.ghostUser.avatarUrl}):(0,i.jsx)(W.P,{icon:d.LockIcon,reason:h})})}function Z(e){let[t,n]=(0,r.useState)(!1),s="Comment";return t?(0,i.jsx)("div",{id:a.Bq.issueCommentComposer,children:(0,i.jsx)(F,{commitOid:e.commitOid,ref:e.commentEditor,onSave:e.onSave,referenceId:`new-discussion-comment-${e.commitOid}`,commentContent:e.newCommentContent,buttonText:s,onCancel:()=>{n(!1)}})}):(0,i.jsxs)("div",{className:"d-flex flex-items-center border rounded-2 p-2 gap-2 color-bg-subtle",children:[(0,i.jsx)(Y.r,{src:e.avatarURL,size:20}),(0,i.jsx)(X.z,{onClick:()=>{n(!0),e.onExpandEditor?.()},children:s})]})}try{J.displayName||(J.displayName="NewCommitComment")}catch{}try{Z.displayName||(Z.displayName="CompactEditor")}catch{}var ee=n(20826);let et=(0,r.forwardRef)(({commitOid:e,subscribed:t},n)=>{let a;let[l,o]=(0,r.useState)(t),[c,m]=(0,r.useState)(!1),f=(0,s.t)(),h=(0,ee.H)("/notifications/thread","post");a=c?`You're now ${l?"subscribed":"unsubscribed"} to this thread.`:l?"You're receiving notifications because you're subscribed to this thread.":"You're not receiving notifications from this thread.";let p=async()=>{let t=new FormData;t.append("repository_id",f.id.toString()),t.append("thread_id",e),t.append("thread_class","Commit"),t.append("id",l?"unsubscribe":"subscribe"),t.append("authenticity_token",h??""),(await (0,z.DI)("/notifications/thread",{method:"POST",body:t})).ok&&(o(!l),m(!0))};return(0,i.jsxs)("div",{className:"d-flex flex-items-center border rounded-2 p-2 gap-2",ref:n,children:[(0,i.jsx)(u.Q,{onClick:p,size:"small",leadingVisual:l?d.BellSlashIcon:d.BellIcon,children:l?"Unsubscribe":"Subscribe"}),(0,i.jsx)("p",{role:"status",className:"f6 fgColor-muted mb-0",children:a})]})});et.displayName="NotificationsFooter";let en="comments";function ei(e){return(0,i.jsx)("div",{className:(0,f.$)("d-flex flex-column gap-2 pt-3",a.mU.commentsContainer,g["commit-discussion-comments"]),id:en,children:(0,r.createElement)(er,{...e,key:e.commit.oid})})}function er({commit:e,commentInfo:t}){let n=(0,s.t)(),a=(0,l.i)(),{retry:d,loadMore:m,canLoadMore:f,addComment:x,deleteComment:y,updateComment:j,count:C,comments:v,subscribed:N,providerState:w}=(0,h.y)(),[S,L]=(0,r.useState)(void 0),[k,D]=(0,r.useState)(t.locked),I=(0,r.useMemo)(()=>(0,p.N)(e.oid,n.id),[e.oid,n.id]),E=(0,r.useRef)(null);(0,r.useEffect)(()=>{if(o.cg?.location.hash){let e=o.cg.location.hash.slice(1);if(v.find(t=>t.urlFragment===e)){let t=document.getElementById(e);t&&(t.scrollIntoView(),t.focus())}}},[v]);let A=(0,r.useCallback)(()=>{setTimeout(()=>E.current?.scrollIntoView({behavior:"smooth",block:"nearest"}),0)},[]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ea,{commitOid:e.oid,commentCount:C,canLock:t.canLock,locked:k,setLocked:D}),"loading"===w&&(0,i.jsx)(b,{}),"error"===w&&(0,i.jsxs)(c.A,{className:"d-flex flex-justify-between flex-items-center",variant:"danger",children:[(0,i.jsx)("span",{children:"Failed to load comments."}),(0,i.jsx)(u.Q,{onClick:()=>d(),children:"Retry"})]}),"loaded"===w&&f&&(0,i.jsx)(u.Q,{className:"width-full",onClick:()=>m(),children:"Load more comments"}),(0,i.jsx)(P,{comments:v,commit:e,locked:k,deleteComment:y,updateComment:j,setNewCommentContent:L}),I?(0,i.jsx)("div",{className:"text-center",children:[...Array(38)].map((e,t)=>(0,i.jsx)("img",{alt:"rose",src:"/images/icons/emoji/rose.png",className:g["discussion-comments-rose"]},`rose-${t}`))}):null,"loaded"===w||0!==v.length?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(J,{commitOid:e.oid,onAddComment:x,onExpandCommentEditor:A,newCommentContent:S,canComment:t.canComment,locked:k,repoArchived:t.repoArchived,avatarURL:a?.avatarURL}),a?(0,i.jsx)(et,{ref:E,commitOid:e.oid,subscribed:N??!1}):null]}):null]})}function ea({commitOid:e,commentCount:t,locked:n,setLocked:a,canLock:s}){let[l,o]=(0,r.useState)(!1);return(0,i.jsxs)("div",{className:"d-flex flex-items-center flex-justify-between",children:[(0,i.jsxs)("h2",{className:"sr-only",children:[t," commit comments"]}),(0,i.jsxs)("div",{className:"d-flex flex-items-center",children:[(0,i.jsx)("div",{className:"h4 pr-2",children:"Comments"}),void 0!==t&&(0,i.jsx)(m.A,{children:t})]}),s&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(u.Q,{leadingVisual:n?d.KeyIcon:d.LockIcon,variant:"invisible",onClick:()=>o(!0),children:[n?"Unlock":"Lock"," conversation"]}),l&&(0,i.jsx)(K,{commitOid:e,locked:n,onClose:e=>{o(!1),void 0!==e&&a(e)}})]})]})}try{ei.displayName||(ei.displayName="DiscussionComments")}catch{}try{er.displayName||(er.displayName="DiscussionCommentsInternal")}catch{}try{ea.displayName||(ea.displayName="DiscussionCommentsHeader")}catch{}},11732:(e,t,n)=>{n.d(t,{j:()=>d});var i=n(74848),r=n(4547),a=n(92979),s=n(95140),l=n(89169),o=n(23925);function d({commit:e,repo:t,children:n,settings:d,textVariant:c}){let u=(0,o.NO)(e.oid),[m]=(0,s.I)(()=>!1,!0,[]);return(0,i.jsxs)(r.j,{authors:e.authors,committer:e.committer,committerAttribution:e.committerAttribution,onBehalfOf:u?.onBehalfOf,repo:t,includeVerbs:!0,authorSettings:{fontWeight:"normal",fontColor:"fg.muted",avatarSize:16,...d},textVariant:c,children:[!m&&(0,i.jsx)(l.A,{className:"pl-1",datetime:e.committedDate}),m&&(0,i.jsx)(a.O,{variant:"rounded",className:"d-none d-sm-flex ml-1",width:"60px"}),n]})}try{d.displayName||(d.displayName="CommitAttribution")}catch{}},29367:(e,t,n)=>{n.d(t,{_e:()=>d,hf:()=>c,qh:()=>u});var i=n(74848),r=n(13894),a=n(92979),s=n(23925),l=n(83808),o=n(94034);let d="62px";function c({deferredData:e}){let{helpUrl:t}=(0,l.D)(),n=(0,s.xs)();return(0,i.jsxs)(i.Fragment,{children:[n&&(0,i.jsx)(a.O,{variant:"rounded",className:"d-none d-sm-flex",width:"62px"}),!n&&void 0===e&&(0,i.jsx)(a.O,{variant:"rounded",className:"d-none d-sm-flex",width:"62px"}),!n&&e&&(0,i.jsx)(r.h,{commitOid:e.oid,hasSignature:!0,verificationStatus:e.verifiedStatus,signature:e.signatureInformation?{helpUrl:t,...e.signatureInformation}:void 0})]})}function u({deferredData:e,oid:t,repository:n}){let r=(0,s.xs)(),l="";try{l=e?.statusCheckStatus?.short_text?.split("checks")[0]?.trim()||""}catch{}return(0,i.jsxs)(i.Fragment,{children:[r&&(0,i.jsx)(a.O,{variant:"rounded",className:"d-none d-sm-flex ml-2",width:"20px"}),!r&&void 0===e&&(0,i.jsx)(a.O,{variant:"rounded",className:"d-none d-sm-flex ml-2",width:"20px"}),!r&&e?.statusCheckStatus&&(0,i.jsx)("div",{className:"d-none d-sm-flex ml-1",children:"\xb7"}),(0,i.jsx)("div",{className:"d-none d-sm-flex",children:(0,i.jsx)(o.d,{oid:t,status:e?.statusCheckStatus?.state,descriptionString:l,repo:n})})]})}try{c.displayName||(c.displayName="SignedCommitBadge")}catch{}try{u.displayName||(u.displayName="CommitChecksStatusBadge")}catch{}},20290:(e,t,n)=>{n.d(t,{s:()=>m});var i=n(74848),r=n(38621),a=n(93597),s=n(84217),l=n(30729);let o={none:{},bottom:{pb:0},top:{pt:0}},d=()=>(0,i.jsx)(l.A,{icon:r.GitCommitIcon});function c({children:e,leadingVisual:t,clipTimeline:n="none",sx:r}){let s=o[n];return(0,i.jsxs)(a.A.Item,{sx:{py:1,...s,...r},children:[(0,i.jsx)(a.A.Badge,{sx:{backgroundColor:"canvas.default"},children:t??(0,i.jsx)(d,{})}),(0,i.jsx)(a.A.Body,{className:"mt-0",children:e})]})}function u({title:e,as:t,...n}){return(0,i.jsx)(s.A,{as:t,className:"text-normal f5 py-1",...n,children:e})}let m=Object.assign(c,{Heading:u});try{d.displayName||(d.displayName="DefaultLeadingVisual")}catch{}try{c.displayName||(c.displayName="TimelineRowComponent")}catch{}try{u.displayName||(u.displayName="TimelineRowHeading")}catch{}try{m.displayName||(m.displayName="TimelineRow")}catch{}},15941:(e,t,n)=>{n.d(t,{w:()=>o});var i=n(74848),r=n(30569),a=n(71312),s=n(98352),l=n(47373);function o({sha:e,direction:t="s"}){let{sendAnalyticsEvent:n}=(0,a.s)(),{loggingPrefix:o,loggingPayload:d}=(0,s.xe)(),c=(0,s.eX)();return(0,i.jsx)("div",{onClick:()=>{c&&n(`${o}click`,"COPY_SHA_CLICKED",d)},children:(0,i.jsx)(r.T,{textToCopy:e,ariaLabel:`Copy full SHA for ${(0,l.F)(e)}`,tooltipProps:{direction:t,anchorSide:"outside-bottom"},size:"small",avoidStyledComponent:!0,hasPortalTooltip:!0})})}try{o.displayName||(o.displayName="CopySHA")}catch{}},7512:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(74848),r=n(20053);function a({children:e,className:t=""}){return(0,i.jsx)("div",{className:(0,r.$)("color-bg-default position-relative border rounded-2 color-border-default mt-2 d-flex flex-column",t),children:e})}try{a.displayName||(a.displayName="Panel")}catch{}},98352:(e,t,n)=>{n.d(t,{eX:()=>l,xe:()=>o,zq:()=>s});var i=n(74848),r=n(96540);let a=(0,r.createContext)({loggingPayload:void 0,loggingPrefix:void 0});function s({children:e,loggingInfo:t}){return(0,i.jsx)(a.Provider,{value:t,children:e})}function l(){let e=(0,r.useContext)(a);return void 0!==e.loggingPayload&&void 0!==e.loggingPrefix}function o(){return(0,r.useContext)(a)}try{a.displayName||(a.displayName="CommitsLoggingContext")}catch{}try{s.displayName||(s.displayName="CommitsLoggingInfoProvider")}catch{}},23925:(e,t,n)=>{n.d(t,{M2:()=>o,NO:()=>d,UI:()=>a,Xx:()=>s,ej:()=>u,xs:()=>c});var i=n(74848),r=n(96540);let a={deferredCommits:[],renameHistory:null,loading:!0},s={deferredCommits:[],renameHistory:null,loading:!1},l=(0,r.createContext)(a);function o({children:e,deferredData:t}){return(0,i.jsx)(l.Provider,{value:t,children:e})}function d(e){let t=(0,r.useContext)(l),n=t.error,i=t.deferredCommits?.find(t=>t?.oid===e);return n&&void 0===i&&(i={oid:e,statusCheckStatus:void 0}),i}function c(){return(0,r.useContext)(l).loading}function u(){return(0,r.useContext)(l).renameHistory}try{l.displayName||(l.displayName="DeferredCommitDataContext")}catch{}try{o.displayName||(o.displayName="DeferredCommitDataProvider")}catch{}},15617:(e,t,n)=>{n.d(t,{c:()=>c,y:()=>u});var i,r=n(74848),a=n(67726),s=n(83056),l=n(28784),o=n(96540);let d=(0,o.createContext)({comments:[],addComment:a.l,deleteComment:a.l,updateComment:a.l,loadMore:a.l,retry:a.l,canLoadMore:!1,count:0,subscribed:!1,providerState:"initial"});function c({children:e,comments:t=[],commentCount:n=0,canLoadMore:i=!1,subscribed:a=!1,providerState:c="initial",repo:u,commitOid:m}){let[f,h]=(0,o.useState)(t),[p,g]=(0,o.useState)(n),[x,y]=(0,o.useState)(i),[b,j]=(0,o.useState)(c),[C,v]=(0,o.useState)(a);(0,o.useEffect)(()=>{g(n),h(t),y(i),v(a),j(c)},[c]);let N=(0,o.useCallback)(async e=>{j("loading");let t=await (0,l.Sr)((0,s.Mo3)({owner:u.ownerLogin,repo:u.name,commitOid:m,beforeCommentId:e}));if(t.ok){let n=await t.json();e?h(e=>[...n.comments,...e]):h(n.comments),j("loaded"),g(n.count),v(n.subscribed),y(n.canLoadMore)}else j("error")},[u.ownerLogin,u.name,m]),w=(0,o.useCallback)(()=>{let e=f[0];e&&x&&N(e.id.toString())},[x,f,N]),S=(0,o.useCallback)(e=>{h([...f,e]),g((p??0)+1)},[f,p]),L=(0,o.useCallback)(e=>{h(f.filter(t=>t.id!==e)),g((p??0)-1)},[f,p]),k=(0,o.useCallback)(e=>{h(f.map(t=>t.id===e.id?e:t))},[f]),D=(0,o.useMemo)(()=>({addComment:S,canLoadMore:x,comments:f,count:p,deleteComment:L,loadMore:w,retry:N,subscribed:C,providerState:b,updateComment:k}),[S,x,f,p,L,N,w,b,C,k]);return(0,r.jsx)(d.Provider,{value:D,children:e})}function u(){let e=(0,o.useContext)(d);if(!e)throw Error("useDiscussionComments must be used within a DiscussionCommentsProvider");return e}try{d.displayName||(d.displayName="DiscussionCommentsContext")}catch{}try{c.displayName||(c.displayName="DiscussionCommentsProvider")}catch{}try{(i=DiscussionComments).displayName||(i.displayName="DiscussionComments")}catch{}},65568:(e,t,n)=>{n.d(t,{B:()=>d,r:()=>o});var i=n(74848),r=n(67726),a=n(96540);let s=(0,a.createContext)({comments:[],addComments:r.l,findInlineComment:()=>void 0,getCommentCountByPath:()=>0,getThreadDataByPathAndPosition:()=>void 0});function l(e){return e.reduce((e,t)=>(e.set(`${t.path}::${t.position}`,t),e),new Map)}function o({children:e,initialFiles:t,initialExpandedThreadId:n}){let[r,o]=(0,a.useState)([]),[d,c]=(0,a.useState)(t??[]),[u,m]=(0,a.useState)(()=>t?l(t):new Map);(0,a.useEffect)(()=>{c(t??[]),m(t?l(t):new Map)},[t]);let f=(0,a.useCallback)((e,t,n)=>{let i=e.map(e=>e.id),a=r.filter(e=>!i.includes(e.id)),s=d.filter(e=>e.path!==t||e.position!==parseInt(n)),u={path:t,position:parseInt(n),count:e.length,threads:[{id:`${t}::${n}`,diffSide:"RIGHT",commentsData:{totalCount:e.length,comments:e.map(e=>({id:e.id,author:{avatarUrl:e?.author?.avatarUrl??"",login:e?.author?.login??"",url:""}}))}}]};o([...a,...e]),c([...s,u]),m(l([...s,u]))},[d,r]),h=(0,a.useCallback)(e=>r.find(t=>t.relayId===e),[r]),p=(0,a.useCallback)(e=>{let t=0;for(let n of d)n.path===e&&(t+=n.count);return t},[d]),g=(0,a.useCallback)((e,t)=>u.get(`${e}::${t}`),[u]),x=(0,a.useMemo)(()=>({comments:r,addComments:f,findInlineComment:h,getCommentCountByPath:p,getThreadDataByPathAndPosition:g,initialExpandedThreadId:n}),[f,r,h,p,g,n]);return(0,i.jsx)(s.Provider,{value:x,children:e})}function d(){let e=(0,a.useContext)(s);if(!e)throw Error("useInlineComments must be used within a InlineCommentsProvider");return e}try{s.displayName||(s.displayName="InlineCommentsContext")}catch{}try{o.displayName||(o.displayName="InlineCommentsProvider")}catch{}},54400:(e,t,n)=>{n.d(t,{f:()=>W});var i=n(74848),r=n(98164),a=n(97156),s=n(26750),l=n(27788),o=n(93597),d=n(96540),c=n(82932),u=n(7512);let m={panel:"CommitGroup-module__panel--tvFMx"};var f=n(7572),h=n(1946),p=n(59969),g=n(23521),x=n(41647),y=n(47467),b=n(43972),j=n(22084),C=n(71312),v=n(98352),N=n(23925),w=n(11732),S=n(83056),L=n(56226),k=n(38621),D=n(55847),I=n(87330),E=n(94977),A=n(14616),_=n(47373),T=n(2003);let R=d.memo(F);function F({repo:e,oid:t}){let n=`browse-repo-${(0,_.F)(t)}`,{sendAnalyticsEvent:r}=(0,C.s)(),{loggingPrefix:a,loggingPayload:s}=(0,v.xe)(),l=(0,v.eX)();return(0,i.jsx)(E.A,{"aria-label":"Browse repository at this point",id:n,direction:"sw",children:(0,i.jsx)("a",{"aria-labelledby":n,href:(0,S.IO9)({repo:e,action:"tree",commitish:t}),className:"Button Button--iconOnly Button--invisible Button--small","data-testid":"commit-row-browse-repo",onClick:()=>{l&&r(`${a}click`,"COMMITS_BROWSE_REPOSITORY_AT_THIS_POINT_CLICKED",s)},children:(0,i.jsx)(k.CodeIcon,{})})})}let O=d.memo(P);function P({repo:e,oid:t,path:n}){if(!n)return null;let r=`view-code-${(0,_.F)(t)}`;return(0,i.jsx)(E.A,{"aria-label":"View code at this point",id:r,direction:"sw",children:(0,i.jsx)("a",{"aria-labelledby":r,href:(0,S.nD_)({owner:e.ownerLogin,repo:e.name,commitish:t,filePath:n}),className:"Button Button--iconOnly Button--invisible Button--small","data-testid":"commit-row-view-code",children:(0,i.jsx)(k.FileCodeIcon,{})})})}function $({commitUrl:e,oid:t,softNavToCommit:n}){let r={variant:"invisible",size:"small",sx:{fontFamily:"var(--fontStack-monospace)",color:"fg.muted"}};return(0,i.jsx)(E.A,{"aria-label":"View commit details",direction:"s",children:n?(0,i.jsx)(D.Q,{as:L.N,to:e,...r,children:(0,_.F)(t)}):(0,i.jsx)("a",{className:"Button--invisible Button--small Button text-mono",href:e,...r,children:(0,i.jsx)("span",{className:"Button-content",children:(0,i.jsx)("span",{className:"Button-label color-fg-muted",children:(0,_.F)(t)})})})})}function M({showDescription:e,setShowDescription:t,oid:n}){let r=(0,_.F)(n),a=`show-description-${r}`,s=`${e?"Hide":"Show"} description for ${r}`;return(0,i.jsx)(A.m,{id:a,text:s,"aria-label":s,children:(0,i.jsx)(I.K,{icon:k.EllipsisIcon,className:"Button Button--iconOnly Button--invisible Button--small ml-1","data-testid":"commit-row-show-description-button","aria-labelledby":a,"aria-pressed":e,"aria-expanded":e,onClick:n=>{n.preventDefault(),t(!e)}})})}function B({count:e,repo:t,oid:n}){if(!e)return null;let r=`comment-count-${(0,_.F)(n)}`;return(0,i.jsx)(E.A,{"aria-label":`View ${e} commit comment${e>1?"s":""}`,id:r,direction:"sw",children:(0,i.jsx)("a",{"aria-labelledby":r,href:`${(0,S.$Qz)({owner:t.ownerLogin,repo:t.name,commitish:n})}#${T.N}`,className:"Button Button--invisible Button--small","data-testid":"commit-row-comments",children:(0,i.jsxs)("span",{className:"Button-content color-fg-muted",children:[(0,i.jsx)(k.CommentIcon,{}),(0,i.jsx)("span",{className:"Button-label",children:e})]})})})}try{R.displayName||(R.displayName="BrowseRepositoryAtThisPoint")}catch{}try{F.displayName||(F.displayName="WrappedBrowseRepositoryAtThisPoint")}catch{}try{O.displayName||(O.displayName="ViewCodeAtThisPoint")}catch{}try{P.displayName||(P.displayName="WrappedViewCodeAtThisPoint")}catch{}try{$.displayName||($.displayName="ViewCommitDetails")}catch{}try{M.displayName||(M.displayName="ToggleCommitDescription")}catch{}try{B.displayName||(B.displayName="CommitCommentCount")}catch{}var U=n(29367),H=n(15941);let V=(0,d.lazy)(()=>n.e("ui_packages_commits_components_Commits_CommitActionBar_tsx").then(n.bind(n,45985)).then(e=>({default:e.CommitActionBar})));function z({commit:e,repo:t,path:n,softNavToCommit:r}){let[a,s]=(0,d.useState)(!1),l=(0,d.useRef)(null),[o,c]=(0,h.ym)(e.oid,t),[u,m]=(0,d.useState)(!1),S=(0,N.NO)(e.oid),{sendAnalyticsEvent:L}=(0,C.s)(),{loggingPrefix:k,loggingPayload:D}=(0,v.xe)(),I=(0,v.eX)();return(0,d.useEffect)(()=>{a&&l.current&&l.current.textContent&&(0,f.i)(l.current.textContent)},[l,a]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(p.c,{"data-testid":"commit-row-item","data-commit-link":e.url,sx:{":first-child":{borderTopLeftRadius:2,borderTopRightRadius:2},":last-child":{borderBottomLeftRadius:2,borderBottomRightRadius:2}},title:(0,i.jsx)(b.a,{value:e.shortMessage,markdownValue:e.shortMessageMarkdownLink,href:e.url,containerSx:{display:"inline"},headingSx:{display:"inline"},onClick:()=>{I&&L(`${k}click`,"COMMITS_TITLE_CLICKED",D)},children:e.bodyMessageHtml&&(0,i.jsx)(M,{showDescription:a,setShowDescription:s,oid:e.oid})}),metadata:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(y.V,{children:(0,i.jsx)(B,{oid:e.oid,repo:t,count:S?.commentCount??0})}),(0,i.jsx)(y.V,{sx:{minWidth:U._e},children:(0,i.jsx)(U.hf,{deferredData:S})}),(0,i.jsxs)(y.V,{className:"d-none d-sm-flex px-0 gap-2",variant:"primary",children:[(0,i.jsxs)("div",{className:"d-flex",children:[(0,i.jsx)($,{oid:e.oid,commitUrl:e.url,softNavToCommit:r}),(0,i.jsx)(H.w,{sha:e.oid})]}),(0,i.jsx)(O,{repo:t,oid:e.oid,path:n}),(0,i.jsx)(R,{repo:t,oid:e.oid})]})]}),secondaryActions:(0,i.jsx)(d.Suspense,{children:(0,i.jsx)(V,{commit:e,repo:t,path:n,setDialogOpen:m,fetchCheckDetails:c,deferredData:S})}),children:[(0,i.jsx)("div",{className:"px-1"}),(0,i.jsxs)(x.Q,{children:[a&&e.bodyMessageHtml&&(0,i.jsx)(g.U,{children:(0,i.jsx)(j.yx,{ref:l,html:e.bodyMessageHtml,className:"ws-pre-wrap extended-commit-description-container pb-2 text-mono wb-break-word"})}),(0,i.jsx)(g.U,{children:(0,i.jsx)(w.j,{commit:e,repo:t,children:(0,i.jsx)(U.qh,{repository:t,deferredData:S,oid:e.oid})})})]})]}),S?.statusCheckStatus&&u&&(0,i.jsx)(h.xC,{combinedStatus:o,isOpen:u,onDismiss:()=>{m(!1)}})]})}try{V.displayName||(V.displayName="CommitActionBar")}catch{}try{z.displayName||(z.displayName="CommitRow")}catch{}var G=n(20290);function K({commits:e,title:t,shouldClipTimeline:n,repo:r,currentBlobPath:a="",softNavToCommit:s}){let l=(0,d.useId)();return(0,i.jsxs)(G.s,{clipTimeline:n?"top":"none",children:[(0,i.jsx)(G.s.Heading,{as:"h3",id:l,title:`Commits on ${t}`,"data-testid":"commit-group-title"}),(0,i.jsx)(u.Z,{className:m.panel,children:(0,i.jsx)(c.u,{title:t,titleHeaderTag:"h3",ariaLabelledBy:l,children:e.map(e=>(0,i.jsx)(z,{commit:e,repo:r,path:a,softNavToCommit:s},e.oid))},t)})]})}try{K.displayName||(K.displayName="CommitGroup")}catch{}function W({leadingContent:e,commitGroups:t,trailingContent:n,deferredCommitData:c=N.Xx,repository:u,currentBlobPath:m,loggingPayload:f,loggingPrefix:h,shouldClipTimeline:p=!0,softNavToCommit:g=!1}){let x=(0,d.useRef)(0),y=(0,d.useRef)(null),b=(0,d.useRef)(null),j=(0,d.useRef)(!1),C=(0,d.useRef)([]),w=(0,l.Z)(),S=e=>{"commit-diff-view:tab-forward"===e.commandId&&(y.current=b.current,b.current=a.XC?.activeElement??null,j.current=!1),"commit-diff-view:tab-backward"===e.commandId&&a.XC?.activeElement?.hasAttribute("data-commit-link")&&!j.current&&y.current&&(y.current.focus(),b.current=y.current),"commit-diff-view:tab-backward"===e.commandId&&(j.current=!0)},L=e=>{if(!(0,r.zw)()&&("commit-diff-view:go-down-commit"===e.commandId||"commit-diff-view:go-up-commit"===e.commandId))return;let t=1;for(let e=0;e<C.current.length;e++)C.current[e]?.contains(a.XC?.activeElement)&&(t=e+1);let n=!1;if(("commit-diff-view:go-up-commit"===e.commandId||"commit-diff-view:go-up-commit-arrow"===e.commandId)&&(n=!0),x.current!==t)x.current=t;else{let e=C.current[n?t-2:t];e?.focus(),e?.focus(),x.current=n?t-1:t+1}};return(0,d.useEffect)(()=>{let e=setTimeout(()=>{let e=document.querySelectorAll('[id*="-list-view-node-"]');C.current=Array.from(e)},0);return()=>clearTimeout(e)},[t]),(0,i.jsx)(N.M2,{deferredData:c,children:(0,i.jsx)(v.zq,{loggingInfo:{loggingPayload:f,loggingPrefix:h},children:(0,i.jsxs)(o.A,{clipSidebar:!0,onKeyDown:e=>{if("Enter"===e.key){let e=a.XC?.activeElement?.hasAttribute("data-commit-link")?a.XC?.activeElement?.getAttribute("data-commit-link"):void 0;e&&w(e)}},children:[e,(0,i.jsx)(s.tL,{commands:{"commit-diff-view:go-down-commit-arrow":L,"commit-diff-view:go-down-commit":L,"commit-diff-view:go-up-commit-arrow":L,"commit-diff-view:go-up-commit":L,"commit-diff-view:tab-forward":S,"commit-diff-view:tab-backward":S},children:t.map((e,t)=>(0,i.jsx)(K,{title:e.title,commits:e.commits,shouldClipTimeline:p&&0===t,currentBlobPath:m,repo:u,softNavToCommit:g},e.title))}),n]})})})}try{W.displayName||(W.displayName="Commits")}catch{}},71078:(e,t,n)=>{n.d(t,{M:()=>u});var i=n(74848),r=n(64665),a=n(67726),s=n(38621),l=n(67138),o=n(24664),d=n(7512);let c={timeout:{description:"Try reloading the page, or if the problem persists, view the history locally using this command:",heading:"Commit history cannot be loaded",icon:(0,i.jsx)(s.AlertIcon,{size:"medium",className:"mb-2 fgColor-muted"}),showTextInput:!0},unavailable:{description:"There isn't any commit history to show here.",heading:"No commits history",icon:(0,i.jsx)(s.GitCommitIcon,{size:"medium"}),showTextInput:!1}};function u({timeoutMessage:e,unavailableMessage:t}){let n=c[""!==e?"timeout":"unavailable"],u=t??n.description;return(0,i.jsx)(d.Z,{children:(0,i.jsx)("div",{"data-hpc":!0,children:(0,i.jsxs)(o.A,{border:!1,spacious:!0,children:[(0,i.jsx)(o.A.Visual,{children:n.icon}),(0,i.jsx)(o.A.Heading,{children:n.heading}),(0,i.jsx)(o.A.Description,{children:u}),n.showTextInput&&(0,i.jsx)(l.A,{"aria-label":"View commit history locally command",className:"d-flex flex-justify-center mt-2",monospace:!0,onChange:a.l,readOnly:!0,size:"large",trailingAction:(0,i.jsx)(l.A.Action,{onClick:()=>(0,r.D)(e),icon:s.CopyIcon,"aria-label":"Copy to clipboard",className:"fgColor-muted"}),value:e})]})})})}try{u.displayName||(u.displayName="CommitsBlankState")}catch{}},76889:(e,t,n)=>{n.d(t,{Y:()=>h});var i=n(74848),r=n(22868),a=n(38621),s=n(75177),l=n(52464),o=n(30631),d=n(55847),c=n(30729),u=n(35993),m=n(83994);let f={[u.U.Failure]:(0,i.jsx)(c.A,{icon:a.StopIcon,sx:{fill:"danger.fg"}}),[u.U.Warning]:(0,i.jsx)(c.A,{icon:a.AlertIcon,sx:{fill:"attention.fg"}}),[u.U.Notice]:(0,i.jsx)(c.A,{icon:a.InfoIcon,sx:{fill:"fg.muted"}})};function h({annotation:e}){return(0,i.jsxs)(s.A,{sx:{borderLeft:"6px solid",borderColor:m.GF[e.annotationLevel].primaryColor,p:4},children:[(0,i.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[f[e.annotationLevel],(0,i.jsx)(l.A,{sx:{fontWeight:600,color:"fg.muted",fontSize:0,pl:2},children:m.GF[e.annotationLevel].ariaLabel})]}),(0,i.jsx)(l.A,{sx:{color:m.GF[e.annotationLevel].primaryColor,fontWeight:600,fontSize:1},children:e.title}),(0,i.jsx)(s.A,{sx:{mb:3,mt:1},children:e.message&&(0,i.jsx)(l.A,{sx:{fontFamily:"var(--fontStack-monospace)",fontSize:0,display:"-webkit-box",overflow:"hidden","-webkit-box-orient":"vertical","-webkit-line-clamp":"8",maxWidth:"unset"},children:e.message})}),(0,i.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,i.jsxs)(s.A,{sx:{flexGrow:2},children:[(0,i.jsx)(r.r,{src:e.appAvatarUrl,alt:e.appAvatarAltText}),(0,i.jsxs)(o.A,{sx:{ml:2,maxWidth:"300px"},inline:!0,title:`${e.checkSuiteName} / ${e.checkRun.name}`,children:[(0,i.jsx)(l.A,{sx:{fontWeight:600,fontSize:0},children:e.checkSuiteName})," /"," ",(0,i.jsx)(l.A,{sx:{fontSize:0},children:e.checkRun.name})]})]}),e.checkRun.detailsUrl&&(0,i.jsx)(d.Q,{as:"a",href:e.checkRun.detailsUrl,size:"small",children:"View details"})]})]})}try{h.displayName||(h.displayName="Annotation")}catch{}},83994:(e,t,n)=>{n.d(t,{GF:()=>d,S:()=>o,Xh:()=>s});var i=n(74848),r=n(38267),a=n(35993);function s({annotationLevel:e,...t}){let{icon:n,...r}=d[e];return function({fill:e,stroke:t,ariaLabel:n,svgHtml:r,className:a}){return(0,i.jsx)("svg",{"aria-label":n,className:a,fill:e,height:"24",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",style:{boxShadow:"none"},viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",children:r})}({...n,...r,...t})}let l=(0,r.i7)(["0%{opacity:0;}100%{opacity:1;}"]),o=(0,r.Ay)(s).withConfig({displayName:"AnnotationIcon__AnimatedAnnotationIcon",componentId:"sc-306ab24a-0"})(["animation:"," 0.1s ease-in;"],l),d={[a.U.Failure]:{priority:1,ariaLabel:"Check failure",primaryColor:"danger.fg",icon:{fill:"var(--bgColor-danger-emphasis, var(--color-danger-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,i.jsx)("line",{x1:"15",x2:"9",y1:"9",y2:"15"}),(0,i.jsx)("line",{x1:"9",x2:"15",y1:"9",y2:"15"})]})}},[a.U.Warning]:{priority:2,ariaLabel:"Check warning",primaryColor:"attention.fg",icon:{fill:"var(--bgColor-attention-emphasis, var(--color-attention-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"8",y2:"12"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"16",y2:"16"})]})}},[a.U.Notice]:{priority:3,ariaLabel:"Check notice",primaryColor:"fg.muted",icon:{fill:"var(--bgColor-neutral-emphasis, var(--color-neutral-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"16",y2:"12"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"8",y2:"8"})]})}}};try{s.displayName||(s.displayName="AnnotationIcon")}catch{}try{o.displayName||(o.displayName="AnimatedAnnotationIcon")}catch{}},81602:(e,t,n)=>{n.d(t,{$:()=>d});var i=n(74848),r=n(38621),a=n(80497),s=n(30595),l=n(23246),o=n(30746);let d=e=>(0,i.jsx)(o.B,{errorFallback:(0,i.jsx)(c,{}),suspenseFallback:(0,i.jsx)(u,{}),Component:m,...e}),c=()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.l.Divider,{}),(0,i.jsxs)(a.l.Item,{disabled:!0,children:[(0,i.jsx)(a.l.LeadingVisual,{children:(0,i.jsx)(r.AlertIcon,{})}),"Copilot failed to load"]})]}),u=()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.l.Divider,{}),(0,i.jsxs)(a.l.Item,{disabled:!0,children:[(0,i.jsx)(a.l.LeadingVisual,{children:(0,i.jsx)(s.A,{size:"small"})}),"Copilot is loading..."]})]}),m=e=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.l.Divider,{}),(0,i.jsx)(l.t,{eventContext:{prx:!0},leadingVisual:(0,i.jsx)(r.CopilotIcon,{}),fileDiffReference:e.fileDiffReference})]});try{d.displayName||(d.displayName="CopilotDiffChatBlobActionsMenuItems")}catch{}try{c.displayName||(c.displayName="MenuItemError")}catch{}try{u.displayName||(u.displayName="MenuItemLoading")}catch{}try{m.displayName||(m.displayName="BaseCopilotDiffChatBlobActionsMenuItems")}catch{}},30746:(e,t,n)=>{n.d(t,{x:()=>m,B:()=>p});var i=n(74848);let r=function(){var e={alias:null,args:null,kind:"ScalarField",name:"isCopilotDotcomChatEnabled",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DiffChatWrapper_ViewerQuery",selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"viewer",plural:!1,selections:[e],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"DiffChatWrapper_ViewerQuery",selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"viewer",plural:!1,selections:[e,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:"16bed8244ee96ad06b6638dbb86dd0ff",metadata:{},name:"DiffChatWrapper_ViewerQuery",operationKind:"query",text:null}}}();r.hash="4d1f99d4dad28f392f7ea1a3cecbcfff";let a=function(){var e={defaultValue:null,kind:"LocalArgument",name:"endOid"},t={defaultValue:null,kind:"LocalArgument",name:"pullRequestId"},n={defaultValue:null,kind:"LocalArgument",name:"startOid"},i=[{kind:"Variable",name:"id",variableName:"pullRequestId"}],r=[{kind:"Variable",name:"endOid",variableName:"endOid"},{kind:"Variable",name:"startOid",variableName:"startOid"}],a={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},l=[{alias:null,args:null,kind:"ScalarField",name:"oid",storageKey:null},{alias:null,args:null,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"databaseId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null},s],storageKey:null},s],storageKey:null},s];return{fragment:{argumentDefinitions:[e,t,n],kind:"Fragment",metadata:null,name:"DiffChatWrapper_ComparisonQuery",selections:[{alias:"pullRequest",args:i,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:r,concreteType:"PullRequestComparison",kind:"LinkedField",name:"comparison",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"useFileDiffReference_Comparison"}],storageKey:null}],type:"PullRequest",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[t,n,e],kind:"Operation",name:"DiffChatWrapper_ComparisonQuery",selections:[{alias:"pullRequest",args:i,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[a,{kind:"InlineFragment",selections:[{alias:null,args:r,concreteType:"PullRequestComparison",kind:"LinkedField",name:"comparison",plural:!1,selections:[{alias:null,args:null,concreteType:"Commit",kind:"LinkedField",name:"oldCommit",plural:!1,selections:l,storageKey:null},{alias:null,args:null,concreteType:"Commit",kind:"LinkedField",name:"newCommit",plural:!1,selections:l,storageKey:null}],storageKey:null}],type:"PullRequest",abstractKey:null},s],storageKey:null}]},params:{id:"fb6fd29b2f37f48929378e605adb454a",metadata:{},name:"DiffChatWrapper_ComparisonQuery",operationKind:"query",text:null}}}();a.hash="e34cdc5b305060e84f51c908a09989a0";let s=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"diffEntryId"}],t=[{kind:"Variable",name:"id",variableName:"diffEntryId"}],n={alias:null,args:null,kind:"ScalarField",name:"path",storageKey:null},i=[n,{alias:null,args:null,kind:"ScalarField",name:"size",storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"DiffChatWrapper_DiffEntryQuery",selections:[{alias:"diffEntry",args:t,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"useFileDiffReference_DiffEntry"}],type:"PullRequestDiffEntry",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"DiffChatWrapper_DiffEntryQuery",selections:[{alias:"diffEntry",args:t,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"pathDigest",storageKey:null},n,{alias:null,args:null,kind:"ScalarField",name:"rawUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isBinary",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isSubmodule",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isLfsPointer",storageKey:null},{alias:null,args:null,concreteType:"TreeEntry",kind:"LinkedField",name:"oldTreeEntry",plural:!1,selections:i,storageKey:null},{alias:null,args:null,concreteType:"TreeEntry",kind:"LinkedField",name:"newTreeEntry",plural:!1,selections:i,storageKey:null}],type:"PullRequestDiffEntry",abstractKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:"7c9df64c41ef33594dd0882be84ef373",metadata:{},name:"DiffChatWrapper_DiffEntryQuery",operationKind:"query",text:null}}}();s.hash="064698bd6869b0c7d063a68d0b3666d8";var l=n(91160),o=n(44196),d=n(96540),c=n(18312),u=n(64104);let m=({children:e})=>{let{viewer:t}=(0,c.useLazyLoadQuery)(r,{});return t.isCopilotDotcomChatEnabled?(0,i.jsx)(i.Fragment,{children:e}):null},f=({Component:e,componentProps:t,queryVariables:n})=>{let{pullRequest:r}=(0,c.useLazyLoadQuery)(a,n),{diffEntry:o}=(0,c.useLazyLoadQuery)(s,n);(0,l.M)(r?.comparison),(0,l.M)(o);let d=(0,u.Kf)(r.comparison,o);return d?(0,i.jsx)(e,{fileDiffReference:d,...t}):null},h=({Component:e,componentProps:t,referenceData:n,queryVariables:r})=>{let{pullRequest:s}=(0,c.useLazyLoadQuery)(a,r);(0,l.M)(s?.comparison);let o=(0,u.hQ)(s?.comparison,n);return o?(0,i.jsx)(e,{fileDiffReference:o,...t}):null},p=({Component:e,componentProps:t,errorFallback:n=null,suspenseFallback:r=null,...a})=>(0,i.jsx)(o.t,{fallback:n,children:(0,i.jsx)(d.Suspense,{fallback:r,children:(0,i.jsx)(m,{children:a.referenceData?(0,i.jsx)(h,{Component:e,componentProps:t,referenceData:a.referenceData,queryVariables:a.queryVariables}):(0,i.jsx)(f,{Component:e,componentProps:t,queryVariables:a.queryVariables})})})});try{m.displayName||(m.displayName="CopilotCodeChatAccessLoader")}catch{}try{f.displayName||(f.displayName="CopilotCodeChatReferenceLoader")}catch{}try{h.displayName||(h.displayName="CopilotCodeChatComparisonLoader")}catch{}try{p.displayName||(p.displayName="DiffChatWrapper")}catch{}},78017:(e,t,n)=>{n.d(t,{i:()=>o});var i=n(74848),r=n(822),a=n(51848),s=n(54156),l=n(80497);let o=({fileDiffReference:e,eventContext:t,afterSelect:n})=>{let{addToast:o}=(0,s.Y6)();return(0,i.jsx)(l.l.Item,{onSelect:()=>{(0,r.Oc)(e),o({message:"Reference added to thread",type:"success"}),(0,a.BI)("copilot.file-diff.add",t),n?.()},children:"Attach to current thread"})};try{o.displayName||(o.displayName="DiffLinesAttachMenuItem")}catch{}},23246:(e,t,n)=>{n.d(t,{t:()=>o});var i=n(74848),r=n(822),a=n(89426),s=n(51848),l=n(80497);let o=({fileDiffReference:e,leadingVisual:t,eventContext:n,afterSelect:o})=>(0,i.jsxs)(l.l.Item,{onSelect:()=>{(0,r.qR)({intent:a.wh.conversation,references:[e]}),(0,s.BI)("copilot.file-diff.discuss",n),o?.()},children:[t&&(0,i.jsx)(l.l.LeadingVisual,{children:t}),"Ask about this diff"]});try{o.displayName||(o.displayName="DiffLinesDiscussMenuItem")}catch{}},39037:(e,t,n)=>{n.d(t,{e:()=>o});var i=n(74848),r=n(822),a=n(89426),s=n(51848),l=n(80497);let o=({fileDiffReference:e,eventContext:t,afterSelect:n})=>(0,i.jsx)(l.l.Item,{onSelect:()=>{(0,r.qR)({content:"Explain",intent:a.wh.explainFileDiff,references:[e]}),(0,s.BI)("copilot.file-diff.explain",t),n?.()},children:"Explain"});try{o.displayName||(o.displayName="DiffLinesExplainMenuItem")}catch{}},13439:(e,t,n)=>{n.d(t,{o:()=>x});var i=n(74848),r=n(38621),a=n(96540),s=n(37354),l=n(68976),o=n(24980),d=n(58539),c=n(27500),u=n(76515),m=n(97156);let f=(0,a.memo)(function({file:e,depth:t,hash:n,onSelect:o}){let u=a.useRef(null),f=(0,c.Z)({focusRowRef:u,mouseRowRef:u}),h=(e.diff.totalCommentsCount??0)+(e.diff.totalAnnotationsCount??0);return(0,a.useEffect)(()=>{if(u.current&&e.diff.pathDigest===n){let e=window.setTimeout(()=>{let e=m.XC?.getElementById("diff_file_tree")?.parentElement,t=u.current.offsetTop,n=m.cg?.innerHeight??0;e&&(e.scrollTop=t-n/2)},0);return()=>{window.clearTimeout(e)}}},[e.diff.pathDigest,n]),(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(s.G.Item,{defaultExpanded:!0,"aria-level":t,current:e.diff.pathDigest===n,id:e.diff.path,onSelect:()=>o?.(e.diff),ref:u,children:[(0,i.jsx)(s.G.LeadingVisual,{children:(0,i.jsx)(d.E,{status:e.diff.changeType})}),e.fileName,f&&(0,i.jsx)(l.m,{"data-testid":`${e.fileName}-item-tooltip`,id:`${e.fileName}-item-tooltip`,contentRef:u,"aria-label":e.fileName,open:!0,direction:"ne"}),!!h&&(0,i.jsxs)("span",{className:"sr-only",children:["has ",h<10?h:"9+"," ",h>1?"comments":"comment"]}),!!h&&(0,i.jsx)(s.G.TrailingVisual,{children:(0,i.jsxs)("div",{className:"d-flex flex-items-center flex-row",children:[(0,i.jsx)(r.CommentIcon,{}),(0,i.jsx)("div",{className:"ml-1 text-bold fgColor-default f6",children:h<10?h:"9+"})]})})]})})});function h({directory:e,renderPattern:t,depth:n=0,leadingPath:r="",...o}){let d=r?`${r}/`:"",u=a.useRef(null),m=a.useRef(null),f=(0,c.Z)({focusRowRef:m,mouseRowRef:u});if(!e.files.length&&1===e.directories.length)return(0,i.jsx)(i.Fragment,{children:e.directories.map(r=>(0,i.jsx)(h,{depth:0===n?1:n,directory:r,leadingPath:`${d}${e.name}`,renderPattern:t,...o},r.path))});function x(){return"traditional"===t?(0,i.jsx)(p,{directory:e,depth:n,renderPattern:t,...o}):(0,i.jsx)(g,{directory:e,depth:n,renderPattern:t,...o})}return 0===n?x():(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(s.G.Item,{ref:m,defaultExpanded:!0,id:e.path,children:[(0,i.jsx)(s.G.LeadingVisual,{children:(0,i.jsx)(s.G.DirectoryIcon,{})}),(0,i.jsx)("span",{ref:u,children:`${d}${e.name}`}),f&&(0,i.jsx)(l.m,{"data-testid":`${e.name}-directory-item-tooltip`,id:`${e.name}-directory-item-tooltip`,contentRef:m,"aria-label":`${d}${e.name}`,open:!0,direction:"ne"}),(0,i.jsx)(s.G.SubTree,{children:x()})]},e.path)})}function p({directory:e,renderPattern:t,depth:n=0,...r}){let a=e.files.map(e=>({path:e.filePath,pathType:"file",node:e})).concat(e.directories.map(e=>({path:e.path,pathType:"directory",node:e})));return a.sort((e,t)=>(0,o.wH)(e.path,t.path)),(0,i.jsx)(i.Fragment,{children:a.map(e=>"file"===e.pathType?(0,i.jsx)(f,{depth:n+1,file:e.node,...r},e.path):(0,i.jsx)(h,{depth:n+1,directory:e.node,renderPattern:t,...r},e.path))})}function g({directory:e,depth:t=0,...n}){return(0,i.jsxs)(i.Fragment,{children:[e.files.map(e=>(0,i.jsx)(f,{depth:t+1,file:e,...n},e.filePath)),e.directories.map(e=>(0,i.jsx)(h,{depth:t+1,directory:e,...n},e.path))]})}let x=(0,a.memo)(function({diffs:e,renderPattern:t,...n}){let r=(0,o.xY)(e),[l,d]=a.useState(""),c=(0,a.useCallback)(()=>{d(((0,u.pd)(m.fV.hash??"")??"").replace("diff-",""))},[d]);return(0,a.useEffect)(()=>(window.addEventListener("hashchange",c),c(),()=>{window.removeEventListener("hashchange",c)}),[c]),(0,i.jsx)(s.G,{"aria-label":"File Tree",children:(0,i.jsx)(h,{directory:r,renderPattern:t,...n,hash:l})})});try{f.displayName||(f.displayName="File")}catch{}try{h.displayName||(h.displayName="Directory")}catch{}try{p.displayName||(p.displayName="TraditionalDirectoryRendering")}catch{}try{g.displayName||(g.displayName="GroupedDirectoryRendering")}catch{}try{x.displayName||(x.displayName="DiffFileTree")}catch{}},14097:(e,t,n)=>{n.d(t,{kF:()=>p,F7:()=>h});var i,r=n(74848),a=n(38621),s=n(67138),l=n(89323),o=n(87330),d=n(30595),c=n(80497),u=n(96540),m=n(20053);let f={filterLoadingHeight:"FileFilter-module__filterLoadingHeight--cW8BP"},h="No extension";function p({filterText:e,onFilterTextChange:t,fileExtensions:n,unselectedFileExtensions:i,onFilterChange:d,additionalFilterGroups:m}){let[f,p]=(0,u.useState)(e),g=(e,t)=>{d?.(e?"selectFileExtension":"unselectFileExtension",{extension:t})},x=Array.from(n||[]).filter(e=>e!==h).sort(),y=e=>!i?.has(e),b=n?.has(h);return(0,r.jsxs)("div",{className:"d-flex flex-nowrap gap-2",children:[(0,r.jsx)(s.A,{block:!0,"aria-label":"Filter files\u2026",leadingVisual:a.SearchIcon,placeholder:"Filter files\u2026",value:f,onChange:e=>{p(e.target.value),t?.(e.target.value)}}),(0,r.jsxs)(l.W,{children:[(0,r.jsx)(l.W.Anchor,{children:(0,r.jsx)(o.K,{unsafeDisableTooltip:!0,"aria-label":"Filter",icon:a.SlidersIcon,className:"flex-shrink-0"})}),(0,r.jsx)(l.W.Overlay,{children:(0,r.jsxs)(c.l,{children:[(0,r.jsxs)(c.l.Group,{selectionVariant:"multiple",children:[(0,r.jsx)(c.l.GroupHeading,{children:"File extensions"}),x.map(e=>{let t=y(e);return(0,r.jsx)(c.l.Item,{selected:t,onSelect:()=>g(!t,e),children:`${e}`},e)}),b&&(0,r.jsx)(c.l.Item,{selected:y(h),onSelect:()=>g(!y(h),h),children:h},h)]}),m]})})]})]})}try{(i=function({filterText:e,onFilterTextChange:t}){return(0,r.jsxs)("div",{className:"d-flex flex-nowrap gap-2",children:[(0,r.jsx)(s.A,{block:!0,"aria-label":"Filter files\u2026",leadingVisual:a.SearchIcon,placeholder:"Filter files\u2026",value:e,onChange:e=>t?.(e.target.value)}),(0,r.jsxs)(l.W,{children:[(0,r.jsx)(l.W.Anchor,{children:(0,r.jsx)(o.K,{unsafeDisableTooltip:!0,"aria-label":"Filter",icon:a.SlidersIcon,className:"flex-shrink-0"})}),(0,r.jsx)(l.W.Overlay,{className:(0,m.$)(f.filterLoadingHeight),children:(0,r.jsx)("div",{className:(0,m.$)("d-flex","flex-column","flex-justify-center","flex-items-center",f.filterLoadingHeight),children:(0,r.jsx)(d.A,{size:"medium"})})})]})]})}).displayName||(i.displayName="FileFilterLoading")}catch{}try{p.displayName||(p.displayName="FileFilterShared")}catch{}},58539:(e,t,n)=>{n.d(t,{E:()=>s});var i=n(74848),r=n(38621),a=n(30729);function s({status:e}){switch(e){case"ADDED":case"COPIED":return(0,i.jsx)(a.A,{size:16,icon:r.FileAddedIcon,className:"fgColor-success"});case"DELETED":case"REMOVED":return(0,i.jsx)(a.A,{size:16,icon:r.FileRemovedIcon,className:"fgColor-danger"});case"RENAMED":return(0,i.jsx)(a.A,{size:16,icon:r.FileMovedIcon,className:"fgColor-attention"});default:return(0,i.jsx)(a.A,{size:16,icon:r.FileDiffIcon,className:"fgColor-muted"})}}try{s.displayName||(s.displayName="FileStatusIcon")}catch{}},50990:(e,t,n)=>{n.d(t,{Y:()=>p,o:()=>f});var i=n(74848),r=n(7572),a=n(97156),s=n(96540),l=n(46996),o=n(77321),d=n(76515),c=n(30841),u=n(9393);let m=(0,s.createContext)(null);function f(){let e=(0,s.useContext)(m);if(!e)throw Error("useSelectedDiffRowRange must be used within a SelectedDiffRowRangeContext");return e}function h(e){e.startLineNumber===e.endLineNumber&&e.startOrientation===e.endOrientation?(0,r.i)(`${"left"===e.startOrientation?"L":"R"}${e.startLineNumber} selected.`):(0,r.i)(`${"left"===e.startOrientation?"L":"R"}${e.startLineNumber} to ${"left"===e.endOrientation?"L":"R"}${e.endLineNumber} selected.`)}function p({children:e}){let t=(0,s.useRef)(new Map),n=(0,c.K)((e,n)=>{if(!e)return;let i=e.diffAnchor,r=t.current.get(i);if(!r)return;let{leftLines:a,rightLines:s}=(0,u.Mk)(r);return(0,o.A)({selectedDiffRowRange:e,leftLines:a,rightLines:s,isNumberCell:n})}),[f,p]=(0,s.useState)(()=>(0,d.ZD)(a.fV.hash)),[g,x]=(0,s.useState)(()=>{if(f){let e=n(f);if(e)return{leftLines:e.selectedLeftLines,rightLines:e.selectedRightLines||[]}}return{leftLines:[],rightLines:[]}}),y=(0,c.K)((e,t)=>{let i=n(e,t),r=i?{leftLines:i.selectedLeftLines,rightLines:i.selectedRightLines||[]}:{leftLines:[],rightLines:[]};(0,l.A)(g,r)||x(r)}),b=(0,c.K)((e,t,n,i,r)=>{if(!t||!n)return;let a=i&&f&&f.diffAnchor===e?t<=f.firstSelectedLineNumber?{...f,startLineNumber:t,startOrientation:n,endLineNumber:f.firstSelectedLineNumber,endOrientation:f.firstSelectedOrientation}:{...f,startLineNumber:f.firstSelectedLineNumber,startOrientation:f.firstSelectedOrientation,endLineNumber:t,endOrientation:n}:{diffAnchor:e,endLineNumber:t,endOrientation:n,startLineNumber:t,startOrientation:n,firstSelectedLineNumber:t,firstSelectedOrientation:n};h(a),(r||i)&&p(a),y(a,r),(0,d.i8)(a)}),j=(0,c.K)(e=>{h(e),p(e),y(e),(0,d.i8)(e)}),C=(0,c.K)(({diffAnchor:e,startGridCell:t,endGridCell:n,focusedGridCell:i})=>{j({diffAnchor:e,endLineNumber:n.lineNumber,endOrientation:n.orientation,firstSelectedLineNumber:i.lineNumber,firstSelectedOrientation:i.orientation,startLineNumber:t.lineNumber,startOrientation:t.orientation})}),v=(0,c.K)(()=>{f&&(p(void 0),y(void 0),(0,r.i)("Selection Cleared"),history.replaceState({},"",window.location.pathname+window.location.search))}),N=(0,c.K)((e,n)=>{t.current.set(e,n),f?.diffAnchor===e&&y(f)}),w=(0,c.K)(e=>t.current.get(e)),S=(0,s.useMemo)(()=>({selectedDiffRowRange:f,updateSelectedDiffRowRange:b,clearSelectedDiffRowRange:v,replaceSelectedDiffRowRange:j,replaceSelectedDiffRowRangeFromGridCells:C,updateDiffLines:N,selectedDiffLines:g,getDiffLinesFromLineRange:n,getDiffLinesByDiffAnchor:w}),[f,b,v,j,C,g,N,n,w]);return(0,i.jsx)(m.Provider,{value:S,children:e})}try{m.displayName||(m.displayName="SelectedDiffRowRange")}catch{}try{p.displayName||(p.displayName="SelectedDiffRowRangeContextProvider")}catch{}},32871:(e,t,n)=>{n.d(t,{G:()=>C});var i=n(74848),r=n(38621),a=n(89323),s=n(80497),l=n(83901),o=n(98939),d=n(84217),c=n(55847),u=n(96540),m=n(27756),f=n(83056),h=n(82897),p=n(28784);function g(e){return 0===(function(){let e=(0,h.B)();return e?(e.userNotices??[]).filter(e=>!e.dismissed):[]})().filter(t=>t.name===e).length}let x="compact_diff_lines";function y(){let e=g(x),{dismissNotice:t}=function(e){let t=g(e);return{dismissNotice:(0,u.useCallback)(()=>{(0,m.M3)()&&!t&&(0,p.DI)((0,f.VB1)({noticeName:e}),{method:"POST"})},[t,e])}}(x),{updateLineSpacing:n}=(0,l.n)(),[r,a]=(0,u.useState)(!0),s=(0,u.useCallback)(()=>{n("compact"),a(!1),t()},[t,n]),h=(0,u.useCallback)(()=>{a(!1),t()},[t]);return e?null:(0,i.jsx)(o.A,{open:r,caret:"top-right",sx:{top:"60px",right:"-4px"},children:(0,i.jsxs)(o.A.Content,{className:"d-flex flex-column gap-2",sx:{minWidth:"260px",width:"40%"},children:[(0,i.jsx)(d.A,{sx:{fontSize:2},as:"h2",children:"Customizable line height"}),(0,i.jsx)("p",{children:"The default line height has been increased for improved accessibility. You can choose to enable a more compact line height from the view settings menu."}),(0,i.jsxs)("div",{className:"d-flex gap-2 flex-row w-full flex-wrap",children:[(0,i.jsx)(c.Q,{onClick:s,sx:{flexShrink:0,flexGrow:1},children:"Enable compact line height"}),(0,i.jsx)(c.Q,{onClick:h,variant:"invisible",sx:{color:"accent.fg",flexGrow:1},alignContent:"center",children:"Dismiss"})]})]})})}try{y.displayName||(y.displayName="DiffCompactLinesPopover")}catch{}function b({lineSpacingPreferenceAvailable:e=!0,reloadOnChange:t=!1}){let{hideWhitespace:n,updateHideWhitespace:r,lineSpacing:a,updateLineSpacing:o}=(0,l.n)();return(0,i.jsxs)(s.l.Group,{selectionVariant:"multiple",variant:"subtle",children:[(0,i.jsx)(s.l.Item,{selected:n,onSelect:()=>{r(!n),t&&window.location.reload()},children:"Hide whitespace"}),e&&(0,i.jsx)(s.l.Item,{selected:"compact"===a,onSelect:()=>o("compact"===a?"relaxed":"compact"),children:"Compact line height"})]})}try{b.displayName||(b.displayName="DiffLinePresentationToggles")}catch{}function j({reloadOnChange:e=!1}){let{splitPreference:t,updateSplitPreference:n}=(0,l.n)();return(0,i.jsxs)(s.l.Group,{selectionVariant:"single",children:[(0,i.jsx)(s.l.GroupHeading,{children:"Layout"}),(0,i.jsx)(s.l.Item,{selected:"unified"===t,onSelect:()=>{n("unified"),e&&window.location.reload()},children:"Unified"}),(0,i.jsx)(s.l.Item,{selected:"split"===t,onSelect:()=>{n("split"),e&&window.location.reload()},children:"Split"})]})}try{j.displayName||(j.displayName="DiffViewPreferenceToggle")}catch{}function C({lineSpacingPreferenceAvailable:e=!0,reloadOnChange:t=!1}){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(a.W,{children:[(0,i.jsx)(a.W.Anchor,{children:(0,i.jsx)("button",{className:"Button Button--iconOnly Button--invisible","aria-label":"Open diff view settings",children:(0,i.jsx)(r.GearIcon,{})})}),(0,i.jsx)(a.W.Overlay,{children:(0,i.jsxs)(s.l,{children:[(0,i.jsx)(j,{reloadOnChange:t}),(0,i.jsx)(s.l.Divider,{}),(0,i.jsx)(b,{lineSpacingPreferenceAvailable:e,reloadOnChange:t})]})})]}),(0,i.jsx)(y,{})]})}try{C.displayName||(C.displayName="DiffViewSettings")}catch{}},83901:(e,t,n)=>{n.d(t,{B:()=>f,n:()=>h});var i=n(74848),r=n(86584),a=n(27788),s=n(96540),l=n(83056),o=n(28784);async function d(e,t){if(!t)return;let n=new FormData;n.set("diff_line_spacing",e),(0,o.DI)((0,l.Dk9)(t),{method:"PUT",body:n,headers:{Accept:"application/json"}})}let c="/users/diffview";async function u(e){"split"===e?(0,o.DI)(`${c}?diff=split`,{method:"POST"}):"unified"===e&&(0,o.DI)(`${c}?diff=unified`,{method:"POST"})}let m=(0,s.createContext)({hideWhitespace:!1,splitPreference:"split",lineSpacing:"relaxed",updateHideWhitespace:()=>{},updateSplitPreference:()=>{},updateLineSpacing:()=>{}});function f({viewSettings:e,children:t}){let n=(0,r.i)(),l=function(e){let t=e,[n]=(0,a.o)(),i=n.get("diff");return("split"===i||"unified"===i)&&(t=i),t}(e.splitPreference),o=function(e){let t=e,[n]=(0,a.o)(),i=n.get("w");return"1"===i?t=!0:"0"===i&&(t=!1),t}(e.hideWhitespace),c=e.lineSpacing,[f,h]=(0,s.useState)(l),[g,x]=(0,s.useState)(o),[y,b]=(0,s.useState)(c),j=(0,s.useCallback)(async e=>{p("diff",e),h(e),await u(e)},[]),C=(0,s.useCallback)(e=>{p("w",e?"1":"0"),x(e)},[]),v=(0,s.useCallback)(async e=>{b(e),await d(e,n)},[n]),N=(0,s.useMemo)(()=>({hideWhitespace:g,splitPreference:f,lineSpacing:y,updateHideWhitespace:C,updateSplitPreference:j,updateLineSpacing:v}),[g,y,f,C,v,j]);return(0,i.jsx)(m.Provider,{value:N,children:t})}function h(){return(0,s.useContext)(m)}function p(e,t){let n=new URL(window.location.href,window.location.origin);if(t){let i=encodeURIComponent(t);n.searchParams.set(e,i)}else n.searchParams.delete(e);window.history.replaceState({path:n.toString()},"",n.toString())}try{m.displayName||(m.displayName="DiffViewSettingsContext")}catch{}try{f.displayName||(f.displayName="DiffViewSettingsProvider")}catch{}},35558:(e,t,n)=>{n.d(t,{L:()=>o});var i=n(74848),r=n(38621),a=n(87330),s=n(94977),l=n(20053);let o=n(96540).forwardRef(({expanded:e,testid:t,ariaLabel:n,ariaControls:o,onToggleExpanded:d,alignment:c,dataHotkey:u,className:m,tooltipDirection:f,variant:h},p)=>(0,i.jsx)(s.A,{"aria-label":n,id:`expand-button-${t}`,direction:f,children:(0,i.jsx)(a.K,{unsafeDisableTooltip:!0,ref:p,"data-testid":e?`collapse-${t}`:`expand-${t}`,"aria-labelledby":`expand-button-${t}`,"aria-expanded":e,"aria-controls":o,icon:e?"left"===c?r.SidebarExpandIcon:r.SidebarCollapseIcon:"left"===c?r.SidebarCollapseIcon:r.SidebarExpandIcon,"data-hotkey":u,onClick:e=>{d(e)},variant:h??"invisible",className:(0,l.$)(m,"fgColor-muted")})}));o.displayName="ExpandButton"},59972:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var i=n(74848),r=n(95140),a=n(65481),s=n(75177),l=n(30595),o=n(52464),d=n(96540),c=function(e){return e.ERROR="ERROR",e.LOADING="LOADING",e.LOADED="LOADED",e.READY="READY",e}({});function u(e){e&&(e.load=e.hello=null,e.helloTimer&&(clearTimeout(e.helloTimer),e.helloTimer=null),e.loadTimer&&(clearTimeout(e.loadTimer),e.loadTimer=null))}function m(e,t){e&&e.postMessage&&e.postMessage(JSON.stringify(t),"*")}function f({identityUuid:e,size:t,type:n,url:o}){let[f]=(0,r.I)(()=>window.location.origin,"https://www.github.com",[]),p=new URL(o,f).origin,{renderState:g,errorMsg:x,iFrameRef:y,containerRef:b}=function(e){let[t,n]=function(e){let[t,n]=(0,d.useState)(e),i=(0,d.useRef)(t);return[i,e=>{i.current=e,n(e)}]}("LOADING"),i=(0,d.useRef)(null),r=(0,d.useRef)(null),a=(0,d.useRef)(null),s=(0,d.useRef)({untimed:!0}),l=(0,d.useCallback)(t=>(function(e,t,n,i,r,a,s){if(e.origin!==t)return;let l=function(e){var t;let n=e.data;if(!n)return null;if("string"==typeof n)try{n=JSON.parse(n)}catch{return null}return"object"==typeof(t=n)&&t&&"render"===t.type&&"string"==typeof t.body&&"object"==typeof t.payload?n:null}(e);if(!l){a("ERROR");return}let o=l.body,d=null!=l.payload?l.payload:void 0,c=n.current?.contentWindow;switch(o){case"hello":(r.current??{untimed:!0}).hello=Date.now(),m(c,{type:"render:cmd",body:{cmd:"ack",ack:!0}}),m(c,{type:"render:cmd",body:{cmd:"branding",branding:!1}});break;case"error":case"error:fatal":case"error:invalid":d&&s(d.error??null),a("ERROR");break;case"loading":a("LOADING");break;case"loaded":a("LOADED");break;case"ready":d&&"number"==typeof d.height&&i.current&&(i.current.style.height=`${d.height}px`),a("READY");break;case"resize":d&&"number"==typeof d.height&&i.current&&(i.current.style.height=`${d.height}px`);break;case"code_rendering_service:container:get_size":m(c,{type:"render:cmd",body:{cmd:"code_rendering_service:container:size","code_rendering_service:container:size":{width:i.current?.getBoundingClientRect().width}}});break;case"code_rendering_service:markdown:get_data":if(!n.current||!i.current)return;!function(e,t){let n=e.getAttribute("data-content");if(!n)return;let i={type:"render:cmd",body:{cmd:"code_rendering_service:data:ready","code_rendering_service:data:ready":{data:JSON.parse(n).data,width:t.getBoundingClientRect().width}}};m(e.contentWindow,i)}(n.current,i.current)}})(t,e,r,a,s,n,e=>i.current=e),[e,n]);return(0,d.useEffect)(()=>{u(s.current);let e=e=>{("LOADING"===t.current||"LOADED"===t.current)&&(!e||s.current.hello)&&n("ERROR")};return s.current={load:Date.now(),hello:null,helloTimer:window.setTimeout(e,1e4,!0),loadTimer:window.setTimeout(e,45e3)},()=>{u(s.current)}},[t,n]),(0,d.useEffect)(()=>(window.addEventListener("message",l),()=>window.removeEventListener("message",l)),[l]),{renderState:t.current,errorMsg:i.current,iFrameRef:r,containerRef:a}}(p);if("ipynb"===n&&t>3e7||t>2e8)return(0,i.jsx)(a.A,{variant:"danger",children:"Sorry, this is too big to display."});let j=g!==c.READY?{height:"1px",width:"1px",position:"fixed",bottom:0,right:0}:{height:"100%",width:"100%"};return(0,i.jsx)(s.A,{sx:{width:"100%",display:"flex",justifyContent:"center"},children:(0,i.jsxs)(s.A,{"data-hpc":!0,"data-host":p,"data-type":n,ref:b,sx:{width:1024,...g!==c.ERROR?{borderBottomLeftRadius:"6px",borderBottomRightRadius:"6px",lineHeight:"0",padding:5,textAlign:"center"}:{},...g===c.READY?{height:"500px",padding:0,background:"none"}:{}},children:[g===c.ERROR?(0,i.jsx)(h,{error:x}):g!==c.READY?(0,i.jsx)(l.A,{size:"large",sx:{mx:"auto"}}):null,g!==c.ERROR&&(0,i.jsx)(s.A,{as:"iframe",ref:y,src:`${o}#${e}`,sandbox:"allow-scripts allow-same-origin allow-top-navigation",sx:{border:0,display:"block",...j},name:e,title:"File display",children:"Viewer requires iframe."})]})})}function h({error:e}){if(!e)return(0,i.jsx)(a.A,{variant:"danger",children:"Unable to render code block"});let t=e.split("\n");return(0,i.jsxs)(a.A,{variant:"danger",children:[(0,i.jsx)(o.A,{as:"p",sx:{fontWeight:"bold"},children:"Error rendering embedded code"}),(0,i.jsx)("p",{children:t.map((e,t)=>(0,i.jsxs)(d.Fragment,{children:[e,(0,i.jsx)("br",{})]},`error-line-${t}`))})]})}try{f.displayName||(f.displayName="FileRendererBlob")}catch{}try{h.displayName||(h.displayName="FileRendererErrorMessage")}catch{}},23521:(e,t,n)=>{n.d(t,{U:()=>d});var i=n(74848),r=n(92240),a=n(75177),s=n(20053),l=n(2562);let o={container:"Description-module__container--b3n6F",compact:"Description-module__compact--SPRVh"};function d({children:e,style:t,className:n,sx:d}){let{variant:c}=(0,l.e)();return(0,i.jsx)(a.A,{...(0,r.G)("list-view-item-description"),className:(0,s.$)(o.container,"compact"===c&&o.compact,n),style:t,sx:d,children:e})}try{d.displayName||(d.displayName="ListItemDescription")}catch{}},41647:(e,t,n)=>{n.d(t,{Q:()=>c});var i=n(74848),r=n(92240),a=n(20053),s=n(96540),l=n(2562);let o={container:"MainContent-module__container--ry4iL",inner:"MainContent-module__inner--bU_tk",compact:"MainContent-module__compact--mM626"};var d=n(43972);function c({children:e}){let{variant:t}=(0,l.e)(),n=s.Children.toArray(e),c=n.findIndex(e=>(0,s.isValidElement)(e)&&"string"!=typeof e&&e.type===d.a),u=n[c],m=c<0?n:n.slice(0,c).concat(n.slice(c+1));return(0,i.jsxs)(i.Fragment,{children:[u,(0,i.jsx)("div",{...(0,r.G)("list-view-item-main-content"),className:o.container,children:(0,i.jsx)("div",{className:(0,a.$)(o.inner,"compact"===t&&o.compact),children:m})})]})}try{c.displayName||(c.displayName="ListItemMainContent")}catch{}},47467:(e,t,n)=>{n.d(t,{V:()=>o});var i=n(74848),r=n(92240),a=n(75177),s=n(20053);let l={metadata:"Metadata-module__metadata--yvrod",secondary:"Metadata-module__secondary--zMgLx",primary:"Metadata-module__primary--cJgJU",alignRight:"Metadata-module__alignRight--rp0_Z"};function o({children:e,alignment:t,variant:n,...o}){return(0,i.jsx)(a.A,{...(0,r.G)("list-view-item-metadata-item"),...o,className:(0,s.$)(l.metadata,"primary"===n?l.primary:l.secondary,"right"===t&&l.alignRight,o.className),children:e})}try{o.displayName||(o.displayName="ListItemMetadata")}catch{}},34306:(e,t,n)=>{n.d(t,{e:()=>a});var i=n(74848),r=n(92979);function a(){return(0,i.jsx)("div",{className:"d-flex flex-wrap gap-1",children:(0,i.jsx)(r.O,{variant:"elliptical",height:"28px",width:"28px"})})}try{a.displayName||(a.displayName="ReactionViewerLoading")}catch{}},224:(e,t,n)=>{n.d(t,{k:()=>l});var i=n(74848),r=n(22868),a=n(75177),s=n(64872);function l({zIndex:e,altText:t,hovercardUrl:n,src:l,square:o,icon:d,iconColor:c,backgroundColor:u,backgroundSx:m,sx:f,size:h=20}){return(0,i.jsxs)(a.A,{sx:{position:"relative",display:"flex",gap:2,alignItems:"center",...e,...f},children:[(0,i.jsx)(r.r,{alt:t,"data-hovercard-url":n,size:h,square:o,src:l}),(0,i.jsx)(s.k,{icon:d,iconColor:c,size:12,backgroundColor:u,backgroundSx:m})]})}try{l.displayName||(l.displayName="StatusAvatar")}catch{}},64872:(e,t,n)=>{n.d(t,{k:()=>s});var i=n(74848),r=n(75177),a=n(30729);function s({iconColor:e,icon:t,size:n=12,backgroundColor:s="fg.onEmphasis",absolute:l=!0,backgroundSx:o}){let d,c;return 12===n?(d="10px",c="1px"):20===n?(d="16px",c="2px"):(d="16px",c="4px"),(0,i.jsxs)(r.A,{sx:{display:"flex",borderRadius:"100px",...l?{position:"absolute",bottom:-1,right:-1,boxShadow:"0 0 0 2px var(--bgColor-default, var(--color-canvas-default))",backgroundColor:"var(--bgColor-default, var(--color-canvas-default))"}:{position:"relative"},...o},children:[(0,i.jsx)(r.A,{sx:{display:"flex",position:"absolute",borderRadius:"100px",width:d,height:d,left:c,top:c,backgroundColor:s}}),(0,i.jsx)(a.A,{icon:t,size:n,sx:{color:e,position:"relative"}})]})}try{s.displayName||(s.displayName="StatusIcon")}catch{}},6907:(e,t,n)=>{n.d(t,{x:()=>a});var i=n(2642),r=n(50622);function a(e,t){let n=(0,i.a)(e);if(isNaN(n.getTime()))throw RangeError("Invalid time value");let a=t?.format??"extended",s=t?.representation??"complete",l="",o="",d="extended"===a?"-":"";if("time"!==s){let e=(0,r.F)(n.getDate(),2),t=(0,r.F)(n.getMonth()+1,2),i=(0,r.F)(n.getFullYear(),4);l=`${i}${d}${t}${d}${e}`}if("date"!==s){let e=n.getTimezoneOffset();if(0!==e){let t=Math.abs(e),n=(0,r.F)(Math.trunc(t/60),2),i=(0,r.F)(t%60,2);o=`${e<0?"+":"-"}${n}:${i}`}else o="Z";let t=(0,r.F)(n.getHours(),2),i=(0,r.F)(n.getMinutes(),2),s=(0,r.F)(n.getSeconds(),2),d=""===l?"":"T",c=[t,i,s].join("extended"===a?":":"");l=`${l}${d}${c}${o}`}return l}},46996:(e,t,n)=>{n.d(t,{A:()=>r});var i=n(21179);let r=function(e,t){return(0,i.A)(e,t)}}},e=>{var t=t=>e(e.s=t);e.O(0,["primer-react","react-core","react-lib","octicons-react","vendors-node_modules_primer_behaviors_dist_esm_index_mjs","vendors-node_modules_tanstack_query-core_build_modern_queryClient_js","vendors-node_modules_emotion_is-prop-valid_dist_emotion-is-prop-valid_esm_js-node_modules_emo-37e3d5","vendors-node_modules_github_mini-throttle_dist_index_js-node_modules_stacktrace-parser_dist_s-e7dcdd","vendors-node_modules_oddbird_popover-polyfill_dist_popover-fn_js","vendors-node_modules_dompurify_dist_purify_js","vendors-node_modules_github_relative-time-element_dist_index_js","vendors-node_modules_braintree_browser-detection_dist_browser-detection_js-node_modules_githu-bb80ec","vendors-node_modules_react-relay_index_js","vendors-node_modules_date-fns_format_mjs","vendors-node_modules_lodash-es__Stack_js-node_modules_lodash-es__Uint8Array_js-node_modules_l-4faaa6","vendors-node_modules_date-fns_addWeeks_mjs-node_modules_date-fns_addYears_mjs-node_modules_da-827f4f","vendors-node_modules_github_hotkey_dist_index_js-node_modules_primer_live-region-element_dist-ee65d7","vendors-node_modules_focus-visible_dist_focus-visible_js-node_modules_fzy_js_index_js-node_mo-c4d1d6","vendors-node_modules_date-fns_getDaysInMonth_mjs-node_modules_date-fns_isAfter_mjs-node_modul-49f526","vendors-node_modules_lodash-es__baseIsEqual_js","vendors-node_modules_github_combobox-nav_dist_index_js-node_modules_github_g-emoji-element_di-6ce195","vendors-node_modules_react-relay_hooks_js-node_modules_github_paste-markdown_dist_index_js-no-c4f127","vendors-node_modules_github_quote-selection_dist_index_js-node_modules_github_hydro-analytics-fa0c26","ui_packages_failbot_failbot_ts","ui_packages_aria-live_aria-live_ts-ui_packages_promise-with-resolvers-polyfill_promise-with-r-014121","ui_packages_paths_index_ts","ui_packages_ui-commands_ui-commands_ts","ui_packages_list-view_src_ListItem_ListItem_tsx-ui_packages_list-view_src_ListItem_Title_tsx--68e5b9","ui_packages_date-picker_date-picker_ts-ui_packages_github-avatar_GitHubAvatar_tsx","ui_packages_item-picker_constants_labels_ts-ui_packages_item-picker_constants_values_ts-ui_pa-163a9a","ui_packages_item-picker_components_RepositoryPicker_tsx","ui_packages_use-safe-async-callback_use-safe-async-callback_ts-ui_packages_copy-to-clipboard_-4c1096","ui_packages_issue-create_dialog_CreateIssueDialogEntry_tsx","ui_packages_ref-selector_RefSelector_tsx","ui_packages_commenting_constants_values_ts-ui_packages_use-analytics_use-analytics_ts-ui_pack-af4212","ui_packages_code-view-shared_utilities_web-worker_ts-ui_packages_code-view-shared_worker-jobs-cdcae1"],()=>t(76880)),e.O()}]);
//# sourceMappingURL=commits-513cc571a49f.js.map